(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(i){if(i.ep)return;i.ep=!0;const c=r(i);fetch(i.href,c)}})();function Td(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Yx(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(o){var i=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(r,o,i.get?i:{enumerable:!0,get:function(){return t[o]}})}),r}var uu={exports:{}},di={},du={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp;function Jx(){if(Yp)return $e;Yp=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),g=Symbol.iterator;function w(R){return R===null||typeof R!="object"?null:(R=g&&R[g]||R["@@iterator"],typeof R=="function"?R:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,k={};function E(R,G,N){this.props=R,this.context=G,this.refs=k,this.updater=N||S}E.prototype.isReactComponent={},E.prototype.setState=function(R,G){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,G,"setState")},E.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function P(){}P.prototype=E.prototype;function I(R,G,N){this.props=R,this.context=G,this.refs=k,this.updater=N||S}var A=I.prototype=new P;A.constructor=I,_(A,E.prototype),A.isPureReactComponent=!0;var W=Array.isArray,V=Object.prototype.hasOwnProperty,O={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function M(R,G,N){var $,X={},ae=null,le=null;if(G!=null)for($ in G.ref!==void 0&&(le=G.ref),G.key!==void 0&&(ae=""+G.key),G)V.call(G,$)&&!H.hasOwnProperty($)&&(X[$]=G[$]);var B=arguments.length-2;if(B===1)X.children=N;else if(1<B){for(var de=Array(B),be=0;be<B;be++)de[be]=arguments[be+2];X.children=de}if(R&&R.defaultProps)for($ in B=R.defaultProps,B)X[$]===void 0&&(X[$]=B[$]);return{$$typeof:t,type:R,key:ae,ref:le,props:X,_owner:O.current}}function ee(R,G){return{$$typeof:t,type:R.type,key:G,ref:R.ref,props:R.props,_owner:R._owner}}function ie(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function Ee(R){var G={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(N){return G[N]})}var he=/\/+/g;function we(R,G){return typeof R=="object"&&R!==null&&R.key!=null?Ee(""+R.key):G.toString(36)}function _e(R,G,N,$,X){var ae=typeof R;(ae==="undefined"||ae==="boolean")&&(R=null);var le=!1;if(R===null)le=!0;else switch(ae){case"string":case"number":le=!0;break;case"object":switch(R.$$typeof){case t:case e:le=!0}}if(le)return le=R,X=X(le),R=$===""?"."+we(le,0):$,W(X)?(N="",R!=null&&(N=R.replace(he,"$&/")+"/"),_e(X,G,N,"",function(be){return be})):X!=null&&(ie(X)&&(X=ee(X,N+(!X.key||le&&le.key===X.key?"":(""+X.key).replace(he,"$&/")+"/")+R)),G.push(X)),1;if(le=0,$=$===""?".":$+":",W(R))for(var B=0;B<R.length;B++){ae=R[B];var de=$+we(ae,B);le+=_e(ae,G,N,de,X)}else if(de=w(R),typeof de=="function")for(R=de.call(R),B=0;!(ae=R.next()).done;)ae=ae.value,de=$+we(ae,B++),le+=_e(ae,G,N,de,X);else if(ae==="object")throw G=String(R),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return le}function xe(R,G,N){if(R==null)return R;var $=[],X=0;return _e(R,$,"","",function(ae){return G.call(N,ae,X++)}),$}function ue(R){if(R._status===-1){var G=R._result;G=G(),G.then(function(N){(R._status===0||R._status===-1)&&(R._status=1,R._result=N)},function(N){(R._status===0||R._status===-1)&&(R._status=2,R._result=N)}),R._status===-1&&(R._status=0,R._result=G)}if(R._status===1)return R._result.default;throw R._result}var U={current:null},C={transition:null},re={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:C,ReactCurrentOwner:O};function K(){throw Error("act(...) is not supported in production builds of React.")}return $e.Children={map:xe,forEach:function(R,G,N){xe(R,function(){G.apply(this,arguments)},N)},count:function(R){var G=0;return xe(R,function(){G++}),G},toArray:function(R){return xe(R,function(G){return G})||[]},only:function(R){if(!ie(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},$e.Component=E,$e.Fragment=r,$e.Profiler=i,$e.PureComponent=I,$e.StrictMode=o,$e.Suspense=h,$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,$e.act=K,$e.cloneElement=function(R,G,N){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var $=_({},R.props),X=R.key,ae=R.ref,le=R._owner;if(G!=null){if(G.ref!==void 0&&(ae=G.ref,le=O.current),G.key!==void 0&&(X=""+G.key),R.type&&R.type.defaultProps)var B=R.type.defaultProps;for(de in G)V.call(G,de)&&!H.hasOwnProperty(de)&&($[de]=G[de]===void 0&&B!==void 0?B[de]:G[de])}var de=arguments.length-2;if(de===1)$.children=N;else if(1<de){B=Array(de);for(var be=0;be<de;be++)B[be]=arguments[be+2];$.children=B}return{$$typeof:t,type:R.type,key:X,ref:ae,props:$,_owner:le}},$e.createContext=function(R){return R={$$typeof:l,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:c,_context:R},R.Consumer=R},$e.createElement=M,$e.createFactory=function(R){var G=M.bind(null,R);return G.type=R,G},$e.createRef=function(){return{current:null}},$e.forwardRef=function(R){return{$$typeof:d,render:R}},$e.isValidElement=ie,$e.lazy=function(R){return{$$typeof:v,_payload:{_status:-1,_result:R},_init:ue}},$e.memo=function(R,G){return{$$typeof:p,type:R,compare:G===void 0?null:G}},$e.startTransition=function(R){var G=C.transition;C.transition={};try{R()}finally{C.transition=G}},$e.unstable_act=K,$e.useCallback=function(R,G){return U.current.useCallback(R,G)},$e.useContext=function(R){return U.current.useContext(R)},$e.useDebugValue=function(){},$e.useDeferredValue=function(R){return U.current.useDeferredValue(R)},$e.useEffect=function(R,G){return U.current.useEffect(R,G)},$e.useId=function(){return U.current.useId()},$e.useImperativeHandle=function(R,G,N){return U.current.useImperativeHandle(R,G,N)},$e.useInsertionEffect=function(R,G){return U.current.useInsertionEffect(R,G)},$e.useLayoutEffect=function(R,G){return U.current.useLayoutEffect(R,G)},$e.useMemo=function(R,G){return U.current.useMemo(R,G)},$e.useReducer=function(R,G,N){return U.current.useReducer(R,G,N)},$e.useRef=function(R){return U.current.useRef(R)},$e.useState=function(R){return U.current.useState(R)},$e.useSyncExternalStore=function(R,G,N){return U.current.useSyncExternalStore(R,G,N)},$e.useTransition=function(){return U.current.useTransition()},$e.version="18.3.1",$e}var Jp;function xl(){return Jp||(Jp=1,du.exports=Jx()),du.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp;function Xx(){if(Xp)return di;Xp=1;var t=xl(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(d,h,p){var v,g={},w=null,S=null;p!==void 0&&(w=""+p),h.key!==void 0&&(w=""+h.key),h.ref!==void 0&&(S=h.ref);for(v in h)o.call(h,v)&&!c.hasOwnProperty(v)&&(g[v]=h[v]);if(d&&d.defaultProps)for(v in h=d.defaultProps,h)g[v]===void 0&&(g[v]=h[v]);return{$$typeof:e,type:d,key:w,ref:S,props:g,_owner:i.current}}return di.Fragment=r,di.jsx=l,di.jsxs=l,di}var Qp;function Qx(){return Qp||(Qp=1,uu.exports=Xx()),uu.exports}var m=Qx(),Ba={},hu={exports:{}},en={},fu={exports:{}},pu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp;function Zx(){return Zp||(Zp=1,(function(t){function e(C,re){var K=C.length;C.push(re);e:for(;0<K;){var R=K-1>>>1,G=C[R];if(0<i(G,re))C[R]=re,C[K]=G,K=R;else break e}}function r(C){return C.length===0?null:C[0]}function o(C){if(C.length===0)return null;var re=C[0],K=C.pop();if(K!==re){C[0]=K;e:for(var R=0,G=C.length,N=G>>>1;R<N;){var $=2*(R+1)-1,X=C[$],ae=$+1,le=C[ae];if(0>i(X,K))ae<G&&0>i(le,X)?(C[R]=le,C[ae]=K,R=ae):(C[R]=X,C[$]=K,R=$);else if(ae<G&&0>i(le,K))C[R]=le,C[ae]=K,R=ae;else break e}}return re}function i(C,re){var K=C.sortIndex-re.sortIndex;return K!==0?K:C.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var h=[],p=[],v=1,g=null,w=3,S=!1,_=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(C){for(var re=r(p);re!==null;){if(re.callback===null)o(p);else if(re.startTime<=C)o(p),re.sortIndex=re.expirationTime,e(h,re);else break;re=r(p)}}function W(C){if(k=!1,A(C),!_)if(r(h)!==null)_=!0,ue(V);else{var re=r(p);re!==null&&U(W,re.startTime-C)}}function V(C,re){_=!1,k&&(k=!1,P(M),M=-1),S=!0;var K=w;try{for(A(re),g=r(h);g!==null&&(!(g.expirationTime>re)||C&&!Ee());){var R=g.callback;if(typeof R=="function"){g.callback=null,w=g.priorityLevel;var G=R(g.expirationTime<=re);re=t.unstable_now(),typeof G=="function"?g.callback=G:g===r(h)&&o(h),A(re)}else o(h);g=r(h)}if(g!==null)var N=!0;else{var $=r(p);$!==null&&U(W,$.startTime-re),N=!1}return N}finally{g=null,w=K,S=!1}}var O=!1,H=null,M=-1,ee=5,ie=-1;function Ee(){return!(t.unstable_now()-ie<ee)}function he(){if(H!==null){var C=t.unstable_now();ie=C;var re=!0;try{re=H(!0,C)}finally{re?we():(O=!1,H=null)}}else O=!1}var we;if(typeof I=="function")we=function(){I(he)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,xe=_e.port2;_e.port1.onmessage=he,we=function(){xe.postMessage(null)}}else we=function(){E(he,0)};function ue(C){H=C,O||(O=!0,we())}function U(C,re){M=E(function(){C(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){_||S||(_=!0,ue(V))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return r(h)},t.unstable_next=function(C){switch(w){case 1:case 2:case 3:var re=3;break;default:re=w}var K=w;w=re;try{return C()}finally{w=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,re){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var K=w;w=C;try{return re()}finally{w=K}},t.unstable_scheduleCallback=function(C,re,K){var R=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?R+K:R):K=R,C){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=K+G,C={id:v++,callback:re,priorityLevel:C,startTime:K,expirationTime:G,sortIndex:-1},K>R?(C.sortIndex=K,e(p,C),r(h)===null&&C===r(p)&&(k?(P(M),M=-1):k=!0,U(W,K-R))):(C.sortIndex=G,e(h,C),_||S||(_=!0,ue(V))),C},t.unstable_shouldYield=Ee,t.unstable_wrapCallback=function(C){var re=w;return function(){var K=w;w=re;try{return C.apply(this,arguments)}finally{w=K}}}})(pu)),pu}var em;function e1(){return em||(em=1,fu.exports=Zx()),fu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tm;function t1(){if(tm)return en;tm=1;var t=xl(),e=e1();function r(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,i={};function c(n,s){l(n,s),l(n+"Capture",s)}function l(n,s){for(i[n]=s,n=0;n<s.length;n++)o.add(s[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},g={};function w(n){return h.call(g,n)?!0:h.call(v,n)?!1:p.test(n)?g[n]=!0:(v[n]=!0,!1)}function S(n,s,a,u){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return u?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function _(n,s,a,u){if(s===null||typeof s>"u"||S(n,s,a,u))return!0;if(u)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function k(n,s,a,u,f,y,x){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=u,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=y,this.removeEmptyString=x}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){E[n]=new k(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];E[s]=new k(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){E[n]=new k(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){E[n]=new k(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){E[n]=new k(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){E[n]=new k(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){E[n]=new k(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){E[n]=new k(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){E[n]=new k(n,5,!1,n.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function I(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(P,I);E[s]=new k(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(P,I);E[s]=new k(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(P,I);E[s]=new k(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){E[n]=new k(n,1,!1,n.toLowerCase(),null,!1,!1)}),E.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){E[n]=new k(n,1,!1,n.toLowerCase(),null,!0,!0)});function A(n,s,a,u){var f=E.hasOwnProperty(s)?E[s]:null;(f!==null?f.type!==0:u||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(_(s,a,f,u)&&(a=null),u||f===null?w(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,u=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,u?n.setAttributeNS(u,s,a):n.setAttribute(s,a))))}var W=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),O=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),Ee=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),C=Symbol.iterator;function re(n){return n===null||typeof n!="object"?null:(n=C&&n[C]||n["@@iterator"],typeof n=="function"?n:null)}var K=Object.assign,R;function G(n){if(R===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);R=s&&s[1]||""}return`
`+R+n}var N=!1;function $(n,s){if(!n||N)return"";N=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var u=z}Reflect.construct(n,[],s)}else{try{s.call()}catch(z){u=z}n.call(s.prototype)}else{try{throw Error()}catch(z){u=z}n()}}catch(z){if(z&&u&&typeof z.stack=="string"){for(var f=z.stack.split(`
`),y=u.stack.split(`
`),x=f.length-1,T=y.length-1;1<=x&&0<=T&&f[x]!==y[T];)T--;for(;1<=x&&0<=T;x--,T--)if(f[x]!==y[T]){if(x!==1||T!==1)do if(x--,T--,0>T||f[x]!==y[T]){var j=`
`+f[x].replace(" at new "," at ");return n.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",n.displayName)),j}while(1<=x&&0<=T);break}}}finally{N=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?G(n):""}function X(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=$(n.type,!1),n;case 11:return n=$(n.type.render,!1),n;case 1:return n=$(n.type,!0),n;default:return""}}function ae(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case H:return"Fragment";case O:return"Portal";case ee:return"Profiler";case M:return"StrictMode";case we:return"Suspense";case _e:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Ee:return(n.displayName||"Context")+".Consumer";case ie:return(n._context.displayName||"Context")+".Provider";case he:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case xe:return s=n.displayName||null,s!==null?s:ae(n.type)||"Memo";case ue:s=n._payload,n=n._init;try{return ae(n(s))}catch{}}return null}function le(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(s);case 8:return s===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function B(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function de(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function be(n){var s=de(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),u=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,y=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(x){u=""+x,y.call(this,x)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(x){u=""+x},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Oe(n){n._valueTracker||(n._valueTracker=be(n))}function Ie(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return n&&(u=de(n)?n.checked?"true":"false":n.value),n=u,n!==a?(s.setValue(n),!0):!1}function He(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Xe(n,s){var a=s.checked;return K({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function At(n,s){var a=s.defaultValue==null?"":s.defaultValue,u=s.checked!=null?s.checked:s.defaultChecked;a=B(s.value!=null?s.value:a),n._wrapperState={initialChecked:u,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ut(n,s){s=s.checked,s!=null&&A(n,"checked",s,!1)}function It(n,s){Ut(n,s);var a=B(s.value),u=s.type;if(a!=null)u==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(u==="submit"||u==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?yt(n,s.type,a):s.hasOwnProperty("defaultValue")&&yt(n,s.type,B(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function sn(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var u=s.type;if(!(u!=="submit"&&u!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function yt(n,s,a){(s!=="number"||He(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Kt=Array.isArray;function on(n,s,a,u){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&u&&(n[a].defaultSelected=!0)}else{for(a=""+B(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Qe(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(r(91));return K({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function kt(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(r(92));if(Kt(a)){if(1<a.length)throw Error(r(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:B(a)}}function fn(n,s){var a=B(s.value),u=B(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),u!=null&&(n.defaultValue=""+u)}function Tn(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function wt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function at(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?wt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var se,Me=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,u,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,u,f)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(se=se||document.createElement("div"),se.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=se.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Fe(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var ht={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},an=["Webkit","ms","Moz","O"];Object.keys(ht).forEach(function(n){an.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),ht[s]=ht[n]})});function Ts(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||ht.hasOwnProperty(n)&&ht[n]?(""+s).trim():s+"px"}function Ps(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var u=a.indexOf("--")===0,f=Ts(a,s[a],u);a==="float"&&(a="cssFloat"),u?n.setProperty(a,f):n[a]=f}}var Cs=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fr(n,s){if(s){if(Cs[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(r(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(r(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(r(61))}if(s.style!=null&&typeof s.style!="object")throw Error(r(62))}}function Hr(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zn=null;function Gt(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Wr=null,Vn=null,q=null;function fe(n){if(n=Jo(n)){if(typeof Wr!="function")throw Error(r(280));var s=n.stateNode;s&&(s=sa(s),Wr(n.stateNode,n.type,s))}}function Y(n){Vn?q?q.push(n):q=[n]:Vn=n}function J(){if(Vn){var n=Vn,s=q;if(q=Vn=null,fe(n),s)for(n=0;n<s.length;n++)fe(s[n])}}function ne(n,s){return n(s)}function Re(){}var lt=!1;function ze(n,s,a){if(lt)return n(s,a);lt=!0;try{return ne(n,s,a)}finally{lt=!1,(Vn!==null||q!==null)&&(Re(),J())}}function Te(n,s){var a=n.stateNode;if(a===null)return null;var u=sa(a);if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Ze=!1;if(d)try{var ft={};Object.defineProperty(ft,"passive",{get:function(){Ze=!0}}),window.addEventListener("test",ft,ft),window.removeEventListener("test",ft,ft)}catch{Ze=!1}function Ot(n,s,a,u,f,y,x,T,j){var z=Array.prototype.slice.call(arguments,3);try{s.apply(a,z)}catch(Z){this.onError(Z)}}var Un=!1,pn=null,No=!1,jl=null,nw={onError:function(n){Un=!0,pn=n}};function rw(n,s,a,u,f,y,x,T,j){Un=!1,pn=null,Ot.apply(nw,arguments)}function sw(n,s,a,u,f,y,x,T,j){if(rw.apply(this,arguments),Un){if(Un){var z=pn;Un=!1,pn=null}else throw Error(r(198));No||(No=!0,jl=z)}}function qr(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function vh(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function yh(n){if(qr(n)!==n)throw Error(r(188))}function ow(n){var s=n.alternate;if(!s){if(s=qr(n),s===null)throw Error(r(188));return s!==n?null:n}for(var a=n,u=s;;){var f=a.return;if(f===null)break;var y=f.alternate;if(y===null){if(u=f.return,u!==null){a=u;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===a)return yh(f),n;if(y===u)return yh(f),s;y=y.sibling}throw Error(r(188))}if(a.return!==u.return)a=f,u=y;else{for(var x=!1,T=f.child;T;){if(T===a){x=!0,a=f,u=y;break}if(T===u){x=!0,u=f,a=y;break}T=T.sibling}if(!x){for(T=y.child;T;){if(T===a){x=!0,a=y,u=f;break}if(T===u){x=!0,u=y,a=f;break}T=T.sibling}if(!x)throw Error(r(189))}}if(a.alternate!==u)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:s}function wh(n){return n=ow(n),n!==null?xh(n):null}function xh(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=xh(n);if(s!==null)return s;n=n.sibling}return null}var bh=e.unstable_scheduleCallback,Sh=e.unstable_cancelCallback,iw=e.unstable_shouldYield,aw=e.unstable_requestPaint,ct=e.unstable_now,lw=e.unstable_getCurrentPriorityLevel,Al=e.unstable_ImmediatePriority,_h=e.unstable_UserBlockingPriority,$i=e.unstable_NormalPriority,cw=e.unstable_LowPriority,kh=e.unstable_IdlePriority,Fi=null,zn=null;function uw(n){if(zn&&typeof zn.onCommitFiberRoot=="function")try{zn.onCommitFiberRoot(Fi,n,void 0,(n.current.flags&128)===128)}catch{}}var Pn=Math.clz32?Math.clz32:fw,dw=Math.log,hw=Math.LN2;function fw(n){return n>>>=0,n===0?32:31-(dw(n)/hw|0)|0}var Vi=64,Ui=4194304;function Ro(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function zi(n,s){var a=n.pendingLanes;if(a===0)return 0;var u=0,f=n.suspendedLanes,y=n.pingedLanes,x=a&268435455;if(x!==0){var T=x&~f;T!==0?u=Ro(T):(y&=x,y!==0&&(u=Ro(y)))}else x=a&~f,x!==0?u=Ro(x):y!==0&&(u=Ro(y));if(u===0)return 0;if(s!==0&&s!==u&&(s&f)===0&&(f=u&-u,y=s&-s,f>=y||f===16&&(y&4194240)!==0))return s;if((u&4)!==0&&(u|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=u;0<s;)a=31-Pn(s),f=1<<a,u|=n[a],s&=~f;return u}function pw(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mw(n,s){for(var a=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,y=n.pendingLanes;0<y;){var x=31-Pn(y),T=1<<x,j=f[x];j===-1?((T&a)===0||(T&u)!==0)&&(f[x]=pw(T,s)):j<=s&&(n.expiredLanes|=T),y&=~T}}function Nl(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Eh(){var n=Vi;return Vi<<=1,(Vi&4194240)===0&&(Vi=64),n}function Rl(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Lo(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Pn(s),n[s]=a}function gw(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var u=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-Pn(a),y=1<<f;s[f]=0,u[f]=-1,n[f]=-1,a&=~y}}function Ll(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var u=31-Pn(a),f=1<<u;f&s|n[u]&s&&(n[u]|=s),a&=~f}}var Be=0;function Th(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ph,Il,Ch,jh,Ah,Ol=!1,Bi=[],pr=null,mr=null,gr=null,Io=new Map,Oo=new Map,vr=[],vw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nh(n,s){switch(n){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":Io.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oo.delete(s.pointerId)}}function Do(n,s,a,u,f,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:y,targetContainers:[f]},s!==null&&(s=Jo(s),s!==null&&Il(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function yw(n,s,a,u,f){switch(s){case"focusin":return pr=Do(pr,n,s,a,u,f),!0;case"dragenter":return mr=Do(mr,n,s,a,u,f),!0;case"mouseover":return gr=Do(gr,n,s,a,u,f),!0;case"pointerover":var y=f.pointerId;return Io.set(y,Do(Io.get(y)||null,n,s,a,u,f)),!0;case"gotpointercapture":return y=f.pointerId,Oo.set(y,Do(Oo.get(y)||null,n,s,a,u,f)),!0}return!1}function Rh(n){var s=Kr(n.target);if(s!==null){var a=qr(s);if(a!==null){if(s=a.tag,s===13){if(s=vh(a),s!==null){n.blockedOn=s,Ah(n.priority,function(){Ch(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Hi(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Ml(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);Zn=u,a.target.dispatchEvent(u),Zn=null}else return s=Jo(a),s!==null&&Il(s),n.blockedOn=a,!1;s.shift()}return!0}function Lh(n,s,a){Hi(n)&&a.delete(s)}function ww(){Ol=!1,pr!==null&&Hi(pr)&&(pr=null),mr!==null&&Hi(mr)&&(mr=null),gr!==null&&Hi(gr)&&(gr=null),Io.forEach(Lh),Oo.forEach(Lh)}function Mo(n,s){n.blockedOn===s&&(n.blockedOn=null,Ol||(Ol=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ww)))}function $o(n){function s(f){return Mo(f,n)}if(0<Bi.length){Mo(Bi[0],n);for(var a=1;a<Bi.length;a++){var u=Bi[a];u.blockedOn===n&&(u.blockedOn=null)}}for(pr!==null&&Mo(pr,n),mr!==null&&Mo(mr,n),gr!==null&&Mo(gr,n),Io.forEach(s),Oo.forEach(s),a=0;a<vr.length;a++)u=vr[a],u.blockedOn===n&&(u.blockedOn=null);for(;0<vr.length&&(a=vr[0],a.blockedOn===null);)Rh(a),a.blockedOn===null&&vr.shift()}var js=W.ReactCurrentBatchConfig,Wi=!0;function xw(n,s,a,u){var f=Be,y=js.transition;js.transition=null;try{Be=1,Dl(n,s,a,u)}finally{Be=f,js.transition=y}}function bw(n,s,a,u){var f=Be,y=js.transition;js.transition=null;try{Be=4,Dl(n,s,a,u)}finally{Be=f,js.transition=y}}function Dl(n,s,a,u){if(Wi){var f=Ml(n,s,a,u);if(f===null)ec(n,s,u,qi,a),Nh(n,u);else if(yw(f,n,s,a,u))u.stopPropagation();else if(Nh(n,u),s&4&&-1<vw.indexOf(n)){for(;f!==null;){var y=Jo(f);if(y!==null&&Ph(y),y=Ml(n,s,a,u),y===null&&ec(n,s,u,qi,a),y===f)break;f=y}f!==null&&u.stopPropagation()}else ec(n,s,u,null,a)}}var qi=null;function Ml(n,s,a,u){if(qi=null,n=Gt(u),n=Kr(n),n!==null)if(s=qr(n),s===null)n=null;else if(a=s.tag,a===13){if(n=vh(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return qi=n,null}function Ih(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lw()){case Al:return 1;case _h:return 4;case $i:case cw:return 16;case kh:return 536870912;default:return 16}default:return 16}}var yr=null,$l=null,Ki=null;function Oh(){if(Ki)return Ki;var n,s=$l,a=s.length,u,f="value"in yr?yr.value:yr.textContent,y=f.length;for(n=0;n<a&&s[n]===f[n];n++);var x=a-n;for(u=1;u<=x&&s[a-u]===f[y-u];u++);return Ki=f.slice(n,1<u?1-u:void 0)}function Gi(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Yi(){return!0}function Dh(){return!1}function ln(n){function s(a,u,f,y,x){this._reactName=a,this._targetInst=f,this.type=u,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(y):y[T]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Yi:Dh,this.isPropagationStopped=Dh,this}return K(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),s}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fl=ln(As),Fo=K({},As,{view:0,detail:0}),Sw=ln(Fo),Vl,Ul,Vo,Ji=K({},Fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Vo&&(Vo&&n.type==="mousemove"?(Vl=n.screenX-Vo.screenX,Ul=n.screenY-Vo.screenY):Ul=Vl=0,Vo=n),Vl)},movementY:function(n){return"movementY"in n?n.movementY:Ul}}),Mh=ln(Ji),_w=K({},Ji,{dataTransfer:0}),kw=ln(_w),Ew=K({},Fo,{relatedTarget:0}),zl=ln(Ew),Tw=K({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),Pw=ln(Tw),Cw=K({},As,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),jw=ln(Cw),Aw=K({},As,{data:0}),$h=ln(Aw),Nw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iw(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Lw[n])?!!s[n]:!1}function Bl(){return Iw}var Ow=K({},Fo,{key:function(n){if(n.key){var s=Nw[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Gi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Rw[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bl,charCode:function(n){return n.type==="keypress"?Gi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Gi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Dw=ln(Ow),Mw=K({},Ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fh=ln(Mw),$w=K({},Fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bl}),Fw=ln($w),Vw=K({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uw=ln(Vw),zw=K({},Ji,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Bw=ln(zw),Hw=[9,13,27,32],Hl=d&&"CompositionEvent"in window,Uo=null;d&&"documentMode"in document&&(Uo=document.documentMode);var Ww=d&&"TextEvent"in window&&!Uo,Vh=d&&(!Hl||Uo&&8<Uo&&11>=Uo),Uh=" ",zh=!1;function Bh(n,s){switch(n){case"keyup":return Hw.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ns=!1;function qw(n,s){switch(n){case"compositionend":return Hh(s);case"keypress":return s.which!==32?null:(zh=!0,Uh);case"textInput":return n=s.data,n===Uh&&zh?null:n;default:return null}}function Kw(n,s){if(Ns)return n==="compositionend"||!Hl&&Bh(n,s)?(n=Oh(),Ki=$l=yr=null,Ns=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Vh&&s.locale!=="ko"?null:s.data;default:return null}}var Gw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Gw[n.type]:s==="textarea"}function qh(n,s,a,u){Y(u),s=ta(s,"onChange"),0<s.length&&(a=new Fl("onChange","change",null,a,u),n.push({event:a,listeners:s}))}var zo=null,Bo=null;function Yw(n){df(n,0)}function Xi(n){var s=Ds(n);if(Ie(s))return n}function Jw(n,s){if(n==="change")return s}var Kh=!1;if(d){var Wl;if(d){var ql="oninput"in document;if(!ql){var Gh=document.createElement("div");Gh.setAttribute("oninput","return;"),ql=typeof Gh.oninput=="function"}Wl=ql}else Wl=!1;Kh=Wl&&(!document.documentMode||9<document.documentMode)}function Yh(){zo&&(zo.detachEvent("onpropertychange",Jh),Bo=zo=null)}function Jh(n){if(n.propertyName==="value"&&Xi(Bo)){var s=[];qh(s,Bo,n,Gt(n)),ze(Yw,s)}}function Xw(n,s,a){n==="focusin"?(Yh(),zo=s,Bo=a,zo.attachEvent("onpropertychange",Jh)):n==="focusout"&&Yh()}function Qw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Xi(Bo)}function Zw(n,s){if(n==="click")return Xi(s)}function ex(n,s){if(n==="input"||n==="change")return Xi(s)}function tx(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Cn=typeof Object.is=="function"?Object.is:tx;function Ho(n,s){if(Cn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var f=a[u];if(!h.call(s,f)||!Cn(n[f],s[f]))return!1}return!0}function Xh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Qh(n,s){var a=Xh(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=s&&u>=s)return{node:a,offset:s-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Xh(a)}}function Zh(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Zh(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function ef(){for(var n=window,s=He();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=He(n.document)}return s}function Kl(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function nx(n){var s=ef(),a=n.focusedElem,u=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Zh(a.ownerDocument.documentElement,a)){if(u!==null&&Kl(a)){if(s=u.start,n=u.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,y=Math.min(u.start,f);u=u.end===void 0?y:Math.min(u.end,f),!n.extend&&y>u&&(f=u,u=y,y=f),f=Qh(a,y);var x=Qh(a,u);f&&x&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==x.node||n.focusOffset!==x.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),y>u?(n.addRange(s),n.extend(x.node,x.offset)):(s.setEnd(x.node,x.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var rx=d&&"documentMode"in document&&11>=document.documentMode,Rs=null,Gl=null,Wo=null,Yl=!1;function tf(n,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Yl||Rs==null||Rs!==He(u)||(u=Rs,"selectionStart"in u&&Kl(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Wo&&Ho(Wo,u)||(Wo=u,u=ta(Gl,"onSelect"),0<u.length&&(s=new Fl("onSelect","select",null,s,a),n.push({event:s,listeners:u}),s.target=Rs)))}function Qi(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Ls={animationend:Qi("Animation","AnimationEnd"),animationiteration:Qi("Animation","AnimationIteration"),animationstart:Qi("Animation","AnimationStart"),transitionend:Qi("Transition","TransitionEnd")},Jl={},nf={};d&&(nf=document.createElement("div").style,"AnimationEvent"in window||(delete Ls.animationend.animation,delete Ls.animationiteration.animation,delete Ls.animationstart.animation),"TransitionEvent"in window||delete Ls.transitionend.transition);function Zi(n){if(Jl[n])return Jl[n];if(!Ls[n])return n;var s=Ls[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in nf)return Jl[n]=s[a];return n}var rf=Zi("animationend"),sf=Zi("animationiteration"),of=Zi("animationstart"),af=Zi("transitionend"),lf=new Map,cf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(n,s){lf.set(n,s),c(s,[n])}for(var Xl=0;Xl<cf.length;Xl++){var Ql=cf[Xl],sx=Ql.toLowerCase(),ox=Ql[0].toUpperCase()+Ql.slice(1);wr(sx,"on"+ox)}wr(rf,"onAnimationEnd"),wr(sf,"onAnimationIteration"),wr(of,"onAnimationStart"),wr("dblclick","onDoubleClick"),wr("focusin","onFocus"),wr("focusout","onBlur"),wr(af,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ix=new Set("cancel close invalid load scroll toggle".split(" ").concat(qo));function uf(n,s,a){var u=n.type||"unknown-event";n.currentTarget=a,sw(u,s,void 0,n),n.currentTarget=null}function df(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],f=u.event;u=u.listeners;e:{var y=void 0;if(s)for(var x=u.length-1;0<=x;x--){var T=u[x],j=T.instance,z=T.currentTarget;if(T=T.listener,j!==y&&f.isPropagationStopped())break e;uf(f,T,z),y=j}else for(x=0;x<u.length;x++){if(T=u[x],j=T.instance,z=T.currentTarget,T=T.listener,j!==y&&f.isPropagationStopped())break e;uf(f,T,z),y=j}}}if(No)throw n=jl,No=!1,jl=null,n}function Ke(n,s){var a=s[ic];a===void 0&&(a=s[ic]=new Set);var u=n+"__bubble";a.has(u)||(hf(s,n,2,!1),a.add(u))}function Zl(n,s,a){var u=0;s&&(u|=4),hf(a,n,u,s)}var ea="_reactListening"+Math.random().toString(36).slice(2);function Ko(n){if(!n[ea]){n[ea]=!0,o.forEach(function(a){a!=="selectionchange"&&(ix.has(a)||Zl(a,!1,n),Zl(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[ea]||(s[ea]=!0,Zl("selectionchange",!1,s))}}function hf(n,s,a,u){switch(Ih(s)){case 1:var f=xw;break;case 4:f=bw;break;default:f=Dl}a=f.bind(null,s,a,n),f=void 0,!Ze||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function ec(n,s,a,u,f){var y=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var x=u.tag;if(x===3||x===4){var T=u.stateNode.containerInfo;if(T===f||T.nodeType===8&&T.parentNode===f)break;if(x===4)for(x=u.return;x!==null;){var j=x.tag;if((j===3||j===4)&&(j=x.stateNode.containerInfo,j===f||j.nodeType===8&&j.parentNode===f))return;x=x.return}for(;T!==null;){if(x=Kr(T),x===null)return;if(j=x.tag,j===5||j===6){u=y=x;continue e}T=T.parentNode}}u=u.return}ze(function(){var z=y,Z=Gt(a),te=[];e:{var Q=lf.get(n);if(Q!==void 0){var pe=Fl,ge=n;switch(n){case"keypress":if(Gi(a)===0)break e;case"keydown":case"keyup":pe=Dw;break;case"focusin":ge="focus",pe=zl;break;case"focusout":ge="blur",pe=zl;break;case"beforeblur":case"afterblur":pe=zl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=Mh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=kw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=Fw;break;case rf:case sf:case of:pe=Pw;break;case af:pe=Uw;break;case"scroll":pe=Sw;break;case"wheel":pe=Bw;break;case"copy":case"cut":case"paste":pe=jw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=Fh}var Se=(s&4)!==0,ut=!Se&&n==="scroll",D=Se?Q!==null?Q+"Capture":null:Q;Se=[];for(var L=z,F;L!==null;){F=L;var oe=F.stateNode;if(F.tag===5&&oe!==null&&(F=oe,D!==null&&(oe=Te(L,D),oe!=null&&Se.push(Go(L,oe,F)))),ut)break;L=L.return}0<Se.length&&(Q=new pe(Q,ge,null,a,Z),te.push({event:Q,listeners:Se}))}}if((s&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",pe=n==="mouseout"||n==="pointerout",Q&&a!==Zn&&(ge=a.relatedTarget||a.fromElement)&&(Kr(ge)||ge[er]))break e;if((pe||Q)&&(Q=Z.window===Z?Z:(Q=Z.ownerDocument)?Q.defaultView||Q.parentWindow:window,pe?(ge=a.relatedTarget||a.toElement,pe=z,ge=ge?Kr(ge):null,ge!==null&&(ut=qr(ge),ge!==ut||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(pe=null,ge=z),pe!==ge)){if(Se=Mh,oe="onMouseLeave",D="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(Se=Fh,oe="onPointerLeave",D="onPointerEnter",L="pointer"),ut=pe==null?Q:Ds(pe),F=ge==null?Q:Ds(ge),Q=new Se(oe,L+"leave",pe,a,Z),Q.target=ut,Q.relatedTarget=F,oe=null,Kr(Z)===z&&(Se=new Se(D,L+"enter",ge,a,Z),Se.target=F,Se.relatedTarget=ut,oe=Se),ut=oe,pe&&ge)t:{for(Se=pe,D=ge,L=0,F=Se;F;F=Is(F))L++;for(F=0,oe=D;oe;oe=Is(oe))F++;for(;0<L-F;)Se=Is(Se),L--;for(;0<F-L;)D=Is(D),F--;for(;L--;){if(Se===D||D!==null&&Se===D.alternate)break t;Se=Is(Se),D=Is(D)}Se=null}else Se=null;pe!==null&&ff(te,Q,pe,Se,!1),ge!==null&&ut!==null&&ff(te,ut,ge,Se,!0)}}e:{if(Q=z?Ds(z):window,pe=Q.nodeName&&Q.nodeName.toLowerCase(),pe==="select"||pe==="input"&&Q.type==="file")var ke=Jw;else if(Wh(Q))if(Kh)ke=ex;else{ke=Qw;var Pe=Xw}else(pe=Q.nodeName)&&pe.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(ke=Zw);if(ke&&(ke=ke(n,z))){qh(te,ke,a,Z);break e}Pe&&Pe(n,Q,z),n==="focusout"&&(Pe=Q._wrapperState)&&Pe.controlled&&Q.type==="number"&&yt(Q,"number",Q.value)}switch(Pe=z?Ds(z):window,n){case"focusin":(Wh(Pe)||Pe.contentEditable==="true")&&(Rs=Pe,Gl=z,Wo=null);break;case"focusout":Wo=Gl=Rs=null;break;case"mousedown":Yl=!0;break;case"contextmenu":case"mouseup":case"dragend":Yl=!1,tf(te,a,Z);break;case"selectionchange":if(rx)break;case"keydown":case"keyup":tf(te,a,Z)}var Ce;if(Hl)e:{switch(n){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else Ns?Bh(n,a)&&(Ne="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ne="onCompositionStart");Ne&&(Vh&&a.locale!=="ko"&&(Ns||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&Ns&&(Ce=Oh()):(yr=Z,$l="value"in yr?yr.value:yr.textContent,Ns=!0)),Pe=ta(z,Ne),0<Pe.length&&(Ne=new $h(Ne,n,null,a,Z),te.push({event:Ne,listeners:Pe}),Ce?Ne.data=Ce:(Ce=Hh(a),Ce!==null&&(Ne.data=Ce)))),(Ce=Ww?qw(n,a):Kw(n,a))&&(z=ta(z,"onBeforeInput"),0<z.length&&(Z=new $h("onBeforeInput","beforeinput",null,a,Z),te.push({event:Z,listeners:z}),Z.data=Ce))}df(te,s)})}function Go(n,s,a){return{instance:n,listener:s,currentTarget:a}}function ta(n,s){for(var a=s+"Capture",u=[];n!==null;){var f=n,y=f.stateNode;f.tag===5&&y!==null&&(f=y,y=Te(n,a),y!=null&&u.unshift(Go(n,y,f)),y=Te(n,s),y!=null&&u.push(Go(n,y,f))),n=n.return}return u}function Is(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ff(n,s,a,u,f){for(var y=s._reactName,x=[];a!==null&&a!==u;){var T=a,j=T.alternate,z=T.stateNode;if(j!==null&&j===u)break;T.tag===5&&z!==null&&(T=z,f?(j=Te(a,y),j!=null&&x.unshift(Go(a,j,T))):f||(j=Te(a,y),j!=null&&x.push(Go(a,j,T)))),a=a.return}x.length!==0&&n.push({event:s,listeners:x})}var ax=/\r\n?/g,lx=/\u0000|\uFFFD/g;function pf(n){return(typeof n=="string"?n:""+n).replace(ax,`
`).replace(lx,"")}function na(n,s,a){if(s=pf(s),pf(n)!==s&&a)throw Error(r(425))}function ra(){}var tc=null,nc=null;function rc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var sc=typeof setTimeout=="function"?setTimeout:void 0,cx=typeof clearTimeout=="function"?clearTimeout:void 0,mf=typeof Promise=="function"?Promise:void 0,ux=typeof queueMicrotask=="function"?queueMicrotask:typeof mf<"u"?function(n){return mf.resolve(null).then(n).catch(dx)}:sc;function dx(n){setTimeout(function(){throw n})}function oc(n,s){var a=s,u=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(u===0){n.removeChild(f),$o(s);return}u--}else a!=="$"&&a!=="$?"&&a!=="$!"||u++;a=f}while(a);$o(s)}function xr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function gf(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var Os=Math.random().toString(36).slice(2),Bn="__reactFiber$"+Os,Yo="__reactProps$"+Os,er="__reactContainer$"+Os,ic="__reactEvents$"+Os,hx="__reactListeners$"+Os,fx="__reactHandles$"+Os;function Kr(n){var s=n[Bn];if(s)return s;for(var a=n.parentNode;a;){if(s=a[er]||a[Bn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=gf(n);n!==null;){if(a=n[Bn])return a;n=gf(n)}return s}n=a,a=n.parentNode}return null}function Jo(n){return n=n[Bn]||n[er],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ds(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(r(33))}function sa(n){return n[Yo]||null}var ac=[],Ms=-1;function br(n){return{current:n}}function Ge(n){0>Ms||(n.current=ac[Ms],ac[Ms]=null,Ms--)}function We(n,s){Ms++,ac[Ms]=n.current,n.current=s}var Sr={},Dt=br(Sr),Yt=br(!1),Gr=Sr;function $s(n,s){var a=n.type.contextTypes;if(!a)return Sr;var u=n.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===s)return u.__reactInternalMemoizedMaskedChildContext;var f={},y;for(y in a)f[y]=s[y];return u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function Jt(n){return n=n.childContextTypes,n!=null}function oa(){Ge(Yt),Ge(Dt)}function vf(n,s,a){if(Dt.current!==Sr)throw Error(r(168));We(Dt,s),We(Yt,a)}function yf(n,s,a){var u=n.stateNode;if(s=s.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var f in u)if(!(f in s))throw Error(r(108,le(n)||"Unknown",f));return K({},a,u)}function ia(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Sr,Gr=Dt.current,We(Dt,n),We(Yt,Yt.current),!0}function wf(n,s,a){var u=n.stateNode;if(!u)throw Error(r(169));a?(n=yf(n,s,Gr),u.__reactInternalMemoizedMergedChildContext=n,Ge(Yt),Ge(Dt),We(Dt,n)):Ge(Yt),We(Yt,a)}var tr=null,aa=!1,lc=!1;function xf(n){tr===null?tr=[n]:tr.push(n)}function px(n){aa=!0,xf(n)}function _r(){if(!lc&&tr!==null){lc=!0;var n=0,s=Be;try{var a=tr;for(Be=1;n<a.length;n++){var u=a[n];do u=u(!0);while(u!==null)}tr=null,aa=!1}catch(f){throw tr!==null&&(tr=tr.slice(n+1)),bh(Al,_r),f}finally{Be=s,lc=!1}}return null}var Fs=[],Vs=0,la=null,ca=0,mn=[],gn=0,Yr=null,nr=1,rr="";function Jr(n,s){Fs[Vs++]=ca,Fs[Vs++]=la,la=n,ca=s}function bf(n,s,a){mn[gn++]=nr,mn[gn++]=rr,mn[gn++]=Yr,Yr=n;var u=nr;n=rr;var f=32-Pn(u)-1;u&=~(1<<f),a+=1;var y=32-Pn(s)+f;if(30<y){var x=f-f%5;y=(u&(1<<x)-1).toString(32),u>>=x,f-=x,nr=1<<32-Pn(s)+f|a<<f|u,rr=y+n}else nr=1<<y|a<<f|u,rr=n}function cc(n){n.return!==null&&(Jr(n,1),bf(n,1,0))}function uc(n){for(;n===la;)la=Fs[--Vs],Fs[Vs]=null,ca=Fs[--Vs],Fs[Vs]=null;for(;n===Yr;)Yr=mn[--gn],mn[gn]=null,rr=mn[--gn],mn[gn]=null,nr=mn[--gn],mn[gn]=null}var cn=null,un=null,Ye=!1,jn=null;function Sf(n,s){var a=xn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function _f(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,cn=n,un=xr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,cn=n,un=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Yr!==null?{id:nr,overflow:rr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=xn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,cn=n,un=null,!0):!1;default:return!1}}function dc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function hc(n){if(Ye){var s=un;if(s){var a=s;if(!_f(n,s)){if(dc(n))throw Error(r(418));s=xr(a.nextSibling);var u=cn;s&&_f(n,s)?Sf(u,a):(n.flags=n.flags&-4097|2,Ye=!1,cn=n)}}else{if(dc(n))throw Error(r(418));n.flags=n.flags&-4097|2,Ye=!1,cn=n}}}function kf(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;cn=n}function ua(n){if(n!==cn)return!1;if(!Ye)return kf(n),Ye=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!rc(n.type,n.memoizedProps)),s&&(s=un)){if(dc(n))throw Ef(),Error(r(418));for(;s;)Sf(n,s),s=xr(s.nextSibling)}if(kf(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){un=xr(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}un=null}}else un=cn?xr(n.stateNode.nextSibling):null;return!0}function Ef(){for(var n=un;n;)n=xr(n.nextSibling)}function Us(){un=cn=null,Ye=!1}function fc(n){jn===null?jn=[n]:jn.push(n)}var mx=W.ReactCurrentBatchConfig;function Xo(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(r(309));var u=a.stateNode}if(!u)throw Error(r(147,n));var f=u,y=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(x){var T=f.refs;x===null?delete T[y]:T[y]=x},s._stringRef=y,s)}if(typeof n!="string")throw Error(r(284));if(!a._owner)throw Error(r(290,n))}return n}function da(n,s){throw n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Tf(n){var s=n._init;return s(n._payload)}function Pf(n){function s(D,L){if(n){var F=D.deletions;F===null?(D.deletions=[L],D.flags|=16):F.push(L)}}function a(D,L){if(!n)return null;for(;L!==null;)s(D,L),L=L.sibling;return null}function u(D,L){for(D=new Map;L!==null;)L.key!==null?D.set(L.key,L):D.set(L.index,L),L=L.sibling;return D}function f(D,L){return D=Nr(D,L),D.index=0,D.sibling=null,D}function y(D,L,F){return D.index=F,n?(F=D.alternate,F!==null?(F=F.index,F<L?(D.flags|=2,L):F):(D.flags|=2,L)):(D.flags|=1048576,L)}function x(D){return n&&D.alternate===null&&(D.flags|=2),D}function T(D,L,F,oe){return L===null||L.tag!==6?(L=su(F,D.mode,oe),L.return=D,L):(L=f(L,F),L.return=D,L)}function j(D,L,F,oe){var ke=F.type;return ke===H?Z(D,L,F.props.children,oe,F.key):L!==null&&(L.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===ue&&Tf(ke)===L.type)?(oe=f(L,F.props),oe.ref=Xo(D,L,F),oe.return=D,oe):(oe=Oa(F.type,F.key,F.props,null,D.mode,oe),oe.ref=Xo(D,L,F),oe.return=D,oe)}function z(D,L,F,oe){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=ou(F,D.mode,oe),L.return=D,L):(L=f(L,F.children||[]),L.return=D,L)}function Z(D,L,F,oe,ke){return L===null||L.tag!==7?(L=ss(F,D.mode,oe,ke),L.return=D,L):(L=f(L,F),L.return=D,L)}function te(D,L,F){if(typeof L=="string"&&L!==""||typeof L=="number")return L=su(""+L,D.mode,F),L.return=D,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case V:return F=Oa(L.type,L.key,L.props,null,D.mode,F),F.ref=Xo(D,null,L),F.return=D,F;case O:return L=ou(L,D.mode,F),L.return=D,L;case ue:var oe=L._init;return te(D,oe(L._payload),F)}if(Kt(L)||re(L))return L=ss(L,D.mode,F,null),L.return=D,L;da(D,L)}return null}function Q(D,L,F,oe){var ke=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return ke!==null?null:T(D,L,""+F,oe);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case V:return F.key===ke?j(D,L,F,oe):null;case O:return F.key===ke?z(D,L,F,oe):null;case ue:return ke=F._init,Q(D,L,ke(F._payload),oe)}if(Kt(F)||re(F))return ke!==null?null:Z(D,L,F,oe,null);da(D,F)}return null}function pe(D,L,F,oe,ke){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return D=D.get(F)||null,T(L,D,""+oe,ke);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case V:return D=D.get(oe.key===null?F:oe.key)||null,j(L,D,oe,ke);case O:return D=D.get(oe.key===null?F:oe.key)||null,z(L,D,oe,ke);case ue:var Pe=oe._init;return pe(D,L,F,Pe(oe._payload),ke)}if(Kt(oe)||re(oe))return D=D.get(F)||null,Z(L,D,oe,ke,null);da(L,oe)}return null}function ge(D,L,F,oe){for(var ke=null,Pe=null,Ce=L,Ne=L=0,Pt=null;Ce!==null&&Ne<F.length;Ne++){Ce.index>Ne?(Pt=Ce,Ce=null):Pt=Ce.sibling;var Ue=Q(D,Ce,F[Ne],oe);if(Ue===null){Ce===null&&(Ce=Pt);break}n&&Ce&&Ue.alternate===null&&s(D,Ce),L=y(Ue,L,Ne),Pe===null?ke=Ue:Pe.sibling=Ue,Pe=Ue,Ce=Pt}if(Ne===F.length)return a(D,Ce),Ye&&Jr(D,Ne),ke;if(Ce===null){for(;Ne<F.length;Ne++)Ce=te(D,F[Ne],oe),Ce!==null&&(L=y(Ce,L,Ne),Pe===null?ke=Ce:Pe.sibling=Ce,Pe=Ce);return Ye&&Jr(D,Ne),ke}for(Ce=u(D,Ce);Ne<F.length;Ne++)Pt=pe(Ce,D,Ne,F[Ne],oe),Pt!==null&&(n&&Pt.alternate!==null&&Ce.delete(Pt.key===null?Ne:Pt.key),L=y(Pt,L,Ne),Pe===null?ke=Pt:Pe.sibling=Pt,Pe=Pt);return n&&Ce.forEach(function(Rr){return s(D,Rr)}),Ye&&Jr(D,Ne),ke}function Se(D,L,F,oe){var ke=re(F);if(typeof ke!="function")throw Error(r(150));if(F=ke.call(F),F==null)throw Error(r(151));for(var Pe=ke=null,Ce=L,Ne=L=0,Pt=null,Ue=F.next();Ce!==null&&!Ue.done;Ne++,Ue=F.next()){Ce.index>Ne?(Pt=Ce,Ce=null):Pt=Ce.sibling;var Rr=Q(D,Ce,Ue.value,oe);if(Rr===null){Ce===null&&(Ce=Pt);break}n&&Ce&&Rr.alternate===null&&s(D,Ce),L=y(Rr,L,Ne),Pe===null?ke=Rr:Pe.sibling=Rr,Pe=Rr,Ce=Pt}if(Ue.done)return a(D,Ce),Ye&&Jr(D,Ne),ke;if(Ce===null){for(;!Ue.done;Ne++,Ue=F.next())Ue=te(D,Ue.value,oe),Ue!==null&&(L=y(Ue,L,Ne),Pe===null?ke=Ue:Pe.sibling=Ue,Pe=Ue);return Ye&&Jr(D,Ne),ke}for(Ce=u(D,Ce);!Ue.done;Ne++,Ue=F.next())Ue=pe(Ce,D,Ne,Ue.value,oe),Ue!==null&&(n&&Ue.alternate!==null&&Ce.delete(Ue.key===null?Ne:Ue.key),L=y(Ue,L,Ne),Pe===null?ke=Ue:Pe.sibling=Ue,Pe=Ue);return n&&Ce.forEach(function(Gx){return s(D,Gx)}),Ye&&Jr(D,Ne),ke}function ut(D,L,F,oe){if(typeof F=="object"&&F!==null&&F.type===H&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case V:e:{for(var ke=F.key,Pe=L;Pe!==null;){if(Pe.key===ke){if(ke=F.type,ke===H){if(Pe.tag===7){a(D,Pe.sibling),L=f(Pe,F.props.children),L.return=D,D=L;break e}}else if(Pe.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===ue&&Tf(ke)===Pe.type){a(D,Pe.sibling),L=f(Pe,F.props),L.ref=Xo(D,Pe,F),L.return=D,D=L;break e}a(D,Pe);break}else s(D,Pe);Pe=Pe.sibling}F.type===H?(L=ss(F.props.children,D.mode,oe,F.key),L.return=D,D=L):(oe=Oa(F.type,F.key,F.props,null,D.mode,oe),oe.ref=Xo(D,L,F),oe.return=D,D=oe)}return x(D);case O:e:{for(Pe=F.key;L!==null;){if(L.key===Pe)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){a(D,L.sibling),L=f(L,F.children||[]),L.return=D,D=L;break e}else{a(D,L);break}else s(D,L);L=L.sibling}L=ou(F,D.mode,oe),L.return=D,D=L}return x(D);case ue:return Pe=F._init,ut(D,L,Pe(F._payload),oe)}if(Kt(F))return ge(D,L,F,oe);if(re(F))return Se(D,L,F,oe);da(D,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,L!==null&&L.tag===6?(a(D,L.sibling),L=f(L,F),L.return=D,D=L):(a(D,L),L=su(F,D.mode,oe),L.return=D,D=L),x(D)):a(D,L)}return ut}var zs=Pf(!0),Cf=Pf(!1),ha=br(null),fa=null,Bs=null,pc=null;function mc(){pc=Bs=fa=null}function gc(n){var s=ha.current;Ge(ha),n._currentValue=s}function vc(n,s,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===a)break;n=n.return}}function Hs(n,s){fa=n,pc=Bs=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Xt=!0),n.firstContext=null)}function vn(n){var s=n._currentValue;if(pc!==n)if(n={context:n,memoizedValue:s,next:null},Bs===null){if(fa===null)throw Error(r(308));Bs=n,fa.dependencies={lanes:0,firstContext:n}}else Bs=Bs.next=n;return s}var Xr=null;function yc(n){Xr===null?Xr=[n]:Xr.push(n)}function jf(n,s,a,u){var f=s.interleaved;return f===null?(a.next=a,yc(s)):(a.next=f.next,f.next=a),s.interleaved=a,sr(n,u)}function sr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var kr=!1;function wc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Af(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function or(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Er(n,s,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ve&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,sr(n,a)}return f=u.interleaved,f===null?(s.next=s,yc(u)):(s.next=f.next,f.next=s),u.interleaved=s,sr(n,a)}function pa(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,Ll(n,a)}}function Nf(n,s){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var f=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};y===null?f=y=x:y=y.next=x,a=a.next}while(a!==null);y===null?f=y=s:y=y.next=s}else f=y=s;a={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:u.shared,effects:u.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function ma(n,s,a,u){var f=n.updateQueue;kr=!1;var y=f.firstBaseUpdate,x=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var j=T,z=j.next;j.next=null,x===null?y=z:x.next=z,x=j;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,T=Z.lastBaseUpdate,T!==x&&(T===null?Z.firstBaseUpdate=z:T.next=z,Z.lastBaseUpdate=j))}if(y!==null){var te=f.baseState;x=0,Z=z=j=null,T=y;do{var Q=T.lane,pe=T.eventTime;if((u&Q)===Q){Z!==null&&(Z=Z.next={eventTime:pe,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var ge=n,Se=T;switch(Q=s,pe=a,Se.tag){case 1:if(ge=Se.payload,typeof ge=="function"){te=ge.call(pe,te,Q);break e}te=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Se.payload,Q=typeof ge=="function"?ge.call(pe,te,Q):ge,Q==null)break e;te=K({},te,Q);break e;case 2:kr=!0}}T.callback!==null&&T.lane!==0&&(n.flags|=64,Q=f.effects,Q===null?f.effects=[T]:Q.push(T))}else pe={eventTime:pe,lane:Q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Z===null?(z=Z=pe,j=te):Z=Z.next=pe,x|=Q;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;Q=T,T=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);if(Z===null&&(j=te),f.baseState=j,f.firstBaseUpdate=z,f.lastBaseUpdate=Z,s=f.shared.interleaved,s!==null){f=s;do x|=f.lane,f=f.next;while(f!==s)}else y===null&&(f.shared.lanes=0);es|=x,n.lanes=x,n.memoizedState=te}}function Rf(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var u=n[s],f=u.callback;if(f!==null){if(u.callback=null,u=a,typeof f!="function")throw Error(r(191,f));f.call(u)}}}var Qo={},Hn=br(Qo),Zo=br(Qo),ei=br(Qo);function Qr(n){if(n===Qo)throw Error(r(174));return n}function xc(n,s){switch(We(ei,s),We(Zo,n),We(Hn,Qo),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:at(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=at(s,n)}Ge(Hn),We(Hn,s)}function Ws(){Ge(Hn),Ge(Zo),Ge(ei)}function Lf(n){Qr(ei.current);var s=Qr(Hn.current),a=at(s,n.type);s!==a&&(We(Zo,n),We(Hn,a))}function bc(n){Zo.current===n&&(Ge(Hn),Ge(Zo))}var et=br(0);function ga(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Sc=[];function _c(){for(var n=0;n<Sc.length;n++)Sc[n]._workInProgressVersionPrimary=null;Sc.length=0}var va=W.ReactCurrentDispatcher,kc=W.ReactCurrentBatchConfig,Zr=0,tt=null,xt=null,Et=null,ya=!1,ti=!1,ni=0,gx=0;function Mt(){throw Error(r(321))}function Ec(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Cn(n[a],s[a]))return!1;return!0}function Tc(n,s,a,u,f,y){if(Zr=y,tt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,va.current=n===null||n.memoizedState===null?xx:bx,n=a(u,f),ti){y=0;do{if(ti=!1,ni=0,25<=y)throw Error(r(301));y+=1,Et=xt=null,s.updateQueue=null,va.current=Sx,n=a(u,f)}while(ti)}if(va.current=ba,s=xt!==null&&xt.next!==null,Zr=0,Et=xt=tt=null,ya=!1,s)throw Error(r(300));return n}function Pc(){var n=ni!==0;return ni=0,n}function Wn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?tt.memoizedState=Et=n:Et=Et.next=n,Et}function yn(){if(xt===null){var n=tt.alternate;n=n!==null?n.memoizedState:null}else n=xt.next;var s=Et===null?tt.memoizedState:Et.next;if(s!==null)Et=s,xt=n;else{if(n===null)throw Error(r(310));xt=n,n={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Et===null?tt.memoizedState=Et=n:Et=Et.next=n}return Et}function ri(n,s){return typeof s=="function"?s(n):s}function Cc(n){var s=yn(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var u=xt,f=u.baseQueue,y=a.pending;if(y!==null){if(f!==null){var x=f.next;f.next=y.next,y.next=x}u.baseQueue=f=y,a.pending=null}if(f!==null){y=f.next,u=u.baseState;var T=x=null,j=null,z=y;do{var Z=z.lane;if((Zr&Z)===Z)j!==null&&(j=j.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),u=z.hasEagerState?z.eagerState:n(u,z.action);else{var te={lane:Z,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};j===null?(T=j=te,x=u):j=j.next=te,tt.lanes|=Z,es|=Z}z=z.next}while(z!==null&&z!==y);j===null?x=u:j.next=T,Cn(u,s.memoizedState)||(Xt=!0),s.memoizedState=u,s.baseState=x,s.baseQueue=j,a.lastRenderedState=u}if(n=a.interleaved,n!==null){f=n;do y=f.lane,tt.lanes|=y,es|=y,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function jc(n){var s=yn(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var u=a.dispatch,f=a.pending,y=s.memoizedState;if(f!==null){a.pending=null;var x=f=f.next;do y=n(y,x.action),x=x.next;while(x!==f);Cn(y,s.memoizedState)||(Xt=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),a.lastRenderedState=y}return[y,u]}function If(){}function Of(n,s){var a=tt,u=yn(),f=s(),y=!Cn(u.memoizedState,f);if(y&&(u.memoizedState=f,Xt=!0),u=u.queue,Ac($f.bind(null,a,u,n),[n]),u.getSnapshot!==s||y||Et!==null&&Et.memoizedState.tag&1){if(a.flags|=2048,si(9,Mf.bind(null,a,u,f,s),void 0,null),Tt===null)throw Error(r(349));(Zr&30)!==0||Df(a,s,f)}return f}function Df(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=tt.updateQueue,s===null?(s={lastEffect:null,stores:null},tt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Mf(n,s,a,u){s.value=a,s.getSnapshot=u,Ff(s)&&Vf(n)}function $f(n,s,a){return a(function(){Ff(s)&&Vf(n)})}function Ff(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Cn(n,a)}catch{return!0}}function Vf(n){var s=sr(n,1);s!==null&&Ln(s,n,1,-1)}function Uf(n){var s=Wn();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:n},s.queue=n,n=n.dispatch=wx.bind(null,tt,n),[s.memoizedState,n]}function si(n,s,a,u){return n={tag:n,create:s,destroy:a,deps:u,next:null},s=tt.updateQueue,s===null?(s={lastEffect:null,stores:null},tt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,s.lastEffect=n)),n}function zf(){return yn().memoizedState}function wa(n,s,a,u){var f=Wn();tt.flags|=n,f.memoizedState=si(1|s,a,void 0,u===void 0?null:u)}function xa(n,s,a,u){var f=yn();u=u===void 0?null:u;var y=void 0;if(xt!==null){var x=xt.memoizedState;if(y=x.destroy,u!==null&&Ec(u,x.deps)){f.memoizedState=si(s,a,y,u);return}}tt.flags|=n,f.memoizedState=si(1|s,a,y,u)}function Bf(n,s){return wa(8390656,8,n,s)}function Ac(n,s){return xa(2048,8,n,s)}function Hf(n,s){return xa(4,2,n,s)}function Wf(n,s){return xa(4,4,n,s)}function qf(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Kf(n,s,a){return a=a!=null?a.concat([n]):null,xa(4,4,qf.bind(null,s,n),a)}function Nc(){}function Gf(n,s){var a=yn();s=s===void 0?null:s;var u=a.memoizedState;return u!==null&&s!==null&&Ec(s,u[1])?u[0]:(a.memoizedState=[n,s],n)}function Yf(n,s){var a=yn();s=s===void 0?null:s;var u=a.memoizedState;return u!==null&&s!==null&&Ec(s,u[1])?u[0]:(n=n(),a.memoizedState=[n,s],n)}function Jf(n,s,a){return(Zr&21)===0?(n.baseState&&(n.baseState=!1,Xt=!0),n.memoizedState=a):(Cn(a,s)||(a=Eh(),tt.lanes|=a,es|=a,n.baseState=!0),s)}function vx(n,s){var a=Be;Be=a!==0&&4>a?a:4,n(!0);var u=kc.transition;kc.transition={};try{n(!1),s()}finally{Be=a,kc.transition=u}}function Xf(){return yn().memoizedState}function yx(n,s,a){var u=jr(n);if(a={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null},Qf(n))Zf(s,a);else if(a=jf(n,s,a,u),a!==null){var f=Bt();Ln(a,n,u,f),ep(a,s,u)}}function wx(n,s,a){var u=jr(n),f={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null};if(Qf(n))Zf(s,f);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var x=s.lastRenderedState,T=y(x,a);if(f.hasEagerState=!0,f.eagerState=T,Cn(T,x)){var j=s.interleaved;j===null?(f.next=f,yc(s)):(f.next=j.next,j.next=f),s.interleaved=f;return}}catch{}finally{}a=jf(n,s,f,u),a!==null&&(f=Bt(),Ln(a,n,u,f),ep(a,s,u))}}function Qf(n){var s=n.alternate;return n===tt||s!==null&&s===tt}function Zf(n,s){ti=ya=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function ep(n,s,a){if((a&4194240)!==0){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,Ll(n,a)}}var ba={readContext:vn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},xx={readContext:vn,useCallback:function(n,s){return Wn().memoizedState=[n,s===void 0?null:s],n},useContext:vn,useEffect:Bf,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,wa(4194308,4,qf.bind(null,s,n),a)},useLayoutEffect:function(n,s){return wa(4194308,4,n,s)},useInsertionEffect:function(n,s){return wa(4,2,n,s)},useMemo:function(n,s){var a=Wn();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var u=Wn();return s=a!==void 0?a(s):s,u.memoizedState=u.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},u.queue=n,n=n.dispatch=yx.bind(null,tt,n),[u.memoizedState,n]},useRef:function(n){var s=Wn();return n={current:n},s.memoizedState=n},useState:Uf,useDebugValue:Nc,useDeferredValue:function(n){return Wn().memoizedState=n},useTransition:function(){var n=Uf(!1),s=n[0];return n=vx.bind(null,n[1]),Wn().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var u=tt,f=Wn();if(Ye){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),Tt===null)throw Error(r(349));(Zr&30)!==0||Df(u,s,a)}f.memoizedState=a;var y={value:a,getSnapshot:s};return f.queue=y,Bf($f.bind(null,u,y,n),[n]),u.flags|=2048,si(9,Mf.bind(null,u,y,a,s),void 0,null),a},useId:function(){var n=Wn(),s=Tt.identifierPrefix;if(Ye){var a=rr,u=nr;a=(u&~(1<<32-Pn(u)-1)).toString(32)+a,s=":"+s+"R"+a,a=ni++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=gx++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},bx={readContext:vn,useCallback:Gf,useContext:vn,useEffect:Ac,useImperativeHandle:Kf,useInsertionEffect:Hf,useLayoutEffect:Wf,useMemo:Yf,useReducer:Cc,useRef:zf,useState:function(){return Cc(ri)},useDebugValue:Nc,useDeferredValue:function(n){var s=yn();return Jf(s,xt.memoizedState,n)},useTransition:function(){var n=Cc(ri)[0],s=yn().memoizedState;return[n,s]},useMutableSource:If,useSyncExternalStore:Of,useId:Xf,unstable_isNewReconciler:!1},Sx={readContext:vn,useCallback:Gf,useContext:vn,useEffect:Ac,useImperativeHandle:Kf,useInsertionEffect:Hf,useLayoutEffect:Wf,useMemo:Yf,useReducer:jc,useRef:zf,useState:function(){return jc(ri)},useDebugValue:Nc,useDeferredValue:function(n){var s=yn();return xt===null?s.memoizedState=n:Jf(s,xt.memoizedState,n)},useTransition:function(){var n=jc(ri)[0],s=yn().memoizedState;return[n,s]},useMutableSource:If,useSyncExternalStore:Of,useId:Xf,unstable_isNewReconciler:!1};function An(n,s){if(n&&n.defaultProps){s=K({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Rc(n,s,a,u){s=n.memoizedState,a=a(u,s),a=a==null?s:K({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Sa={isMounted:function(n){return(n=n._reactInternals)?qr(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var u=Bt(),f=jr(n),y=or(u,f);y.payload=s,a!=null&&(y.callback=a),s=Er(n,y,f),s!==null&&(Ln(s,n,f,u),pa(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var u=Bt(),f=jr(n),y=or(u,f);y.tag=1,y.payload=s,a!=null&&(y.callback=a),s=Er(n,y,f),s!==null&&(Ln(s,n,f,u),pa(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Bt(),u=jr(n),f=or(a,u);f.tag=2,s!=null&&(f.callback=s),s=Er(n,f,u),s!==null&&(Ln(s,n,u,a),pa(s,n,u))}};function tp(n,s,a,u,f,y,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,y,x):s.prototype&&s.prototype.isPureReactComponent?!Ho(a,u)||!Ho(f,y):!0}function np(n,s,a){var u=!1,f=Sr,y=s.contextType;return typeof y=="object"&&y!==null?y=vn(y):(f=Jt(s)?Gr:Dt.current,u=s.contextTypes,y=(u=u!=null)?$s(n,f):Sr),s=new s(a,y),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Sa,n.stateNode=s,s._reactInternals=n,u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=y),s}function rp(n,s,a,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==n&&Sa.enqueueReplaceState(s,s.state,null)}function Lc(n,s,a,u){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},wc(n);var y=s.contextType;typeof y=="object"&&y!==null?f.context=vn(y):(y=Jt(s)?Gr:Dt.current,f.context=$s(n,y)),f.state=n.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Rc(n,s,y,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Sa.enqueueReplaceState(f,f.state,null),ma(n,a,f,u),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function qs(n,s){try{var a="",u=s;do a+=X(u),u=u.return;while(u);var f=a}catch(y){f=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:s,stack:f,digest:null}}function Ic(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Oc(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var _x=typeof WeakMap=="function"?WeakMap:Map;function sp(n,s,a){a=or(-1,a),a.tag=3,a.payload={element:null};var u=s.value;return a.callback=function(){ja||(ja=!0,Jc=u),Oc(n,s)},a}function op(n,s,a){a=or(-1,a),a.tag=3;var u=n.type.getDerivedStateFromError;if(typeof u=="function"){var f=s.value;a.payload=function(){return u(f)},a.callback=function(){Oc(n,s)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(a.callback=function(){Oc(n,s),typeof u!="function"&&(Pr===null?Pr=new Set([this]):Pr.add(this));var x=s.stack;this.componentDidCatch(s.value,{componentStack:x!==null?x:""})}),a}function ip(n,s,a){var u=n.pingCache;if(u===null){u=n.pingCache=new _x;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(a)||(f.add(a),n=Mx.bind(null,n,s,a),s.then(n,n))}function ap(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function lp(n,s,a,u,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=or(-1,1),s.tag=2,Er(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var kx=W.ReactCurrentOwner,Xt=!1;function zt(n,s,a,u){s.child=n===null?Cf(s,null,a,u):zs(s,n.child,a,u)}function cp(n,s,a,u,f){a=a.render;var y=s.ref;return Hs(s,f),u=Tc(n,s,a,u,y,f),a=Pc(),n!==null&&!Xt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,ir(n,s,f)):(Ye&&a&&cc(s),s.flags|=1,zt(n,s,u,f),s.child)}function up(n,s,a,u,f){if(n===null){var y=a.type;return typeof y=="function"&&!ru(y)&&y.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=y,dp(n,s,y,u,f)):(n=Oa(a.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,(n.lanes&f)===0){var x=y.memoizedProps;if(a=a.compare,a=a!==null?a:Ho,a(x,u)&&n.ref===s.ref)return ir(n,s,f)}return s.flags|=1,n=Nr(y,u),n.ref=s.ref,n.return=s,s.child=n}function dp(n,s,a,u,f){if(n!==null){var y=n.memoizedProps;if(Ho(y,u)&&n.ref===s.ref)if(Xt=!1,s.pendingProps=u=y,(n.lanes&f)!==0)(n.flags&131072)!==0&&(Xt=!0);else return s.lanes=n.lanes,ir(n,s,f)}return Dc(n,s,a,u,f)}function hp(n,s,a){var u=s.pendingProps,f=u.children,y=n!==null?n.memoizedState:null;if(u.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Gs,dn),dn|=a;else{if((a&1073741824)===0)return n=y!==null?y.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,We(Gs,dn),dn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=y!==null?y.baseLanes:a,We(Gs,dn),dn|=u}else y!==null?(u=y.baseLanes|a,s.memoizedState=null):u=a,We(Gs,dn),dn|=u;return zt(n,s,f,a),s.child}function fp(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Dc(n,s,a,u,f){var y=Jt(a)?Gr:Dt.current;return y=$s(s,y),Hs(s,f),a=Tc(n,s,a,u,y,f),u=Pc(),n!==null&&!Xt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,ir(n,s,f)):(Ye&&u&&cc(s),s.flags|=1,zt(n,s,a,f),s.child)}function pp(n,s,a,u,f){if(Jt(a)){var y=!0;ia(s)}else y=!1;if(Hs(s,f),s.stateNode===null)ka(n,s),np(s,a,u),Lc(s,a,u,f),u=!0;else if(n===null){var x=s.stateNode,T=s.memoizedProps;x.props=T;var j=x.context,z=a.contextType;typeof z=="object"&&z!==null?z=vn(z):(z=Jt(a)?Gr:Dt.current,z=$s(s,z));var Z=a.getDerivedStateFromProps,te=typeof Z=="function"||typeof x.getSnapshotBeforeUpdate=="function";te||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(T!==u||j!==z)&&rp(s,x,u,z),kr=!1;var Q=s.memoizedState;x.state=Q,ma(s,u,x,f),j=s.memoizedState,T!==u||Q!==j||Yt.current||kr?(typeof Z=="function"&&(Rc(s,a,Z,u),j=s.memoizedState),(T=kr||tp(s,a,T,u,Q,j,z))?(te||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=j),x.props=u,x.state=j,x.context=z,u=T):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{x=s.stateNode,Af(n,s),T=s.memoizedProps,z=s.type===s.elementType?T:An(s.type,T),x.props=z,te=s.pendingProps,Q=x.context,j=a.contextType,typeof j=="object"&&j!==null?j=vn(j):(j=Jt(a)?Gr:Dt.current,j=$s(s,j));var pe=a.getDerivedStateFromProps;(Z=typeof pe=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(T!==te||Q!==j)&&rp(s,x,u,j),kr=!1,Q=s.memoizedState,x.state=Q,ma(s,u,x,f);var ge=s.memoizedState;T!==te||Q!==ge||Yt.current||kr?(typeof pe=="function"&&(Rc(s,a,pe,u),ge=s.memoizedState),(z=kr||tp(s,a,z,u,Q,ge,j)||!1)?(Z||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(u,ge,j),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(u,ge,j)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||T===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=ge),x.props=u,x.state=ge,x.context=j,u=z):(typeof x.componentDidUpdate!="function"||T===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),u=!1)}return Mc(n,s,a,u,y,f)}function Mc(n,s,a,u,f,y){fp(n,s);var x=(s.flags&128)!==0;if(!u&&!x)return f&&wf(s,a,!1),ir(n,s,y);u=s.stateNode,kx.current=s;var T=x&&typeof a.getDerivedStateFromError!="function"?null:u.render();return s.flags|=1,n!==null&&x?(s.child=zs(s,n.child,null,y),s.child=zs(s,null,T,y)):zt(n,s,T,y),s.memoizedState=u.state,f&&wf(s,a,!0),s.child}function mp(n){var s=n.stateNode;s.pendingContext?vf(n,s.pendingContext,s.pendingContext!==s.context):s.context&&vf(n,s.context,!1),xc(n,s.containerInfo)}function gp(n,s,a,u,f){return Us(),fc(f),s.flags|=256,zt(n,s,a,u),s.child}var $c={dehydrated:null,treeContext:null,retryLane:0};function Fc(n){return{baseLanes:n,cachePool:null,transitions:null}}function vp(n,s,a){var u=s.pendingProps,f=et.current,y=!1,x=(s.flags&128)!==0,T;if((T=x)||(T=n!==null&&n.memoizedState===null?!1:(f&2)!==0),T?(y=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),We(et,f&1),n===null)return hc(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(x=u.children,n=u.fallback,y?(u=s.mode,y=s.child,x={mode:"hidden",children:x},(u&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=x):y=Da(x,u,0,null),n=ss(n,u,a,null),y.return=s,n.return=s,y.sibling=n,s.child=y,s.child.memoizedState=Fc(a),s.memoizedState=$c,n):Vc(s,x));if(f=n.memoizedState,f!==null&&(T=f.dehydrated,T!==null))return Ex(n,s,x,u,T,f,a);if(y){y=u.fallback,x=s.mode,f=n.child,T=f.sibling;var j={mode:"hidden",children:u.children};return(x&1)===0&&s.child!==f?(u=s.child,u.childLanes=0,u.pendingProps=j,s.deletions=null):(u=Nr(f,j),u.subtreeFlags=f.subtreeFlags&14680064),T!==null?y=Nr(T,y):(y=ss(y,x,a,null),y.flags|=2),y.return=s,u.return=s,u.sibling=y,s.child=u,u=y,y=s.child,x=n.child.memoizedState,x=x===null?Fc(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},y.memoizedState=x,y.childLanes=n.childLanes&~a,s.memoizedState=$c,u}return y=n.child,n=y.sibling,u=Nr(y,{mode:"visible",children:u.children}),(s.mode&1)===0&&(u.lanes=a),u.return=s,u.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=u,s.memoizedState=null,u}function Vc(n,s){return s=Da({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function _a(n,s,a,u){return u!==null&&fc(u),zs(s,n.child,null,a),n=Vc(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Ex(n,s,a,u,f,y,x){if(a)return s.flags&256?(s.flags&=-257,u=Ic(Error(r(422))),_a(n,s,x,u)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(y=u.fallback,f=s.mode,u=Da({mode:"visible",children:u.children},f,0,null),y=ss(y,f,x,null),y.flags|=2,u.return=s,y.return=s,u.sibling=y,s.child=u,(s.mode&1)!==0&&zs(s,n.child,null,x),s.child.memoizedState=Fc(x),s.memoizedState=$c,y);if((s.mode&1)===0)return _a(n,s,x,null);if(f.data==="$!"){if(u=f.nextSibling&&f.nextSibling.dataset,u)var T=u.dgst;return u=T,y=Error(r(419)),u=Ic(y,u,void 0),_a(n,s,x,u)}if(T=(x&n.childLanes)!==0,Xt||T){if(u=Tt,u!==null){switch(x&-x){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(u.suspendedLanes|x))!==0?0:f,f!==0&&f!==y.retryLane&&(y.retryLane=f,sr(n,f),Ln(u,n,f,-1))}return nu(),u=Ic(Error(r(421))),_a(n,s,x,u)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=$x.bind(null,n),f._reactRetry=s,null):(n=y.treeContext,un=xr(f.nextSibling),cn=s,Ye=!0,jn=null,n!==null&&(mn[gn++]=nr,mn[gn++]=rr,mn[gn++]=Yr,nr=n.id,rr=n.overflow,Yr=s),s=Vc(s,u.children),s.flags|=4096,s)}function yp(n,s,a){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),vc(n.return,s,a)}function Uc(n,s,a,u,f){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:f}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=u,y.tail=a,y.tailMode=f)}function wp(n,s,a){var u=s.pendingProps,f=u.revealOrder,y=u.tail;if(zt(n,s,u.children,a),u=et.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&yp(n,a,s);else if(n.tag===19)yp(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}if(We(et,u),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&ga(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Uc(s,!1,f,a,y);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&ga(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Uc(s,!0,a,null,y);break;case"together":Uc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ka(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function ir(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),es|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,a=Nr(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Nr(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Tx(n,s,a){switch(s.tag){case 3:mp(s),Us();break;case 5:Lf(s);break;case 1:Jt(s.type)&&ia(s);break;case 4:xc(s,s.stateNode.containerInfo);break;case 10:var u=s.type._context,f=s.memoizedProps.value;We(ha,u._currentValue),u._currentValue=f;break;case 13:if(u=s.memoizedState,u!==null)return u.dehydrated!==null?(We(et,et.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?vp(n,s,a):(We(et,et.current&1),n=ir(n,s,a),n!==null?n.sibling:null);We(et,et.current&1);break;case 19:if(u=(a&s.childLanes)!==0,(n.flags&128)!==0){if(u)return wp(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),We(et,et.current),u)break;return null;case 22:case 23:return s.lanes=0,hp(n,s,a)}return ir(n,s,a)}var xp,zc,bp,Sp;xp=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},zc=function(){},bp=function(n,s,a,u){var f=n.memoizedProps;if(f!==u){n=s.stateNode,Qr(Hn.current);var y=null;switch(a){case"input":f=Xe(n,f),u=Xe(n,u),y=[];break;case"select":f=K({},f,{value:void 0}),u=K({},u,{value:void 0}),y=[];break;case"textarea":f=Qe(n,f),u=Qe(n,u),y=[];break;default:typeof f.onClick!="function"&&typeof u.onClick=="function"&&(n.onclick=ra)}fr(a,u);var x;a=null;for(z in f)if(!u.hasOwnProperty(z)&&f.hasOwnProperty(z)&&f[z]!=null)if(z==="style"){var T=f[z];for(x in T)T.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(i.hasOwnProperty(z)?y||(y=[]):(y=y||[]).push(z,null));for(z in u){var j=u[z];if(T=f?.[z],u.hasOwnProperty(z)&&j!==T&&(j!=null||T!=null))if(z==="style")if(T){for(x in T)!T.hasOwnProperty(x)||j&&j.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in j)j.hasOwnProperty(x)&&T[x]!==j[x]&&(a||(a={}),a[x]=j[x])}else a||(y||(y=[]),y.push(z,a)),a=j;else z==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,T=T?T.__html:void 0,j!=null&&T!==j&&(y=y||[]).push(z,j)):z==="children"?typeof j!="string"&&typeof j!="number"||(y=y||[]).push(z,""+j):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(i.hasOwnProperty(z)?(j!=null&&z==="onScroll"&&Ke("scroll",n),y||T===j||(y=[])):(y=y||[]).push(z,j))}a&&(y=y||[]).push("style",a);var z=y;(s.updateQueue=z)&&(s.flags|=4)}},Sp=function(n,s,a,u){a!==u&&(s.flags|=4)};function oi(n,s){if(!Ye)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function $t(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags&14680064,u|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=a,s}function Px(n,s,a){var u=s.pendingProps;switch(uc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(s),null;case 1:return Jt(s.type)&&oa(),$t(s),null;case 3:return u=s.stateNode,Ws(),Ge(Yt),Ge(Dt),_c(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(ua(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,jn!==null&&(Zc(jn),jn=null))),zc(n,s),$t(s),null;case 5:bc(s);var f=Qr(ei.current);if(a=s.type,n!==null&&s.stateNode!=null)bp(n,s,a,u,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!u){if(s.stateNode===null)throw Error(r(166));return $t(s),null}if(n=Qr(Hn.current),ua(s)){u=s.stateNode,a=s.type;var y=s.memoizedProps;switch(u[Bn]=s,u[Yo]=y,n=(s.mode&1)!==0,a){case"dialog":Ke("cancel",u),Ke("close",u);break;case"iframe":case"object":case"embed":Ke("load",u);break;case"video":case"audio":for(f=0;f<qo.length;f++)Ke(qo[f],u);break;case"source":Ke("error",u);break;case"img":case"image":case"link":Ke("error",u),Ke("load",u);break;case"details":Ke("toggle",u);break;case"input":At(u,y),Ke("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!y.multiple},Ke("invalid",u);break;case"textarea":kt(u,y),Ke("invalid",u)}fr(a,y),f=null;for(var x in y)if(y.hasOwnProperty(x)){var T=y[x];x==="children"?typeof T=="string"?u.textContent!==T&&(y.suppressHydrationWarning!==!0&&na(u.textContent,T,n),f=["children",T]):typeof T=="number"&&u.textContent!==""+T&&(y.suppressHydrationWarning!==!0&&na(u.textContent,T,n),f=["children",""+T]):i.hasOwnProperty(x)&&T!=null&&x==="onScroll"&&Ke("scroll",u)}switch(a){case"input":Oe(u),sn(u,y,!0);break;case"textarea":Oe(u),Tn(u);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(u.onclick=ra)}u=f,s.updateQueue=u,u!==null&&(s.flags|=4)}else{x=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=wt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=x.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof u.is=="string"?n=x.createElement(a,{is:u.is}):(n=x.createElement(a),a==="select"&&(x=n,u.multiple?x.multiple=!0:u.size&&(x.size=u.size))):n=x.createElementNS(n,a),n[Bn]=s,n[Yo]=u,xp(n,s,!1,!1),s.stateNode=n;e:{switch(x=Hr(a,u),a){case"dialog":Ke("cancel",n),Ke("close",n),f=u;break;case"iframe":case"object":case"embed":Ke("load",n),f=u;break;case"video":case"audio":for(f=0;f<qo.length;f++)Ke(qo[f],n);f=u;break;case"source":Ke("error",n),f=u;break;case"img":case"image":case"link":Ke("error",n),Ke("load",n),f=u;break;case"details":Ke("toggle",n),f=u;break;case"input":At(n,u),f=Xe(n,u),Ke("invalid",n);break;case"option":f=u;break;case"select":n._wrapperState={wasMultiple:!!u.multiple},f=K({},u,{value:void 0}),Ke("invalid",n);break;case"textarea":kt(n,u),f=Qe(n,u),Ke("invalid",n);break;default:f=u}fr(a,f),T=f;for(y in T)if(T.hasOwnProperty(y)){var j=T[y];y==="style"?Ps(n,j):y==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&Me(n,j)):y==="children"?typeof j=="string"?(a!=="textarea"||j!=="")&&Fe(n,j):typeof j=="number"&&Fe(n,""+j):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(i.hasOwnProperty(y)?j!=null&&y==="onScroll"&&Ke("scroll",n):j!=null&&A(n,y,j,x))}switch(a){case"input":Oe(n),sn(n,u,!1);break;case"textarea":Oe(n),Tn(n);break;case"option":u.value!=null&&n.setAttribute("value",""+B(u.value));break;case"select":n.multiple=!!u.multiple,y=u.value,y!=null?on(n,!!u.multiple,y,!1):u.defaultValue!=null&&on(n,!!u.multiple,u.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=ra)}switch(a){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return $t(s),null;case 6:if(n&&s.stateNode!=null)Sp(n,s,n.memoizedProps,u);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(a=Qr(ei.current),Qr(Hn.current),ua(s)){if(u=s.stateNode,a=s.memoizedProps,u[Bn]=s,(y=u.nodeValue!==a)&&(n=cn,n!==null))switch(n.tag){case 3:na(u.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&na(u.nodeValue,a,(n.mode&1)!==0)}y&&(s.flags|=4)}else u=(a.nodeType===9?a:a.ownerDocument).createTextNode(u),u[Bn]=s,s.stateNode=u}return $t(s),null;case 13:if(Ge(et),u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ye&&un!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Ef(),Us(),s.flags|=98560,y=!1;else if(y=ua(s),u!==null&&u.dehydrated!==null){if(n===null){if(!y)throw Error(r(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Bn]=s}else Us(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;$t(s),y=!1}else jn!==null&&(Zc(jn),jn=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(u=u!==null,u!==(n!==null&&n.memoizedState!==null)&&u&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(et.current&1)!==0?bt===0&&(bt=3):nu())),s.updateQueue!==null&&(s.flags|=4),$t(s),null);case 4:return Ws(),zc(n,s),n===null&&Ko(s.stateNode.containerInfo),$t(s),null;case 10:return gc(s.type._context),$t(s),null;case 17:return Jt(s.type)&&oa(),$t(s),null;case 19:if(Ge(et),y=s.memoizedState,y===null)return $t(s),null;if(u=(s.flags&128)!==0,x=y.rendering,x===null)if(u)oi(y,!1);else{if(bt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(x=ga(n),x!==null){for(s.flags|=128,oi(y,!1),u=x.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),s.subtreeFlags=0,u=a,a=s.child;a!==null;)y=a,n=u,y.flags&=14680066,x=y.alternate,x===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=x.childLanes,y.lanes=x.lanes,y.child=x.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=x.memoizedProps,y.memoizedState=x.memoizedState,y.updateQueue=x.updateQueue,y.type=x.type,n=x.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return We(et,et.current&1|2),s.child}n=n.sibling}y.tail!==null&&ct()>Ys&&(s.flags|=128,u=!0,oi(y,!1),s.lanes=4194304)}else{if(!u)if(n=ga(x),n!==null){if(s.flags|=128,u=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),oi(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!Ye)return $t(s),null}else 2*ct()-y.renderingStartTime>Ys&&a!==1073741824&&(s.flags|=128,u=!0,oi(y,!1),s.lanes=4194304);y.isBackwards?(x.sibling=s.child,s.child=x):(a=y.last,a!==null?a.sibling=x:s.child=x,y.last=x)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=ct(),s.sibling=null,a=et.current,We(et,u?a&1|2:a&1),s):($t(s),null);case 22:case 23:return tu(),u=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==u&&(s.flags|=8192),u&&(s.mode&1)!==0?(dn&1073741824)!==0&&($t(s),s.subtreeFlags&6&&(s.flags|=8192)):$t(s),null;case 24:return null;case 25:return null}throw Error(r(156,s.tag))}function Cx(n,s){switch(uc(s),s.tag){case 1:return Jt(s.type)&&oa(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ws(),Ge(Yt),Ge(Dt),_c(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return bc(s),null;case 13:if(Ge(et),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Us()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Ge(et),null;case 4:return Ws(),null;case 10:return gc(s.type._context),null;case 22:case 23:return tu(),null;case 24:return null;default:return null}}var Ea=!1,Ft=!1,jx=typeof WeakSet=="function"?WeakSet:Set,me=null;function Ks(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(u){rt(n,s,u)}else a.current=null}function Bc(n,s,a){try{a()}catch(u){rt(n,s,u)}}var _p=!1;function Ax(n,s){if(tc=Wi,n=ef(),Kl(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var f=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var x=0,T=-1,j=-1,z=0,Z=0,te=n,Q=null;t:for(;;){for(var pe;te!==a||f!==0&&te.nodeType!==3||(T=x+f),te!==y||u!==0&&te.nodeType!==3||(j=x+u),te.nodeType===3&&(x+=te.nodeValue.length),(pe=te.firstChild)!==null;)Q=te,te=pe;for(;;){if(te===n)break t;if(Q===a&&++z===f&&(T=x),Q===y&&++Z===u&&(j=x),(pe=te.nextSibling)!==null)break;te=Q,Q=te.parentNode}te=pe}a=T===-1||j===-1?null:{start:T,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(nc={focusedElem:n,selectionRange:a},Wi=!1,me=s;me!==null;)if(s=me,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,me=n;else for(;me!==null;){s=me;try{var ge=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var Se=ge.memoizedProps,ut=ge.memoizedState,D=s.stateNode,L=D.getSnapshotBeforeUpdate(s.elementType===s.type?Se:An(s.type,Se),ut);D.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var F=s.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(oe){rt(s,s.return,oe)}if(n=s.sibling,n!==null){n.return=s.return,me=n;break}me=s.return}return ge=_p,_p=!1,ge}function ii(n,s,a){var u=s.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&n)===n){var y=f.destroy;f.destroy=void 0,y!==void 0&&Bc(s,a,y)}f=f.next}while(f!==u)}}function Ta(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var u=a.create;a.destroy=u()}a=a.next}while(a!==s)}}function Hc(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function kp(n){var s=n.alternate;s!==null&&(n.alternate=null,kp(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Bn],delete s[Yo],delete s[ic],delete s[hx],delete s[fx])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Ep(n){return n.tag===5||n.tag===3||n.tag===4}function Tp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Ep(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Wc(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ra));else if(u!==4&&(n=n.child,n!==null))for(Wc(n,s,a),n=n.sibling;n!==null;)Wc(n,s,a),n=n.sibling}function qc(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(u!==4&&(n=n.child,n!==null))for(qc(n,s,a),n=n.sibling;n!==null;)qc(n,s,a),n=n.sibling}var Nt=null,Nn=!1;function Tr(n,s,a){for(a=a.child;a!==null;)Pp(n,s,a),a=a.sibling}function Pp(n,s,a){if(zn&&typeof zn.onCommitFiberUnmount=="function")try{zn.onCommitFiberUnmount(Fi,a)}catch{}switch(a.tag){case 5:Ft||Ks(a,s);case 6:var u=Nt,f=Nn;Nt=null,Tr(n,s,a),Nt=u,Nn=f,Nt!==null&&(Nn?(n=Nt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Nt.removeChild(a.stateNode));break;case 18:Nt!==null&&(Nn?(n=Nt,a=a.stateNode,n.nodeType===8?oc(n.parentNode,a):n.nodeType===1&&oc(n,a),$o(n)):oc(Nt,a.stateNode));break;case 4:u=Nt,f=Nn,Nt=a.stateNode.containerInfo,Nn=!0,Tr(n,s,a),Nt=u,Nn=f;break;case 0:case 11:case 14:case 15:if(!Ft&&(u=a.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){f=u=u.next;do{var y=f,x=y.destroy;y=y.tag,x!==void 0&&((y&2)!==0||(y&4)!==0)&&Bc(a,s,x),f=f.next}while(f!==u)}Tr(n,s,a);break;case 1:if(!Ft&&(Ks(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=a.memoizedProps,u.state=a.memoizedState,u.componentWillUnmount()}catch(T){rt(a,s,T)}Tr(n,s,a);break;case 21:Tr(n,s,a);break;case 22:a.mode&1?(Ft=(u=Ft)||a.memoizedState!==null,Tr(n,s,a),Ft=u):Tr(n,s,a);break;default:Tr(n,s,a)}}function Cp(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new jx),s.forEach(function(u){var f=Fx.bind(null,n,u);a.has(u)||(a.add(u),u.then(f,f))})}}function Rn(n,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var f=a[u];try{var y=n,x=s,T=x;e:for(;T!==null;){switch(T.tag){case 5:Nt=T.stateNode,Nn=!1;break e;case 3:Nt=T.stateNode.containerInfo,Nn=!0;break e;case 4:Nt=T.stateNode.containerInfo,Nn=!0;break e}T=T.return}if(Nt===null)throw Error(r(160));Pp(y,x,f),Nt=null,Nn=!1;var j=f.alternate;j!==null&&(j.return=null),f.return=null}catch(z){rt(f,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)jp(s,n),s=s.sibling}function jp(n,s){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Rn(s,n),qn(n),u&4){try{ii(3,n,n.return),Ta(3,n)}catch(Se){rt(n,n.return,Se)}try{ii(5,n,n.return)}catch(Se){rt(n,n.return,Se)}}break;case 1:Rn(s,n),qn(n),u&512&&a!==null&&Ks(a,a.return);break;case 5:if(Rn(s,n),qn(n),u&512&&a!==null&&Ks(a,a.return),n.flags&32){var f=n.stateNode;try{Fe(f,"")}catch(Se){rt(n,n.return,Se)}}if(u&4&&(f=n.stateNode,f!=null)){var y=n.memoizedProps,x=a!==null?a.memoizedProps:y,T=n.type,j=n.updateQueue;if(n.updateQueue=null,j!==null)try{T==="input"&&y.type==="radio"&&y.name!=null&&Ut(f,y),Hr(T,x);var z=Hr(T,y);for(x=0;x<j.length;x+=2){var Z=j[x],te=j[x+1];Z==="style"?Ps(f,te):Z==="dangerouslySetInnerHTML"?Me(f,te):Z==="children"?Fe(f,te):A(f,Z,te,z)}switch(T){case"input":It(f,y);break;case"textarea":fn(f,y);break;case"select":var Q=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!y.multiple;var pe=y.value;pe!=null?on(f,!!y.multiple,pe,!1):Q!==!!y.multiple&&(y.defaultValue!=null?on(f,!!y.multiple,y.defaultValue,!0):on(f,!!y.multiple,y.multiple?[]:"",!1))}f[Yo]=y}catch(Se){rt(n,n.return,Se)}}break;case 6:if(Rn(s,n),qn(n),u&4){if(n.stateNode===null)throw Error(r(162));f=n.stateNode,y=n.memoizedProps;try{f.nodeValue=y}catch(Se){rt(n,n.return,Se)}}break;case 3:if(Rn(s,n),qn(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{$o(s.containerInfo)}catch(Se){rt(n,n.return,Se)}break;case 4:Rn(s,n),qn(n);break;case 13:Rn(s,n),qn(n),f=n.child,f.flags&8192&&(y=f.memoizedState!==null,f.stateNode.isHidden=y,!y||f.alternate!==null&&f.alternate.memoizedState!==null||(Yc=ct())),u&4&&Cp(n);break;case 22:if(Z=a!==null&&a.memoizedState!==null,n.mode&1?(Ft=(z=Ft)||Z,Rn(s,n),Ft=z):Rn(s,n),qn(n),u&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!Z&&(n.mode&1)!==0)for(me=n,Z=n.child;Z!==null;){for(te=me=Z;me!==null;){switch(Q=me,pe=Q.child,Q.tag){case 0:case 11:case 14:case 15:ii(4,Q,Q.return);break;case 1:Ks(Q,Q.return);var ge=Q.stateNode;if(typeof ge.componentWillUnmount=="function"){u=Q,a=Q.return;try{s=u,ge.props=s.memoizedProps,ge.state=s.memoizedState,ge.componentWillUnmount()}catch(Se){rt(u,a,Se)}}break;case 5:Ks(Q,Q.return);break;case 22:if(Q.memoizedState!==null){Rp(te);continue}}pe!==null?(pe.return=Q,me=pe):Rp(te)}Z=Z.sibling}e:for(Z=null,te=n;;){if(te.tag===5){if(Z===null){Z=te;try{f=te.stateNode,z?(y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(T=te.stateNode,j=te.memoizedProps.style,x=j!=null&&j.hasOwnProperty("display")?j.display:null,T.style.display=Ts("display",x))}catch(Se){rt(n,n.return,Se)}}}else if(te.tag===6){if(Z===null)try{te.stateNode.nodeValue=z?"":te.memoizedProps}catch(Se){rt(n,n.return,Se)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===n)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===n)break e;for(;te.sibling===null;){if(te.return===null||te.return===n)break e;Z===te&&(Z=null),te=te.return}Z===te&&(Z=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Rn(s,n),qn(n),u&4&&Cp(n);break;case 21:break;default:Rn(s,n),qn(n)}}function qn(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Ep(a)){var u=a;break e}a=a.return}throw Error(r(160))}switch(u.tag){case 5:var f=u.stateNode;u.flags&32&&(Fe(f,""),u.flags&=-33);var y=Tp(n);qc(n,y,f);break;case 3:case 4:var x=u.stateNode.containerInfo,T=Tp(n);Wc(n,T,x);break;default:throw Error(r(161))}}catch(j){rt(n,n.return,j)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Nx(n,s,a){me=n,Ap(n)}function Ap(n,s,a){for(var u=(n.mode&1)!==0;me!==null;){var f=me,y=f.child;if(f.tag===22&&u){var x=f.memoizedState!==null||Ea;if(!x){var T=f.alternate,j=T!==null&&T.memoizedState!==null||Ft;T=Ea;var z=Ft;if(Ea=x,(Ft=j)&&!z)for(me=f;me!==null;)x=me,j=x.child,x.tag===22&&x.memoizedState!==null?Lp(f):j!==null?(j.return=x,me=j):Lp(f);for(;y!==null;)me=y,Ap(y),y=y.sibling;me=f,Ea=T,Ft=z}Np(n)}else(f.subtreeFlags&8772)!==0&&y!==null?(y.return=f,me=y):Np(n)}}function Np(n){for(;me!==null;){var s=me;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ft||Ta(5,s);break;case 1:var u=s.stateNode;if(s.flags&4&&!Ft)if(a===null)u.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:An(s.type,a.memoizedProps);u.componentDidUpdate(f,a.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&Rf(s,y,u);break;case 3:var x=s.updateQueue;if(x!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Rf(s,x,a)}break;case 5:var T=s.stateNode;if(a===null&&s.flags&4){a=T;var j=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&a.focus();break;case"img":j.src&&(a.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var Z=z.memoizedState;if(Z!==null){var te=Z.dehydrated;te!==null&&$o(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Ft||s.flags&512&&Hc(s)}catch(Q){rt(s,s.return,Q)}}if(s===n){me=null;break}if(a=s.sibling,a!==null){a.return=s.return,me=a;break}me=s.return}}function Rp(n){for(;me!==null;){var s=me;if(s===n){me=null;break}var a=s.sibling;if(a!==null){a.return=s.return,me=a;break}me=s.return}}function Lp(n){for(;me!==null;){var s=me;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Ta(4,s)}catch(j){rt(s,a,j)}break;case 1:var u=s.stateNode;if(typeof u.componentDidMount=="function"){var f=s.return;try{u.componentDidMount()}catch(j){rt(s,f,j)}}var y=s.return;try{Hc(s)}catch(j){rt(s,y,j)}break;case 5:var x=s.return;try{Hc(s)}catch(j){rt(s,x,j)}}}catch(j){rt(s,s.return,j)}if(s===n){me=null;break}var T=s.sibling;if(T!==null){T.return=s.return,me=T;break}me=s.return}}var Rx=Math.ceil,Pa=W.ReactCurrentDispatcher,Kc=W.ReactCurrentOwner,wn=W.ReactCurrentBatchConfig,Ve=0,Tt=null,pt=null,Rt=0,dn=0,Gs=br(0),bt=0,ai=null,es=0,Ca=0,Gc=0,li=null,Qt=null,Yc=0,Ys=1/0,ar=null,ja=!1,Jc=null,Pr=null,Aa=!1,Cr=null,Na=0,ci=0,Xc=null,Ra=-1,La=0;function Bt(){return(Ve&6)!==0?ct():Ra!==-1?Ra:Ra=ct()}function jr(n){return(n.mode&1)===0?1:(Ve&2)!==0&&Rt!==0?Rt&-Rt:mx.transition!==null?(La===0&&(La=Eh()),La):(n=Be,n!==0||(n=window.event,n=n===void 0?16:Ih(n.type)),n)}function Ln(n,s,a,u){if(50<ci)throw ci=0,Xc=null,Error(r(185));Lo(n,a,u),((Ve&2)===0||n!==Tt)&&(n===Tt&&((Ve&2)===0&&(Ca|=a),bt===4&&Ar(n,Rt)),Zt(n,u),a===1&&Ve===0&&(s.mode&1)===0&&(Ys=ct()+500,aa&&_r()))}function Zt(n,s){var a=n.callbackNode;mw(n,s);var u=zi(n,n===Tt?Rt:0);if(u===0)a!==null&&Sh(a),n.callbackNode=null,n.callbackPriority=0;else if(s=u&-u,n.callbackPriority!==s){if(a!=null&&Sh(a),s===1)n.tag===0?px(Op.bind(null,n)):xf(Op.bind(null,n)),ux(function(){(Ve&6)===0&&_r()}),a=null;else{switch(Th(u)){case 1:a=Al;break;case 4:a=_h;break;case 16:a=$i;break;case 536870912:a=kh;break;default:a=$i}a=Bp(a,Ip.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function Ip(n,s){if(Ra=-1,La=0,(Ve&6)!==0)throw Error(r(327));var a=n.callbackNode;if(Js()&&n.callbackNode!==a)return null;var u=zi(n,n===Tt?Rt:0);if(u===0)return null;if((u&30)!==0||(u&n.expiredLanes)!==0||s)s=Ia(n,u);else{s=u;var f=Ve;Ve|=2;var y=Mp();(Tt!==n||Rt!==s)&&(ar=null,Ys=ct()+500,ns(n,s));do try{Ox();break}catch(T){Dp(n,T)}while(!0);mc(),Pa.current=y,Ve=f,pt!==null?s=0:(Tt=null,Rt=0,s=bt)}if(s!==0){if(s===2&&(f=Nl(n),f!==0&&(u=f,s=Qc(n,f))),s===1)throw a=ai,ns(n,0),Ar(n,u),Zt(n,ct()),a;if(s===6)Ar(n,u);else{if(f=n.current.alternate,(u&30)===0&&!Lx(f)&&(s=Ia(n,u),s===2&&(y=Nl(n),y!==0&&(u=y,s=Qc(n,y))),s===1))throw a=ai,ns(n,0),Ar(n,u),Zt(n,ct()),a;switch(n.finishedWork=f,n.finishedLanes=u,s){case 0:case 1:throw Error(r(345));case 2:rs(n,Qt,ar);break;case 3:if(Ar(n,u),(u&130023424)===u&&(s=Yc+500-ct(),10<s)){if(zi(n,0)!==0)break;if(f=n.suspendedLanes,(f&u)!==u){Bt(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=sc(rs.bind(null,n,Qt,ar),s);break}rs(n,Qt,ar);break;case 4:if(Ar(n,u),(u&4194240)===u)break;for(s=n.eventTimes,f=-1;0<u;){var x=31-Pn(u);y=1<<x,x=s[x],x>f&&(f=x),u&=~y}if(u=f,u=ct()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Rx(u/1960))-u,10<u){n.timeoutHandle=sc(rs.bind(null,n,Qt,ar),u);break}rs(n,Qt,ar);break;case 5:rs(n,Qt,ar);break;default:throw Error(r(329))}}}return Zt(n,ct()),n.callbackNode===a?Ip.bind(null,n):null}function Qc(n,s){var a=li;return n.current.memoizedState.isDehydrated&&(ns(n,s).flags|=256),n=Ia(n,s),n!==2&&(s=Qt,Qt=a,s!==null&&Zc(s)),n}function Zc(n){Qt===null?Qt=n:Qt.push.apply(Qt,n)}function Lx(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var u=0;u<a.length;u++){var f=a[u],y=f.getSnapshot;f=f.value;try{if(!Cn(y(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ar(n,s){for(s&=~Gc,s&=~Ca,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-Pn(s),u=1<<a;n[a]=-1,s&=~u}}function Op(n){if((Ve&6)!==0)throw Error(r(327));Js();var s=zi(n,0);if((s&1)===0)return Zt(n,ct()),null;var a=Ia(n,s);if(n.tag!==0&&a===2){var u=Nl(n);u!==0&&(s=u,a=Qc(n,u))}if(a===1)throw a=ai,ns(n,0),Ar(n,s),Zt(n,ct()),a;if(a===6)throw Error(r(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,rs(n,Qt,ar),Zt(n,ct()),null}function eu(n,s){var a=Ve;Ve|=1;try{return n(s)}finally{Ve=a,Ve===0&&(Ys=ct()+500,aa&&_r())}}function ts(n){Cr!==null&&Cr.tag===0&&(Ve&6)===0&&Js();var s=Ve;Ve|=1;var a=wn.transition,u=Be;try{if(wn.transition=null,Be=1,n)return n()}finally{Be=u,wn.transition=a,Ve=s,(Ve&6)===0&&_r()}}function tu(){dn=Gs.current,Ge(Gs)}function ns(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,cx(a)),pt!==null)for(a=pt.return;a!==null;){var u=a;switch(uc(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&oa();break;case 3:Ws(),Ge(Yt),Ge(Dt),_c();break;case 5:bc(u);break;case 4:Ws();break;case 13:Ge(et);break;case 19:Ge(et);break;case 10:gc(u.type._context);break;case 22:case 23:tu()}a=a.return}if(Tt=n,pt=n=Nr(n.current,null),Rt=dn=s,bt=0,ai=null,Gc=Ca=es=0,Qt=li=null,Xr!==null){for(s=0;s<Xr.length;s++)if(a=Xr[s],u=a.interleaved,u!==null){a.interleaved=null;var f=u.next,y=a.pending;if(y!==null){var x=y.next;y.next=f,u.next=x}a.pending=u}Xr=null}return n}function Dp(n,s){do{var a=pt;try{if(mc(),va.current=ba,ya){for(var u=tt.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}ya=!1}if(Zr=0,Et=xt=tt=null,ti=!1,ni=0,Kc.current=null,a===null||a.return===null){bt=1,ai=s,pt=null;break}e:{var y=n,x=a.return,T=a,j=s;if(s=Rt,T.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var z=j,Z=T,te=Z.tag;if((Z.mode&1)===0&&(te===0||te===11||te===15)){var Q=Z.alternate;Q?(Z.updateQueue=Q.updateQueue,Z.memoizedState=Q.memoizedState,Z.lanes=Q.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var pe=ap(x);if(pe!==null){pe.flags&=-257,lp(pe,x,T,y,s),pe.mode&1&&ip(y,z,s),s=pe,j=z;var ge=s.updateQueue;if(ge===null){var Se=new Set;Se.add(j),s.updateQueue=Se}else ge.add(j);break e}else{if((s&1)===0){ip(y,z,s),nu();break e}j=Error(r(426))}}else if(Ye&&T.mode&1){var ut=ap(x);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),lp(ut,x,T,y,s),fc(qs(j,T));break e}}y=j=qs(j,T),bt!==4&&(bt=2),li===null?li=[y]:li.push(y),y=x;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var D=sp(y,j,s);Nf(y,D);break e;case 1:T=j;var L=y.type,F=y.stateNode;if((y.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Pr===null||!Pr.has(F)))){y.flags|=65536,s&=-s,y.lanes|=s;var oe=op(y,T,s);Nf(y,oe);break e}}y=y.return}while(y!==null)}Fp(a)}catch(ke){s=ke,pt===a&&a!==null&&(pt=a=a.return);continue}break}while(!0)}function Mp(){var n=Pa.current;return Pa.current=ba,n===null?ba:n}function nu(){(bt===0||bt===3||bt===2)&&(bt=4),Tt===null||(es&268435455)===0&&(Ca&268435455)===0||Ar(Tt,Rt)}function Ia(n,s){var a=Ve;Ve|=2;var u=Mp();(Tt!==n||Rt!==s)&&(ar=null,ns(n,s));do try{Ix();break}catch(f){Dp(n,f)}while(!0);if(mc(),Ve=a,Pa.current=u,pt!==null)throw Error(r(261));return Tt=null,Rt=0,bt}function Ix(){for(;pt!==null;)$p(pt)}function Ox(){for(;pt!==null&&!iw();)$p(pt)}function $p(n){var s=zp(n.alternate,n,dn);n.memoizedProps=n.pendingProps,s===null?Fp(n):pt=s,Kc.current=null}function Fp(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Px(a,s,dn),a!==null){pt=a;return}}else{if(a=Cx(a,s),a!==null){a.flags&=32767,pt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{bt=6,pt=null;return}}if(s=s.sibling,s!==null){pt=s;return}pt=s=n}while(s!==null);bt===0&&(bt=5)}function rs(n,s,a){var u=Be,f=wn.transition;try{wn.transition=null,Be=1,Dx(n,s,a,u)}finally{wn.transition=f,Be=u}return null}function Dx(n,s,a,u){do Js();while(Cr!==null);if((Ve&6)!==0)throw Error(r(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(r(177));n.callbackNode=null,n.callbackPriority=0;var y=a.lanes|a.childLanes;if(gw(n,y),n===Tt&&(pt=Tt=null,Rt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Aa||(Aa=!0,Bp($i,function(){return Js(),null})),y=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||y){y=wn.transition,wn.transition=null;var x=Be;Be=1;var T=Ve;Ve|=4,Kc.current=null,Ax(n,a),jp(a,n),nx(nc),Wi=!!tc,nc=tc=null,n.current=a,Nx(a),aw(),Ve=T,Be=x,wn.transition=y}else n.current=a;if(Aa&&(Aa=!1,Cr=n,Na=f),y=n.pendingLanes,y===0&&(Pr=null),uw(a.stateNode),Zt(n,ct()),s!==null)for(u=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],u(f.value,{componentStack:f.stack,digest:f.digest});if(ja)throw ja=!1,n=Jc,Jc=null,n;return(Na&1)!==0&&n.tag!==0&&Js(),y=n.pendingLanes,(y&1)!==0?n===Xc?ci++:(ci=0,Xc=n):ci=0,_r(),null}function Js(){if(Cr!==null){var n=Th(Na),s=wn.transition,a=Be;try{if(wn.transition=null,Be=16>n?16:n,Cr===null)var u=!1;else{if(n=Cr,Cr=null,Na=0,(Ve&6)!==0)throw Error(r(331));var f=Ve;for(Ve|=4,me=n.current;me!==null;){var y=me,x=y.child;if((me.flags&16)!==0){var T=y.deletions;if(T!==null){for(var j=0;j<T.length;j++){var z=T[j];for(me=z;me!==null;){var Z=me;switch(Z.tag){case 0:case 11:case 15:ii(8,Z,y)}var te=Z.child;if(te!==null)te.return=Z,me=te;else for(;me!==null;){Z=me;var Q=Z.sibling,pe=Z.return;if(kp(Z),Z===z){me=null;break}if(Q!==null){Q.return=pe,me=Q;break}me=pe}}}var ge=y.alternate;if(ge!==null){var Se=ge.child;if(Se!==null){ge.child=null;do{var ut=Se.sibling;Se.sibling=null,Se=ut}while(Se!==null)}}me=y}}if((y.subtreeFlags&2064)!==0&&x!==null)x.return=y,me=x;else e:for(;me!==null;){if(y=me,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:ii(9,y,y.return)}var D=y.sibling;if(D!==null){D.return=y.return,me=D;break e}me=y.return}}var L=n.current;for(me=L;me!==null;){x=me;var F=x.child;if((x.subtreeFlags&2064)!==0&&F!==null)F.return=x,me=F;else e:for(x=L;me!==null;){if(T=me,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:Ta(9,T)}}catch(ke){rt(T,T.return,ke)}if(T===x){me=null;break e}var oe=T.sibling;if(oe!==null){oe.return=T.return,me=oe;break e}me=T.return}}if(Ve=f,_r(),zn&&typeof zn.onPostCommitFiberRoot=="function")try{zn.onPostCommitFiberRoot(Fi,n)}catch{}u=!0}return u}finally{Be=a,wn.transition=s}}return!1}function Vp(n,s,a){s=qs(a,s),s=sp(n,s,1),n=Er(n,s,1),s=Bt(),n!==null&&(Lo(n,1,s),Zt(n,s))}function rt(n,s,a){if(n.tag===3)Vp(n,n,a);else for(;s!==null;){if(s.tag===3){Vp(s,n,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Pr===null||!Pr.has(u))){n=qs(a,n),n=op(s,n,1),s=Er(s,n,1),n=Bt(),s!==null&&(Lo(s,1,n),Zt(s,n));break}}s=s.return}}function Mx(n,s,a){var u=n.pingCache;u!==null&&u.delete(s),s=Bt(),n.pingedLanes|=n.suspendedLanes&a,Tt===n&&(Rt&a)===a&&(bt===4||bt===3&&(Rt&130023424)===Rt&&500>ct()-Yc?ns(n,0):Gc|=a),Zt(n,s)}function Up(n,s){s===0&&((n.mode&1)===0?s=1:(s=Ui,Ui<<=1,(Ui&130023424)===0&&(Ui=4194304)));var a=Bt();n=sr(n,s),n!==null&&(Lo(n,s,a),Zt(n,a))}function $x(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Up(n,a)}function Fx(n,s){var a=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:u=n.stateNode;break;default:throw Error(r(314))}u!==null&&u.delete(s),Up(n,a)}var zp;zp=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Yt.current)Xt=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return Xt=!1,Tx(n,s,a);Xt=(n.flags&131072)!==0}else Xt=!1,Ye&&(s.flags&1048576)!==0&&bf(s,ca,s.index);switch(s.lanes=0,s.tag){case 2:var u=s.type;ka(n,s),n=s.pendingProps;var f=$s(s,Dt.current);Hs(s,a),f=Tc(null,s,u,n,f,a);var y=Pc();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Jt(u)?(y=!0,ia(s)):y=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,wc(s),f.updater=Sa,s.stateNode=f,f._reactInternals=s,Lc(s,u,n,a),s=Mc(null,s,u,!0,y,a)):(s.tag=0,Ye&&y&&cc(s),zt(null,s,f,a),s=s.child),s;case 16:u=s.elementType;e:{switch(ka(n,s),n=s.pendingProps,f=u._init,u=f(u._payload),s.type=u,f=s.tag=Ux(u),n=An(u,n),f){case 0:s=Dc(null,s,u,n,a);break e;case 1:s=pp(null,s,u,n,a);break e;case 11:s=cp(null,s,u,n,a);break e;case 14:s=up(null,s,u,An(u.type,n),a);break e}throw Error(r(306,u,""))}return s;case 0:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:An(u,f),Dc(n,s,u,f,a);case 1:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:An(u,f),pp(n,s,u,f,a);case 3:e:{if(mp(s),n===null)throw Error(r(387));u=s.pendingProps,y=s.memoizedState,f=y.element,Af(n,s),ma(s,u,null,a);var x=s.memoizedState;if(u=x.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){f=qs(Error(r(423)),s),s=gp(n,s,u,a,f);break e}else if(u!==f){f=qs(Error(r(424)),s),s=gp(n,s,u,a,f);break e}else for(un=xr(s.stateNode.containerInfo.firstChild),cn=s,Ye=!0,jn=null,a=Cf(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Us(),u===f){s=ir(n,s,a);break e}zt(n,s,u,a)}s=s.child}return s;case 5:return Lf(s),n===null&&hc(s),u=s.type,f=s.pendingProps,y=n!==null?n.memoizedProps:null,x=f.children,rc(u,f)?x=null:y!==null&&rc(u,y)&&(s.flags|=32),fp(n,s),zt(n,s,x,a),s.child;case 6:return n===null&&hc(s),null;case 13:return vp(n,s,a);case 4:return xc(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=zs(s,null,u,a):zt(n,s,u,a),s.child;case 11:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:An(u,f),cp(n,s,u,f,a);case 7:return zt(n,s,s.pendingProps,a),s.child;case 8:return zt(n,s,s.pendingProps.children,a),s.child;case 12:return zt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(u=s.type._context,f=s.pendingProps,y=s.memoizedProps,x=f.value,We(ha,u._currentValue),u._currentValue=x,y!==null)if(Cn(y.value,x)){if(y.children===f.children&&!Yt.current){s=ir(n,s,a);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var T=y.dependencies;if(T!==null){x=y.child;for(var j=T.firstContext;j!==null;){if(j.context===u){if(y.tag===1){j=or(-1,a&-a),j.tag=2;var z=y.updateQueue;if(z!==null){z=z.shared;var Z=z.pending;Z===null?j.next=j:(j.next=Z.next,Z.next=j),z.pending=j}}y.lanes|=a,j=y.alternate,j!==null&&(j.lanes|=a),vc(y.return,a,s),T.lanes|=a;break}j=j.next}}else if(y.tag===10)x=y.type===s.type?null:y.child;else if(y.tag===18){if(x=y.return,x===null)throw Error(r(341));x.lanes|=a,T=x.alternate,T!==null&&(T.lanes|=a),vc(x,a,s),x=y.sibling}else x=y.child;if(x!==null)x.return=y;else for(x=y;x!==null;){if(x===s){x=null;break}if(y=x.sibling,y!==null){y.return=x.return,x=y;break}x=x.return}y=x}zt(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,u=s.pendingProps.children,Hs(s,a),f=vn(f),u=u(f),s.flags|=1,zt(n,s,u,a),s.child;case 14:return u=s.type,f=An(u,s.pendingProps),f=An(u.type,f),up(n,s,u,f,a);case 15:return dp(n,s,s.type,s.pendingProps,a);case 17:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:An(u,f),ka(n,s),s.tag=1,Jt(u)?(n=!0,ia(s)):n=!1,Hs(s,a),np(s,u,f),Lc(s,u,f,a),Mc(null,s,u,!0,n,a);case 19:return wp(n,s,a);case 22:return hp(n,s,a)}throw Error(r(156,s.tag))};function Bp(n,s){return bh(n,s)}function Vx(n,s,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(n,s,a,u){return new Vx(n,s,a,u)}function ru(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ux(n){if(typeof n=="function")return ru(n)?1:0;if(n!=null){if(n=n.$$typeof,n===he)return 11;if(n===xe)return 14}return 2}function Nr(n,s){var a=n.alternate;return a===null?(a=xn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Oa(n,s,a,u,f,y){var x=2;if(u=n,typeof n=="function")ru(n)&&(x=1);else if(typeof n=="string")x=5;else e:switch(n){case H:return ss(a.children,f,y,s);case M:x=8,f|=8;break;case ee:return n=xn(12,a,s,f|2),n.elementType=ee,n.lanes=y,n;case we:return n=xn(13,a,s,f),n.elementType=we,n.lanes=y,n;case _e:return n=xn(19,a,s,f),n.elementType=_e,n.lanes=y,n;case U:return Da(a,f,y,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ie:x=10;break e;case Ee:x=9;break e;case he:x=11;break e;case xe:x=14;break e;case ue:x=16,u=null;break e}throw Error(r(130,n==null?n:typeof n,""))}return s=xn(x,a,s,f),s.elementType=n,s.type=u,s.lanes=y,s}function ss(n,s,a,u){return n=xn(7,n,u,s),n.lanes=a,n}function Da(n,s,a,u){return n=xn(22,n,u,s),n.elementType=U,n.lanes=a,n.stateNode={isHidden:!1},n}function su(n,s,a){return n=xn(6,n,null,s),n.lanes=a,n}function ou(n,s,a){return s=xn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function zx(n,s,a,u,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rl(0),this.expirationTimes=Rl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rl(0),this.identifierPrefix=u,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function iu(n,s,a,u,f,y,x,T,j){return n=new zx(n,s,a,T,j),s===1?(s=1,y===!0&&(s|=8)):s=0,y=xn(3,null,null,s),n.current=y,y.stateNode=n,y.memoizedState={element:u,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},wc(y),n}function Bx(n,s,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:u==null?null:""+u,children:n,containerInfo:s,implementation:a}}function Hp(n){if(!n)return Sr;n=n._reactInternals;e:{if(qr(n)!==n||n.tag!==1)throw Error(r(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Jt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(r(171))}if(n.tag===1){var a=n.type;if(Jt(a))return yf(n,a,s)}return s}function Wp(n,s,a,u,f,y,x,T,j){return n=iu(a,u,!0,n,f,y,x,T,j),n.context=Hp(null),a=n.current,u=Bt(),f=jr(a),y=or(u,f),y.callback=s??null,Er(a,y,f),n.current.lanes=f,Lo(n,f,u),Zt(n,u),n}function Ma(n,s,a,u){var f=s.current,y=Bt(),x=jr(f);return a=Hp(a),s.context===null?s.context=a:s.pendingContext=a,s=or(y,x),s.payload={element:n},u=u===void 0?null:u,u!==null&&(s.callback=u),n=Er(f,s,x),n!==null&&(Ln(n,f,x,y),pa(n,f,x)),x}function $a(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function qp(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function au(n,s){qp(n,s),(n=n.alternate)&&qp(n,s)}function Hx(){return null}var Kp=typeof reportError=="function"?reportError:function(n){console.error(n)};function lu(n){this._internalRoot=n}Fa.prototype.render=lu.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));Ma(n,s,null,null)},Fa.prototype.unmount=lu.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ts(function(){Ma(null,n,null,null)}),s[er]=null}};function Fa(n){this._internalRoot=n}Fa.prototype.unstable_scheduleHydration=function(n){if(n){var s=jh();n={blockedOn:null,target:n,priority:s};for(var a=0;a<vr.length&&s!==0&&s<vr[a].priority;a++);vr.splice(a,0,n),a===0&&Rh(n)}};function cu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Va(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Gp(){}function Wx(n,s,a,u,f){if(f){if(typeof u=="function"){var y=u;u=function(){var z=$a(x);y.call(z)}}var x=Wp(s,u,n,0,null,!1,!1,"",Gp);return n._reactRootContainer=x,n[er]=x.current,Ko(n.nodeType===8?n.parentNode:n),ts(),x}for(;f=n.lastChild;)n.removeChild(f);if(typeof u=="function"){var T=u;u=function(){var z=$a(j);T.call(z)}}var j=iu(n,0,!1,null,null,!1,!1,"",Gp);return n._reactRootContainer=j,n[er]=j.current,Ko(n.nodeType===8?n.parentNode:n),ts(function(){Ma(s,j,a,u)}),j}function Ua(n,s,a,u,f){var y=a._reactRootContainer;if(y){var x=y;if(typeof f=="function"){var T=f;f=function(){var j=$a(x);T.call(j)}}Ma(s,x,n,f)}else x=Wx(a,s,n,f,u);return $a(x)}Ph=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Ro(s.pendingLanes);a!==0&&(Ll(s,a|1),Zt(s,ct()),(Ve&6)===0&&(Ys=ct()+500,_r()))}break;case 13:ts(function(){var u=sr(n,1);if(u!==null){var f=Bt();Ln(u,n,1,f)}}),au(n,1)}},Il=function(n){if(n.tag===13){var s=sr(n,134217728);if(s!==null){var a=Bt();Ln(s,n,134217728,a)}au(n,134217728)}},Ch=function(n){if(n.tag===13){var s=jr(n),a=sr(n,s);if(a!==null){var u=Bt();Ln(a,n,s,u)}au(n,s)}},jh=function(){return Be},Ah=function(n,s){var a=Be;try{return Be=n,s()}finally{Be=a}},Wr=function(n,s,a){switch(s){case"input":if(It(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==n&&u.form===n.form){var f=sa(u);if(!f)throw Error(r(90));Ie(u),It(u,f)}}}break;case"textarea":fn(n,a);break;case"select":s=a.value,s!=null&&on(n,!!a.multiple,s,!1)}},ne=eu,Re=ts;var qx={usingClientEntryPoint:!1,Events:[Jo,Ds,sa,Y,J,eu]},ui={findFiberByHostInstance:Kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kx={bundleType:ui.bundleType,version:ui.version,rendererPackageName:ui.rendererPackageName,rendererConfig:ui.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=wh(n),n===null?null:n.stateNode},findFiberByHostInstance:ui.findFiberByHostInstance||Hx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var za=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!za.isDisabled&&za.supportsFiber)try{Fi=za.inject(Kx),zn=za}catch{}}return en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qx,en.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cu(s))throw Error(r(200));return Bx(n,s,null,a)},en.createRoot=function(n,s){if(!cu(n))throw Error(r(299));var a=!1,u="",f=Kp;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=iu(n,1,!1,null,null,a,!1,u,f),n[er]=s.current,Ko(n.nodeType===8?n.parentNode:n),new lu(s)},en.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=wh(s),n=n===null?null:n.stateNode,n},en.flushSync=function(n){return ts(n)},en.hydrate=function(n,s,a){if(!Va(s))throw Error(r(200));return Ua(null,n,s,!0,a)},en.hydrateRoot=function(n,s,a){if(!cu(n))throw Error(r(405));var u=a!=null&&a.hydratedSources||null,f=!1,y="",x=Kp;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),s=Wp(s,null,n,1,a??null,f,!1,y,x),n[er]=s.current,Ko(n),u)for(n=0;n<u.length;n++)a=u[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Fa(s)},en.render=function(n,s,a){if(!Va(s))throw Error(r(200));return Ua(null,n,s,!1,a)},en.unmountComponentAtNode=function(n){if(!Va(n))throw Error(r(40));return n._reactRootContainer?(ts(function(){Ua(null,null,n,!1,function(){n._reactRootContainer=null,n[er]=null})}),!0):!1},en.unstable_batchedUpdates=eu,en.unstable_renderSubtreeIntoContainer=function(n,s,a,u){if(!Va(a))throw Error(r(200));if(n==null||n._reactInternals===void 0)throw Error(r(38));return Ua(n,s,a,!1,u)},en.version="18.3.1-next-f1338f8080-20240426",en}var nm;function lv(){if(nm)return hu.exports;nm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),hu.exports=t1(),hu.exports}var rm;function n1(){if(rm)return Ba;rm=1;var t=lv();return Ba.createRoot=t.createRoot,Ba.hydrateRoot=t.hydrateRoot,Ba}var r1=n1(),b=xl();const ce=Td(b),s1={fa:{languagePicker:"",welcome:" ",login:"",signup:"",logout:"",loginSignup:" / ",lists:"",email:"",phone:" ",password:" ",confirmPassword:"  ",name:"",verificationCode:" ",sendCode:"  ",verifyCode:" ",resendCode:"  ",back:"",contactMethod:" ",appTitle:"",appSubtitle:"   ",poemFeed:" ",favorites:"",myLists:" ",searchAndFilter:"  ",searchPlaceholder:"  ...",selectPoet:" ",selectCategory:" ",randomPoems:" ",clearFilters:"  ",addToList:"  ",createNewList:"  ",manageLists:" ",noPoems:"   ",loading:"  ...",loginRequired:"      ",addedToFavorites:"   ",removedFromFavorites:"   ",loggedOut:"   ",loginError:"  ",signupError:"  ",mockDataTitle:"         ",mockDataSubtitle:"        ",emailPlaceholder:"example@email.com",phonePlaceholder:"+989123456789",phoneHint:"        (: +98)",passwordPlaceholder:"  ",confirmPasswordPlaceholder:"  ",namePlaceholder:"    ",verificationCodePlaceholder:"123456",sending:"  ...",verifying:"  ...",loggingIn:"  ...",signingUp:"  ...",nameRequired:"  ",emailRequired:"  ",phoneRequired:"   ",passwordMinLength:"      ",passwordMismatch:"      ",invalidCode:"   ",sendCodeError:"   ",verifyCodeError:"   ",resendCodeError:"    ",codeSent:"   ",codeResent:"    ",signupSuccess:"    ",loginSuccess:"   ",noLists:"   ",noFavorites:"      ",listName:" ",listDescription:"",createList:" ",updateList:" ",deleteList:" ",addPoemToList:"   ",removePoemFromList:"   ",poems:"",unknown:"",audioNotSupported:"      .",loadingPoems:"   ...",sampleMode:" ",apiUnavailable:"API   ",userProfile:" ",manageAccountSettings:"    ",editProfile:" ",darkMode:" ",profileImageUpdated:"     ",profileImageError:"    ",fileSizeError:"       ",fileTypeError:"     ",pleaseLoginAgain:"   ",imageProcessingError:"   ",signOutFromAccount:"   ",dragging:"  ",dragToResize:"    ",signInToAccount:"   ",createNewAccount:"  ",resetPassword:"  ",accessToFavorites:"     ",createNewUserAccount:"    ",enterYourEmail:"    ",enterName:"    ",enterEmail:"    ",enterPassword:"     ",enterPasswordAgain:"      ",processing:"  ...",signIn:"",signInWithGoogle:"  Google",orContinueWith:"  ",createAccount:" ",sendResetLink:"  ",dontHaveAccount:"  ",createAccountLink:" ",haveAccount:"  ",signInLink:"",forgotPassword:"  ",backToSignIn:"  ",resetLinkSent:"        ",orContinueWith:"  ",signInWithGoogle:"  Google",useEmailInstead:"  ",continueWithGoogle:"  Google",passwordRequirements:"      :",minCharacters:"   ",upperCase:"    ",lowerCase:"    ",oneNumber:"  ",specialCharacter:"    (!@#$%^&*)",passwordsMatch:"    ",passwordsDontMatch:"    ",nameRequired:"  ",emailAlreadyExists:"     .    ",signInNow:"  ",invalidCredentials:"     ",emailNotConfirmed:"     ",tooManyRequests:"   .    ",unexpectedError:"   ",loadingFavorites:"   ...",noFavoritesYet:"   ",addFavoritesPrompt:"         ",goBack:"",addedOn:"  ",removedFromFavorites:"   ",favoritePoems:" ",more:"",close:"",poemDetails:" ",poemDetailsSubtitle:"    ",title:"",poet:"",poemText:" ",poemExplanation:"",lines:"",characters:"",noPoemSelected:"  ",noPoemSelectedSubtitle:"      ",generatingExplanation:"   ...",generatingAIExplanation:"      ...",explanationError:"   ",explanationTimeout:"      .    ",tryAgain:" ",noExplanationGenerated:"  ",explanationNote:"         ",aiExplanationTag:"   ",aiDisclaimer:"            ",noContentForTab:"      ",passwordUpdated:"     !"},en:{languagePicker:"Language",welcome:"Welcome",login:"Login",signup:"Sign Up",logout:"Logout",loginSignup:"Login / Sign Up",lists:"Lists",email:"Email",phone:"Phone Number",password:"Password",confirmPassword:"Confirm Password",name:"Name",verificationCode:"Verification Code",sendCode:"Send Verification Code",verifyCode:"Verify Code",resendCode:"Resend Code",back:"Back",contactMethod:"Contact Method",appTitle:"Ganjoor",appSubtitle:"Persian Poetry Digital Library",poemFeed:"Poem Feed",favorites:"Favorites",myLists:"My Lists",searchAndFilter:"Search & Filter",searchPlaceholder:"Search poems...",selectPoet:"Select Poet",selectCategory:"Select Category",randomPoems:"Random Poems",clearFilters:"Clear Filters",addToList:"Add to List",createNewList:"Create New List",manageLists:"Manage Lists",noPoems:"No poems found",loading:"Loading...",loginRequired:"Please login to add to favorites",addedToFavorites:"Added to favorites",removedFromFavorites:"Removed from favorites",loggedOut:"Successfully logged out",loginError:"Login error",signupError:"Signup error",mockDataTitle:" Displaying sample poems from great Persian poets",mockDataSubtitle:"All features including search, filter and favorites are active",emailPlaceholder:"example@email.com",phonePlaceholder:"+989123456789",phoneHint:"Phone number must start with country code (example: +98)",passwordPlaceholder:"At least 6 characters",confirmPasswordPlaceholder:"Repeat password",namePlaceholder:"Enter your name",verificationCodePlaceholder:"123456",sending:"Sending...",verifying:"Verifying...",loggingIn:"Logging in...",signingUp:"Signing up...",nameRequired:"Name is required",emailRequired:"Email is required",phoneRequired:"Phone number is required",passwordMinLength:"Password must be at least 6 characters",passwordMismatch:"Passwords do not match",invalidCode:"Invalid verification code",sendCodeError:"Error sending code",verifyCodeError:"Error verifying code",resendCodeError:"Error resending code",codeSent:"Verification code sent",codeResent:"Verification code resent",signupSuccess:"Successfully signed up",loginSuccess:"Successfully logged in",noLists:"No lists exist",noFavorites:"You haven't added any poems to favorites yet",listName:"List Name",listDescription:"Description",createList:"Create List",updateList:"Update List",deleteList:"Delete List",addPoemToList:"Add Poem to List",removePoemFromList:"Remove Poem from List",poems:"poem",unknown:"Unknown",audioNotSupported:"Your browser does not support audio playback.",loadingPoems:"Loading poems...",sampleMode:"Sample Mode",apiUnavailable:"API Unavailable",userProfile:"User Profile",manageAccountSettings:"Manage account and settings",editProfile:"Edit Profile",darkMode:"Dark Mode",profileImageUpdated:"Profile image updated successfully",profileImageError:"Error updating profile image",fileSizeError:"File size should not exceed 5MB",fileTypeError:"Please select an image file",pleaseLoginAgain:"Please login again",imageProcessingError:"Error processing image",signOutFromAccount:"Sign out of account",dragging:"Dragging",dragToResize:"Drag to resize",signInToAccount:"Sign in to account",createNewAccount:"Create new account",resetPassword:"Reset password",accessToFavorites:"Sign in to access favorites",createNewUserAccount:"Create a new user account",enterYourEmail:"Enter your email",enterName:"Enter your name",enterEmail:"Enter your email",enterPassword:"Enter your password",enterPasswordAgain:"Enter your password again",processing:"Processing...",signIn:"Sign In",signInWithGoogle:"Sign in with Google",orContinueWith:"Or continue with",createAccount:"Create Account",sendResetLink:"Send Reset Link",dontHaveAccount:"Don't have an account?",createAccountLink:"Create Account",haveAccount:"Have an account?",signInLink:"Sign In",forgotPassword:"Forgot Password",backToSignIn:"Back to Sign In",resetLinkSent:"Reset link sent to your email",orContinueWith:"or continue with",signInWithGoogle:"Sign in with Google",useEmailInstead:"Use email instead",continueWithGoogle:"Continue with Google",passwordRequirements:"Password must include:",minCharacters:" At least 8 characters",upperCase:" One uppercase letter",lowerCase:" One lowercase letter",oneNumber:" One number",specialCharacter:" One special character (!@#$%^&*)",passwordsMatch:" Passwords match",passwordsDontMatch:" Passwords don't match",nameRequired:"Name is required",emailAlreadyExists:"This email is already registered. Would you like to sign in?",signInNow:"Sign in now",invalidCredentials:"Invalid email or password",emailNotConfirmed:"Please confirm your email",tooManyRequests:"Too many requests. Please wait a moment",unexpectedError:"An unexpected error occurred",loadingFavorites:"Loading favorites...",noFavoritesYet:"You haven't favorited any poems yet",addFavoritesPrompt:"Add your favorite poems by tapping the heart",goBack:"Go Back",addedOn:"Added on",removedFromFavorites:"Removed from favorites",favoritePoems:"Favorite Poems",more:"More",close:"Close",poemDetails:"Poem Details",poemDetailsSubtitle:"Plain text view of the current poem",title:"Title",poet:"Poet",poemText:"Poem Text",poemExplanation:"Explanation",lines:"Lines",characters:"Characters",noPoemSelected:"No poem selected",noPoemSelectedSubtitle:"View a poem to see its details here",generatingExplanation:"Generating explanation...",generatingAIExplanation:"Generating AI explanation...",explanationError:"Error generating explanation",explanationTimeout:"Request timed out. Please try again",tryAgain:"Try again",noExplanationGenerated:"No explanation generated",explanationNote:"This explanation is based on classical literary analysis",aiExplanationTag:"AI Explanation",aiDisclaimer:"The following explanation is generated by AI and may contain errors",noContentForTab:"No content generated for this section",passwordUpdated:"Password updated successfully!"}},o1=t=>s1[t],ms="pspybykovwrfdxpkjpzd",gs="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBzcHlieWtvdndyZmR4cGtqcHpkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1NDIyMDksImV4cCI6MjA3NTExODIwOX0.NV3irlmKEDcThTGYnHOLy4LRA5qjAxUC4XhkKf4QpKA",Xn=Object.freeze(Object.defineProperty({__proto__:null,projectId:ms,publicAnonKey:gs},Symbol.toStringTag,{value:"Module"})),cv=b.createContext(void 0),$n=()=>{const t=b.useContext(cv);if(t===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return t},i1=({children:t})=>{const[e,r]=b.useState(null),[o,i]=b.useState(!1),[c,l]=b.useState(!0);b.useEffect(()=>{console.log("LanguageProvider: Checking localStorage for saved language...");const g=localStorage.getItem("app-language");g&&["fa","en"].includes(g)?(console.log(" Found saved language in localStorage:",g),r(g),i(!0)):console.log(" No saved language found in localStorage"),l(!1)},[]);const d=async(g,w)=>{if(r(g),localStorage.setItem("app-language",g),i(!0),w)try{await fetch(`https://${ms}.supabase.co/functions/v1/make-server-c192d0ee/user-preference`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${gs}`},body:JSON.stringify({userId:w,preference:"language",value:g})}),console.log(" Language preference saved to server")}catch(S){console.warn("Failed to save language preference to server:",S)}},h=g=>{r(g),localStorage.setItem("app-language",g),i(!0)},p=o1(e||"fa"),v=(e||"fa")==="fa";return m.jsx(cv.Provider,{value:{language:e||"fa",setLanguage:h,t:p,isRTL:v,hasSelectedLanguage:o,isLoadingPreference:c,saveLanguagePreference:d},children:m.jsx("div",{dir:v?"rtl":"ltr",className:v?"rtl":"ltr",children:t})})},a1="modulepreload",l1=function(t){return"/"+t},sm={},it=function(e,r,o){let i=Promise.resolve();if(r&&r.length>0){let l=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");i=l(r.map(p=>{if(p=l1(p),p in sm)return;sm[p]=!0;const v=p.endsWith(".css"),g=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${g}`))return;const w=document.createElement("link");if(w.rel=v?"stylesheet":a1,v||(w.as="script"),w.crossOrigin="",w.href=p,h&&w.setAttribute("nonce",h),document.head.appendChild(w),v)return new Promise((S,_)=>{w.addEventListener("load",S),w.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${p}`)))})}))}function c(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return i.then(l=>{for(const d of l||[])d.status==="rejected"&&c(d.reason);return e().catch(c)})},c1=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>it(async()=>{const{default:o}=await Promise.resolve().then(()=>ko);return{default:o}},void 0).then(({default:o})=>o(...r)):e=fetch,(...r)=>e(...r)};class Pd extends Error{constructor(e,r="FunctionsError",o){super(e),this.name=r,this.context=o}}class om extends Pd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class im extends Pd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class am extends Pd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Bu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Bu||(Bu={}));var u1=function(t,e,r,o){function i(c){return c instanceof r?c:new r(function(l){l(c)})}return new(r||(r=Promise))(function(c,l){function d(v){try{p(o.next(v))}catch(g){l(g)}}function h(v){try{p(o.throw(v))}catch(g){l(g)}}function p(v){v.done?c(v.value):i(v.value).then(d,h)}p((o=o.apply(t,e||[])).next())})};class d1{constructor(e,{headers:r={},customFetch:o,region:i=Bu.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=c1(o)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return u1(this,arguments,void 0,function*(r,o={}){var i;try{const{headers:c,method:l,body:d,signal:h}=o;let p={},{region:v}=o;v||(v=this.region);const g=new URL(`${this.url}/${r}`);v&&v!=="any"&&(p["x-region"]=v,g.searchParams.set("forceFunctionRegion",v));let w;d&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",w=d):typeof d=="string"?(p["Content-Type"]="text/plain",w=d):typeof FormData<"u"&&d instanceof FormData?w=d:(p["Content-Type"]="application/json",w=JSON.stringify(d)));const S=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),c),body:w,signal:h}).catch(P=>{throw P.name==="AbortError"?P:new om(P)}),_=S.headers.get("x-relay-error");if(_&&_==="true")throw new im(S);if(!S.ok)throw new am(S);let k=((i=S.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),E;return k==="application/json"?E=yield S.json():k==="application/octet-stream"?E=yield S.blob():k==="text/event-stream"?E=S:k==="multipart/form-data"?E=yield S.formData():E=yield S.text(),{data:E,error:null,response:S}}catch(c){return c instanceof Error&&c.name==="AbortError"?{data:null,error:new om(c)}:{data:null,error:c,response:c instanceof am||c instanceof im?c.context:void 0}}})}}var Ct={},Xs={},Qs={},Zs={},eo={},to={},h1=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},wo=h1();const f1=wo.fetch,uv=wo.fetch.bind(wo),dv=wo.Headers,p1=wo.Request,m1=wo.Response,ko=Object.freeze(Object.defineProperty({__proto__:null,Headers:dv,Request:p1,Response:m1,default:uv,fetch:f1},Symbol.toStringTag,{value:"Module"})),g1=Yx(ko);var Ha={},lm;function hv(){if(lm)return Ha;lm=1,Object.defineProperty(Ha,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Ha.default=t,Ha}var cm;function fv(){if(cm)return to;cm=1;var t=to&&to.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(to,"__esModule",{value:!0});const e=t(g1),r=t(hv());class o{constructor(c){var l,d;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(l=c.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=c.signal,this.isMaybeSingle=(d=c.isMaybeSingle)!==null&&d!==void 0?d:!1,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,l){return this.headers=new Headers(this.headers),this.headers.set(c,l),this}then(c,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let h=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var v,g,w,S;let _=null,k=null,E=null,P=p.status,I=p.statusText;if(p.ok){if(this.method!=="HEAD"){const O=await p.text();O===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?k=O:k=JSON.parse(O))}const W=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),V=(w=p.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");W&&V&&V.length>1&&(E=parseInt(V[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(_={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,E=null,P=406,I="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const W=await p.text();try{_=JSON.parse(W),Array.isArray(_)&&p.status===404&&(k=[],_=null,P=200,I="OK")}catch{p.status===404&&W===""?(P=204,I="No Content"):_={message:W}}if(_&&this.isMaybeSingle&&(!((S=_?.details)===null||S===void 0)&&S.includes("0 rows"))&&(_=null,P=200,I="OK"),_&&this.shouldThrowOnError)throw new r.default(_)}return{error:_,data:k,count:E,status:P,statusText:I}});return this.shouldThrowOnError||(h=h.catch(p=>{var v,g,w;return{error:{message:`${(v=p?.name)!==null&&v!==void 0?v:"FetchError"}: ${p?.message}`,details:`${(g=p?.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(w=p?.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),h.then(c,l)}returns(){return this}overrideTypes(){return this}}return to.default=o,to}var um;function pv(){if(um)return eo;um=1;var t=eo&&eo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(eo,"__esModule",{value:!0});const e=t(fv());class r extends e.default{select(i){let c=!1;const l=(i??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:c=!0,nullsFirst:l,foreignTable:d,referencedTable:h=d}={}){const p=h?`${h}.order`:"order",v=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${v?`${v},`:""}${i}.${c?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:c,referencedTable:l=c}={}){const d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${i}`),this}range(i,c,{foreignTable:l,referencedTable:d=l}={}){const h=typeof d>"u"?"offset":`${d}.offset`,p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${i}`),this.url.searchParams.set(p,`${c-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:c=!1,settings:l=!1,buffers:d=!1,wal:h=!1,format:p="text"}={}){var v;const g=[i?"analyze":null,c?"verbose":null,l?"settings":null,d?"buffers":null,h?"wal":null].filter(Boolean).join("|"),w=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${w}"; options=${g};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return eo.default=r,eo}var dm;function Cd(){if(dm)return Zs;dm=1;var t=Zs&&Zs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Zs,"__esModule",{value:!0});const e=t(pv());class r extends e.default{eq(i,c){return this.url.searchParams.append(i,`eq.${c}`),this}neq(i,c){return this.url.searchParams.append(i,`neq.${c}`),this}gt(i,c){return this.url.searchParams.append(i,`gt.${c}`),this}gte(i,c){return this.url.searchParams.append(i,`gte.${c}`),this}lt(i,c){return this.url.searchParams.append(i,`lt.${c}`),this}lte(i,c){return this.url.searchParams.append(i,`lte.${c}`),this}like(i,c){return this.url.searchParams.append(i,`like.${c}`),this}likeAllOf(i,c){return this.url.searchParams.append(i,`like(all).{${c.join(",")}}`),this}likeAnyOf(i,c){return this.url.searchParams.append(i,`like(any).{${c.join(",")}}`),this}ilike(i,c){return this.url.searchParams.append(i,`ilike.${c}`),this}ilikeAllOf(i,c){return this.url.searchParams.append(i,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(i,c){return this.url.searchParams.append(i,`ilike(any).{${c.join(",")}}`),this}is(i,c){return this.url.searchParams.append(i,`is.${c}`),this}in(i,c){const l=Array.from(new Set(c)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,c){return typeof c=="string"?this.url.searchParams.append(i,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(i,`cs.{${c.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(c)}`),this}containedBy(i,c){return typeof c=="string"?this.url.searchParams.append(i,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(i,`cd.{${c.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(c)}`),this}rangeGt(i,c){return this.url.searchParams.append(i,`sr.${c}`),this}rangeGte(i,c){return this.url.searchParams.append(i,`nxl.${c}`),this}rangeLt(i,c){return this.url.searchParams.append(i,`sl.${c}`),this}rangeLte(i,c){return this.url.searchParams.append(i,`nxr.${c}`),this}rangeAdjacent(i,c){return this.url.searchParams.append(i,`adj.${c}`),this}overlaps(i,c){return typeof c=="string"?this.url.searchParams.append(i,`ov.${c}`):this.url.searchParams.append(i,`ov.{${c.join(",")}}`),this}textSearch(i,c,{config:l,type:d}={}){let h="";d==="plain"?h="pl":d==="phrase"?h="ph":d==="websearch"&&(h="w");const p=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${h}fts${p}.${c}`),this}match(i){return Object.entries(i).forEach(([c,l])=>{this.url.searchParams.append(c,`eq.${l}`)}),this}not(i,c,l){return this.url.searchParams.append(i,`not.${c}.${l}`),this}or(i,{foreignTable:c,referencedTable:l=c}={}){const d=l?`${l}.or`:"or";return this.url.searchParams.append(d,`(${i})`),this}filter(i,c,l){return this.url.searchParams.append(i,`${c}.${l}`),this}}return Zs.default=r,Zs}var hm;function mv(){if(hm)return Qs;hm=1;var t=Qs&&Qs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Qs,"__esModule",{value:!0});const e=t(Cd());class r{constructor(i,{headers:c={},schema:l,fetch:d}){this.url=i,this.headers=new Headers(c),this.schema=l,this.fetch=d}select(i,c){const{head:l=!1,count:d}=c??{},h=l?"HEAD":"GET";let p=!1;const v=(i??"*").split("").map(g=>/\s/.test(g)&&!p?"":(g==='"'&&(p=!p),g)).join("");return this.url.searchParams.set("select",v),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:c,defaultToNull:l=!0}={}){var d;const h="POST";if(c&&this.headers.append("Prefer",`count=${c}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((v,g)=>v.concat(Object.keys(g)),[]);if(p.length>0){const v=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(i,{onConflict:c,ignoreDuplicates:l=!1,count:d,defaultToNull:h=!0}={}){var p;const v="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const g=i.reduce((w,S)=>w.concat(Object.keys(S)),[]);if(g.length>0){const w=[...new Set(g)].map(S=>`"${S}"`);this.url.searchParams.set("columns",w.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(i,{count:c}={}){var l;const d="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:i}={}){var c;const l="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return Qs.default=r,Qs}var fm;function v1(){if(fm)return Xs;fm=1;var t=Xs&&Xs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Xs,"__esModule",{value:!0});const e=t(mv()),r=t(Cd());class o{constructor(c,{headers:l={},schema:d,fetch:h}={}){this.url=c,this.headers=new Headers(l),this.schemaName=d,this.fetch=h}from(c){const l=new URL(`${this.url}/${c}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new o(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,l={},{head:d=!1,get:h=!1,count:p}={}){var v;let g;const w=new URL(`${this.url}/rpc/${c}`);let S;d||h?(g=d?"HEAD":"GET",Object.entries(l).filter(([k,E])=>E!==void 0).map(([k,E])=>[k,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([k,E])=>{w.searchParams.append(k,E)})):(g="POST",S=l);const _=new Headers(this.headers);return p&&_.set("Prefer",`count=${p}`),new r.default({method:g,url:w,headers:_,schema:this.schemaName,body:S,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return Xs.default=o,Xs}var pm;function y1(){if(pm)return Ct;pm=1;var t=Ct&&Ct.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.PostgrestError=Ct.PostgrestBuilder=Ct.PostgrestTransformBuilder=Ct.PostgrestFilterBuilder=Ct.PostgrestQueryBuilder=Ct.PostgrestClient=void 0;const e=t(v1());Ct.PostgrestClient=e.default;const r=t(mv());Ct.PostgrestQueryBuilder=r.default;const o=t(Cd());Ct.PostgrestFilterBuilder=o.default;const i=t(pv());Ct.PostgrestTransformBuilder=i.default;const c=t(fv());Ct.PostgrestBuilder=c.default;const l=t(hv());return Ct.PostgrestError=l.default,Ct.default={PostgrestClient:e.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:c.default,PostgrestError:l.default},Ct}var w1=y1();const x1=Td(w1),{PostgrestClient:b1,PostgrestQueryBuilder:Fj,PostgrestFilterBuilder:Vj,PostgrestTransformBuilder:Uj,PostgrestBuilder:zj,PostgrestError:Bj}=x1;class S1{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const o=r.node,i=parseInt(o.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const o=this.getWebSocketConstructor();return new o(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const _1="2.74.0",k1=`realtime-js/${_1}`,E1="1.0.0",Hu=1e4,T1=1e3,P1=100;var gi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(gi||(gi={}));var _t;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(_t||(_t={}));var Mn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Mn||(Mn={}));var Wu;(function(t){t.websocket="websocket"})(Wu||(Wu={}));var fs;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(fs||(fs={}));class C1{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),o=new TextDecoder;return this._decodeBroadcast(e,r,o)}_decodeBroadcast(e,r,o){const i=r.getUint8(1),c=r.getUint8(2);let l=this.HEADER_LENGTH+2;const d=o.decode(e.slice(l,l+i));l=l+i;const h=o.decode(e.slice(l,l+c));l=l+c;const p=JSON.parse(o.decode(e.slice(l,e.byteLength)));return{ref:null,topic:d,event:h,payload:p}}}class gv{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var qe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(qe||(qe={}));const mm=(t,e,r={})=>{var o;const i=(o=r.skipTypes)!==null&&o!==void 0?o:[];return e?Object.keys(e).reduce((c,l)=>(c[l]=j1(l,t,e,i),c),{}):{}},j1=(t,e,r,o)=>{const i=e.find(d=>d.name===t),c=i?.type,l=r[t];return c&&!o.includes(c)?vv(c,l):qu(l)},vv=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return L1(e,r)}switch(t){case qe.bool:return A1(e);case qe.float4:case qe.float8:case qe.int2:case qe.int4:case qe.int8:case qe.numeric:case qe.oid:return N1(e);case qe.json:case qe.jsonb:return R1(e);case qe.timestamp:return I1(e);case qe.abstime:case qe.date:case qe.daterange:case qe.int4range:case qe.int8range:case qe.money:case qe.reltime:case qe.text:case qe.time:case qe.timestamptz:case qe.timetz:case qe.tsrange:case qe.tstzrange:return qu(e);default:return qu(e)}},qu=t=>t,A1=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},N1=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},R1=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},L1=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,o=t[r];if(t[0]==="{"&&o==="}"){let c;const l=t.slice(1,r);try{c=JSON.parse("["+l+"]")}catch{c=l?l.split(","):[]}return c.map(d=>vv(e,d))}return t},I1=t=>typeof t=="string"?t.replace(" ","T"):t,yv=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class mu{constructor(e,r,o={},i=Hu){this.channel=e,this.event=r,this.payload=o,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var o;return this._hasReceived(e)&&r((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(o=>o.status===e).forEach(o=>o.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var gm;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(gm||(gm={}));class vi{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},i=>{const{onJoin:c,onLeave:l,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vi.syncState(this.state,i,c,l),this.pendingDiffs.forEach(h=>{this.state=vi.syncDiff(this.state,h,c,l)}),this.pendingDiffs=[],d()}),this.channel._on(o.diff,{},i=>{const{onJoin:c,onLeave:l,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=vi.syncDiff(this.state,i,c,l),d())}),this.onJoin((i,c,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:c,newPresences:l})}),this.onLeave((i,c,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:c,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,o,i){const c=this.cloneDeep(e),l=this.transformState(r),d={},h={};return this.map(c,(p,v)=>{l[p]||(h[p]=v)}),this.map(l,(p,v)=>{const g=c[p];if(g){const w=v.map(E=>E.presence_ref),S=g.map(E=>E.presence_ref),_=v.filter(E=>S.indexOf(E.presence_ref)<0),k=g.filter(E=>w.indexOf(E.presence_ref)<0);_.length>0&&(d[p]=_),k.length>0&&(h[p]=k)}else d[p]=v}),this.syncDiff(c,{joins:d,leaves:h},o,i)}static syncDiff(e,r,o,i){const{joins:c,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return o||(o=()=>{}),i||(i=()=>{}),this.map(c,(d,h)=>{var p;const v=(p=e[d])!==null&&p!==void 0?p:[];if(e[d]=this.cloneDeep(h),v.length>0){const g=e[d].map(S=>S.presence_ref),w=v.filter(S=>g.indexOf(S.presence_ref)<0);e[d].unshift(...w)}o(d,v,h)}),this.map(l,(d,h)=>{let p=e[d];if(!p)return;const v=h.map(g=>g.presence_ref);p=p.filter(g=>v.indexOf(g.presence_ref)<0),e[d]=p,i(d,p,h),p.length===0&&delete e[d]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(o=>r(o,e[o]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,o)=>{const i=e[o];return"metas"in i?r[o]=i.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[o]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var vm;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(vm||(vm={}));var yi;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(yi||(yi={}));var cr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(cr||(cr={}));class jd{constructor(e,r={config:{}},o){var i,c;if(this.topic=e,this.params=r,this.socket=o,this.bindings={},this.state=_t.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new mu(this,Mn.join,this.params,this.timeout),this.rejoinTimer=new gv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_t.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_t.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Mn.reply,{},(l,d)=>{this._trigger(this._replyEventName(d),l)}),this.presence=new vi(this),this.broadcastEndpointURL=yv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var o,i,c;if(this.socket.isConnected()||this.socket.connect(),this.state==_t.closed){const{config:{broadcast:l,presence:d,private:h}}=this.params,p=(i=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(S=>S.filter))!==null&&i!==void 0?i:[],v=!!this.bindings[yi.PRESENCE]&&this.bindings[yi.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,g={},w={broadcast:l,presence:Object.assign(Object.assign({},d),{enabled:v}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(S=>e?.(cr.CHANNEL_ERROR,S)),this._onClose(()=>e?.(cr.CLOSED)),this.updateJoinPayload(Object.assign({config:w},g)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:S})=>{var _;if(this.socket.setAuth(),S===void 0){e?.(cr.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,E=(_=k?.length)!==null&&_!==void 0?_:0,P=[];for(let I=0;I<E;I++){const A=k[I],{filter:{event:W,schema:V,table:O,filter:H}}=A,M=S&&S[I];if(M&&M.event===W&&M.schema===V&&M.table===O&&M.filter===H)P.push(Object.assign(Object.assign({},A),{id:M.id}));else{this.unsubscribe(),this.state=_t.errored,e?.(cr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,e&&e(cr.SUBSCRIBED);return}}).receive("error",S=>{this.state=_t.errored,e?.(cr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{e?.(cr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,o){return this.state===_t.joined&&e===yi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,o)}async send(e,r={}){var o,i;if(!this._canPush()&&e.type==="broadcast"){const{event:c,payload:l}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:l,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);return await((i=p.body)===null||i===void 0?void 0:i.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var l,d,h;const p=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(l=this.params)===null||l===void 0?void 0:l.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&c("ok"),p.receive("ok",()=>c("ok")),p.receive("error",()=>c("error")),p.receive("timeout",()=>c("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=_t.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Mn.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(i=>{o=new mu(this,Mn.leave,{},e),o.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=_t.closed,this.bindings={}}async _fetchWithTimeout(e,r,o){const i=new AbortController,c=setTimeout(()=>i.abort(),o),l=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(c),l}_push(e,r,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new mu(this,e,r,o);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>P1){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,o){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,o){var i,c;const l=e.toLocaleLowerCase(),{close:d,error:h,leave:p,join:v}=Mn;if(o&&[d,h,p,v].indexOf(l)>=0&&o!==this._joinRef())return;let w=this._onMessage(l,r,o);if(r&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(S=>{var _,k,E;return((_=S.filter)===null||_===void 0?void 0:_.event)==="*"||((E=(k=S.filter)===null||k===void 0?void 0:k.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===l}).map(S=>S.callback(w,o)):(c=this.bindings[l])===null||c===void 0||c.filter(S=>{var _,k,E,P,I,A;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in S){const W=S.id,V=(_=S.filter)===null||_===void 0?void 0:_.event;return W&&((k=r.ids)===null||k===void 0?void 0:k.includes(W))&&(V==="*"||V?.toLocaleLowerCase()===((E=r.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const W=(I=(P=S?.filter)===null||P===void 0?void 0:P.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return W==="*"||W===((A=r?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===l}).map(S=>{if(typeof w=="object"&&"ids"in w){const _=w.data,{schema:k,table:E,commit_timestamp:P,type:I,errors:A}=_;w=Object.assign(Object.assign({},{schema:k,table:E,commit_timestamp:P,eventType:I,new:{},old:{},errors:A}),this._getPayloadRecords(_))}S.callback(w,o)})}_isClosed(){return this.state===_t.closed}_isJoined(){return this.state===_t.joined}_isJoining(){return this.state===_t.joining}_isLeaving(){return this.state===_t.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,o){const i=e.toLocaleLowerCase(),c={type:i,filter:r,callback:o};return this.bindings[i]?this.bindings[i].push(c):this.bindings[i]=[c],this}_off(e,r){const o=e.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(i=>{var c;return!(((c=i.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===o&&jd.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const o in e)if(e[o]!==r[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Mn.close,{},e)}_onError(e){this._on(Mn.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_t.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=mm(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=mm(e.columns,e.old_record)),r}}const gu=()=>{},Wa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},O1=[1e3,2e3,5e3,1e4],D1=1e4,M1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $1{constructor(e,r){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Hu,this.transport=null,this.heartbeatIntervalMs=Wa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gu,this.ref=0,this.reconnectTimer=null,this.logger=gu,this.conn=null,this.sendBuffer=[],this.serializer=new C1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let c;return i?c=i:typeof fetch>"u"?c=(...l)=>it(async()=>{const{default:d}=await Promise.resolve().then(()=>ko);return{default:d}},void 0).then(({default:d})=>d(...l)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...l)=>c(...l)},!(!((o=r?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Wu.websocket}`,this.httpEndpoint=yv(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=S1.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:E1}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,o){this.logger(e,r,o)}connectionState(){switch(this.conn&&this.conn.readyState){case gi.connecting:return fs.Connecting;case gi.open:return fs.Open;case gi.closing:return fs.Closing;default:return fs.Closed}}isConnected(){return this.connectionState()===fs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const o=`realtime:${e}`,i=this.getChannels().find(c=>c.topic===o);if(i)return i;{const c=new jd(`realtime:${e}`,r,this);return this.channels.push(c),c}}push(e){const{topic:r,event:o,payload:i,ref:c}=e,l=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${r} ${o} (${c})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(T1,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Wa.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(o=>o.topic===e&&(o._isJoined()||o._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:i,payload:c,ref:l}=r,d=l?`(${l})`:"",h=c.status||"";this.log("receive",`${h} ${o} ${i} ${d}`.trim(),c),this.channels.filter(p=>p._isMember(o)).forEach(p=>p._trigger(i,c,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Mn.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const o=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${o}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const o=new Blob([M1],{type:"application/javascript"});r=URL.createObjectURL(o)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(o=>{const i={access_token:r,version:k1};r&&o.updateJoinPayload(i),o.joinedOnce&&o._isJoined()&&o._push(Mn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(o=>{try{o(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(o){this.log("error",`error triggering ${e} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new gv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Wa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,o,i,c,l,d,h,p,v;if(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(o=e?.timeout)!==null&&o!==void 0?o:Hu,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:Wa.HEARTBEAT_INTERVAL,this.worker=(c=e?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:gu,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e?.reconnectAfterMs)!==null&&h!==void 0?h:(g=>O1[g-1]||D1),this.encode=(p=e?.encode)!==null&&p!==void 0?p:((g,w)=>w(JSON.stringify(g))),this.decode=(v=e?.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Ad extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function gt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class F1 extends Ad{constructor(e,r,o){super(e),this.name="StorageApiError",this.status=r,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ku extends Ad{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var V1=function(t,e,r,o){function i(c){return c instanceof r?c:new r(function(l){l(c)})}return new(r||(r=Promise))(function(c,l){function d(v){try{p(o.next(v))}catch(g){l(g)}}function h(v){try{p(o.throw(v))}catch(g){l(g)}}function p(v){v.done?c(v.value):i(v.value).then(d,h)}p((o=o.apply(t,e||[])).next())})};const wv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>it(async()=>{const{default:o}=await Promise.resolve().then(()=>ko);return{default:o}},void 0).then(({default:o})=>o(...r)):e=fetch,(...r)=>e(...r)},U1=()=>V1(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield it(()=>Promise.resolve().then(()=>ko),void 0)).Response:Response}),Gu=t=>{if(Array.isArray(t))return t.map(r=>Gu(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,o])=>{const i=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));e[i]=Gu(o)}),e},z1=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var ks=function(t,e,r,o){function i(c){return c instanceof r?c:new r(function(l){l(c)})}return new(r||(r=Promise))(function(c,l){function d(v){try{p(o.next(v))}catch(g){l(g)}}function h(v){try{p(o.throw(v))}catch(g){l(g)}}function p(v){v.done?c(v.value):i(v.value).then(d,h)}p((o=o.apply(t,e||[])).next())})};const vu=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),B1=(t,e,r)=>ks(void 0,void 0,void 0,function*(){const o=yield U1();t instanceof o&&!r?.noResolveJson?t.json().then(i=>{const c=t.status||500,l=i?.statusCode||c+"";e(new F1(vu(i),c,l))}).catch(i=>{e(new Ku(vu(i),i))}):e(new Ku(vu(t),t))}),H1=(t,e,r,o)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||!o?i:(z1(o)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(o)):i.body=o,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function Ri(t,e,r,o,i,c){return ks(this,void 0,void 0,function*(){return new Promise((l,d)=>{t(r,H1(e,o,i,c)).then(h=>{if(!h.ok)throw h;return o?.noResolveJson?h:h.json()}).then(h=>l(h)).catch(h=>B1(h,d,o))})})}function cl(t,e,r,o){return ks(this,void 0,void 0,function*(){return Ri(t,"GET",e,r,o)})}function Gn(t,e,r,o,i){return ks(this,void 0,void 0,function*(){return Ri(t,"POST",e,o,i,r)})}function Yu(t,e,r,o,i){return ks(this,void 0,void 0,function*(){return Ri(t,"PUT",e,o,i,r)})}function W1(t,e,r,o){return ks(this,void 0,void 0,function*(){return Ri(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),o)})}function xv(t,e,r,o,i){return ks(this,void 0,void 0,function*(){return Ri(t,"DELETE",e,o,i,r)})}var q1=function(t,e,r,o){function i(c){return c instanceof r?c:new r(function(l){l(c)})}return new(r||(r=Promise))(function(c,l){function d(v){try{p(o.next(v))}catch(g){l(g)}}function h(v){try{p(o.throw(v))}catch(g){l(g)}}function p(v){v.done?c(v.value):i(v.value).then(d,h)}p((o=o.apply(t,e||[])).next())})};class K1{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return q1(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(gt(e))return{data:null,error:e};throw e}})}}var G1=function(t,e,r,o){function i(c){return c instanceof r?c:new r(function(l){l(c)})}return new(r||(r=Promise))(function(c,l){function d(v){try{p(o.next(v))}catch(g){l(g)}}function h(v){try{p(o.throw(v))}catch(g){l(g)}}function p(v){v.done?c(v.value):i(v.value).then(d,h)}p((o=o.apply(t,e||[])).next())})};class Y1{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}asStream(){return new K1(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.execute().then(e,r)}execute(){return G1(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(gt(e))return{data:null,error:e};throw e}})}}var tn=function(t,e,r,o){function i(c){return c instanceof r?c:new r(function(l){l(c)})}return new(r||(r=Promise))(function(c,l){function d(v){try{p(o.next(v))}catch(g){l(g)}}function h(v){try{p(o.throw(v))}catch(g){l(g)}}function p(v){v.done?c(v.value):i(v.value).then(d,h)}p((o=o.apply(t,e||[])).next())})};const J1={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ym={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class X1{constructor(e,r={},o,i){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=o,this.fetch=wv(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,o,i){return tn(this,void 0,void 0,function*(){try{let c;const l=Object.assign(Object.assign({},ym),i);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&o instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),h&&c.append("metadata",this.encodeMetadata(h)),c.append("",o)):typeof FormData<"u"&&o instanceof FormData?(c=o,c.append("cacheControl",l.cacheControl),h&&c.append("metadata",this.encodeMetadata(h))):(c=o,d["cache-control"]=`max-age=${l.cacheControl}`,d["content-type"]=l.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),i?.headers&&(d=Object.assign(Object.assign({},d),i.headers));const p=this._removeEmptyFolders(r),v=this._getFinalPath(p),g=yield(e=="PUT"?Yu:Gn)(this.fetch,`${this.url}/object/${v}`,c,Object.assign({headers:d},l?.duplex?{duplex:l.duplex}:{}));return{data:{path:p,id:g.Id,fullPath:g.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(gt(c))return{data:null,error:c};throw c}})}upload(e,r,o){return tn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,o)})}uploadToSignedUrl(e,r,o,i){return tn(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(e),l=this._getFinalPath(c),d=new URL(this.url+`/object/upload/sign/${l}`);d.searchParams.set("token",r);try{let h;const p=Object.assign({upsert:ym.upsert},i),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&o instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",o)):typeof FormData<"u"&&o instanceof FormData?(h=o,h.append("cacheControl",p.cacheControl)):(h=o,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType);const g=yield Yu(this.fetch,d.toString(),h,{headers:v});return{data:{path:c,fullPath:g.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(gt(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,r){return tn(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e);const i=Object.assign({},this.headers);r?.upsert&&(i["x-upsert"]="true");const c=yield Gn(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:i}),l=new URL(this.url+c.url),d=l.searchParams.get("token");if(!d)throw new Ad("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:d},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}update(e,r,o){return tn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,o)})}move(e,r,o){return tn(this,void 0,void 0,function*(){try{return{data:yield Gn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gt(i))return{data:null,error:i};throw i}})}copy(e,r,o){return tn(this,void 0,void 0,function*(){try{return{data:{path:(yield Gn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gt(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,o){return tn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),c=yield Gn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const l=o?.download?`&download=${o.download===!0?"":o.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${l}`)},{data:c,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gt(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,o){return tn(this,void 0,void 0,function*(){try{const i=yield Gn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),c=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${c}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gt(i))return{data:null,error:i};throw i}})}download(e,r){const i=typeof r?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(r?.transform||{}),l=c?`?${c}`:"",d=this._getFinalPath(e),h=()=>cl(this.fetch,`${this.url}/${i}/${d}${l}`,{headers:this.headers,noResolveJson:!0});return new Y1(h,this.shouldThrowOnError)}info(e){return tn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const o=yield cl(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Gu(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}exists(e){return tn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield W1(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o)&&o instanceof Ku){const i=o.originalError;if([400,404].includes(i?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(e,r){const o=this._getFinalPath(e),i=[],c=r?.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&i.push(c);const d=typeof r?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(r?.transform||{});h!==""&&i.push(h);let p=i.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${o}${p}`)}}}remove(e){return tn(this,void 0,void 0,function*(){try{return{data:yield xv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}})}list(e,r,o){return tn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},J1),r),{prefix:e||""});return{data:yield Gn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},o),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gt(i))return{data:null,error:i};throw i}})}listV2(e,r){return tn(this,void 0,void 0,function*(){try{const o=Object.assign({},e);return{data:yield Gn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Q1="2.74.0",Z1={"X-Client-Info":`storage-js/${Q1}`};var no=function(t,e,r,o){function i(c){return c instanceof r?c:new r(function(l){l(c)})}return new(r||(r=Promise))(function(c,l){function d(v){try{p(o.next(v))}catch(g){l(g)}}function h(v){try{p(o.throw(v))}catch(g){l(g)}}function p(v){v.done?c(v.value):i(v.value).then(d,h)}p((o=o.apply(t,e||[])).next())})};class eb{constructor(e,r={},o,i){this.shouldThrowOnError=!1;const c=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Z1),r),this.fetch=wv(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return no(this,void 0,void 0,function*(){try{return{data:yield cl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(gt(e))return{data:null,error:e};throw e}})}getBucket(e){return no(this,void 0,void 0,function*(){try{return{data:yield cl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}})}createBucket(e){return no(this,arguments,void 0,function*(r,o={public:!1}){try{return{data:yield Gn(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gt(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return no(this,void 0,void 0,function*(){try{return{data:yield Yu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}emptyBucket(e){return no(this,void 0,void 0,function*(){try{return{data:yield Gn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return no(this,void 0,void 0,function*(){try{return{data:yield xv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}})}}class tb extends eb{constructor(e,r={},o,i){super(e,r,o,i)}from(e){return new X1(this.url,this.headers,e,this.fetch)}}const nb="2.74.0";let pi="";typeof Deno<"u"?pi="deno":typeof document<"u"?pi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?pi="react-native":pi="node";const rb={"X-Client-Info":`supabase-js-${pi}/${nb}`},sb={headers:rb},ob={schema:"public"},ib={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ab={};var lb=function(t,e,r,o){function i(c){return c instanceof r?c:new r(function(l){l(c)})}return new(r||(r=Promise))(function(c,l){function d(v){try{p(o.next(v))}catch(g){l(g)}}function h(v){try{p(o.throw(v))}catch(g){l(g)}}function p(v){v.done?c(v.value):i(v.value).then(d,h)}p((o=o.apply(t,e||[])).next())})};const cb=t=>{let e;return t?e=t:typeof fetch>"u"?e=uv:e=fetch,(...r)=>e(...r)},ub=()=>typeof Headers>"u"?dv:Headers,db=(t,e,r)=>{const o=cb(r),i=ub();return(c,l)=>lb(void 0,void 0,void 0,function*(){var d;const h=(d=yield e())!==null&&d!==void 0?d:t;let p=new i(l?.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),o(c,Object.assign(Object.assign({},l),{headers:p}))})};var hb=function(t,e,r,o){function i(c){return c instanceof r?c:new r(function(l){l(c)})}return new(r||(r=Promise))(function(c,l){function d(v){try{p(o.next(v))}catch(g){l(g)}}function h(v){try{p(o.throw(v))}catch(g){l(g)}}function p(v){v.done?c(v.value):i(v.value).then(d,h)}p((o=o.apply(t,e||[])).next())})};function fb(t){return t.endsWith("/")?t:t+"/"}function pb(t,e){var r,o;const{db:i,auth:c,realtime:l,global:d}=t,{db:h,auth:p,realtime:v,global:g}=e,w={db:Object.assign(Object.assign({},h),i),auth:Object.assign(Object.assign({},p),c),realtime:Object.assign(Object.assign({},v),l),storage:{},global:Object.assign(Object.assign(Object.assign({},g),d),{headers:Object.assign(Object.assign({},(r=g?.headers)!==null&&r!==void 0?r:{}),(o=d?.headers)!==null&&o!==void 0?o:{})}),accessToken:()=>hb(this,void 0,void 0,function*(){return""})};return t.accessToken?w.accessToken=t.accessToken:delete w.accessToken,w}function mb(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(fb(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const bv="2.74.0",co=30*1e3,Ju=3,yu=Ju*co,gb="http://localhost:9999",vb="supabase.auth.token",yb={"X-Client-Info":`gotrue-js/${bv}`},Xu="X-Supabase-Api-Version",Sv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},wb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xb=600*1e3;class ki extends Error{constructor(e,r,o){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=o}}function je(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class bb extends ki{constructor(e,r,o){super(e,r,o),this.name="AuthApiError",this.status=r,this.code=o}}function Sb(t){return je(t)&&t.name==="AuthApiError"}class ps extends ki{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Ur extends ki{constructor(e,r,o,i){super(e,o,i),this.name=r,this.status=o}}class Or extends Ur{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _b(t){return je(t)&&t.name==="AuthSessionMissingError"}class ro extends Ur{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qa extends Ur{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ka extends Ur{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function kb(t){return je(t)&&t.name==="AuthImplicitGrantRedirectError"}class wm extends Ur{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qu extends Ur{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function wu(t){return je(t)&&t.name==="AuthRetryableFetchError"}class xm extends Ur{constructor(e,r,o){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=o}}class Zu extends Ur{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ul="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bm=` 	
\r=`.split(""),Eb=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<bm.length;e+=1)t[bm[e].charCodeAt(0)]=-2;for(let e=0;e<ul.length;e+=1)t[ul[e].charCodeAt(0)]=e;return t})();function Sm(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;r(ul[o]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;r(ul[o]),e.queuedBits-=6}}function _v(t,e,r){const o=Eb[t];if(o>-1)for(e.queue=e.queue<<6|o,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function _m(t){const e=[],r=l=>{e.push(String.fromCodePoint(l))},o={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},c=l=>{Cb(l,o,r)};for(let l=0;l<t.length;l+=1)_v(t.charCodeAt(l),i,c);return e.join("")}function Tb(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Pb(t,e){for(let r=0;r<t.length;r+=1){let o=t.charCodeAt(r);if(o>55295&&o<=56319){const i=(o-55296)*1024&65535;o=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}Tb(o,e)}}function Cb(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let o=1;o<6;o+=1)if((t>>7-o&1)===0){e.utf8seq=o;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function vo(t){const e=[],r={queue:0,queuedBits:0},o=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)_v(t.charCodeAt(i),r,o);return new Uint8Array(e)}function jb(t){const e=[];return Pb(t,r=>e.push(r)),new Uint8Array(e)}function vs(t){const e=[],r={queue:0,queuedBits:0},o=i=>{e.push(i)};return t.forEach(i=>Sm(i,r,o)),Sm(null,r,o),e.join("")}function Ab(t){return Math.round(Date.now()/1e3)+t}function Nb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const hn=()=>typeof window<"u"&&typeof document<"u",os={tested:!1,writable:!1},kv=()=>{if(!hn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(os.tested)return os.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),os.tested=!0,os.writable=!0}catch{os.tested=!0,os.writable=!1}return os.writable};function Rb(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,c)=>{e[c]=i})}catch{}return r.searchParams.forEach((o,i)=>{e[i]=o}),e}const Ev=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>it(async()=>{const{default:o}=await Promise.resolve().then(()=>ko);return{default:o}},void 0).then(({default:o})=>o(...r)):e=fetch,(...r)=>e(...r)},Lb=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",uo=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},is=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Lr=async(t,e)=>{await t.removeItem(e)};class bl{constructor(){this.promise=new bl.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}bl.promiseConstructor=Promise;function xu(t){const e=t.split(".");if(e.length!==3)throw new Zu("Invalid JWT structure");for(let o=0;o<e.length;o++)if(!wb.test(e[o]))throw new Zu("JWT not in base64url format");return{header:JSON.parse(_m(e[0])),payload:JSON.parse(_m(e[1])),signature:vo(e[2]),raw:{header:e[0],payload:e[1]}}}async function Ib(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Ob(t,e){return new Promise((o,i)=>{(async()=>{for(let c=0;c<1/0;c++)try{const l=await t(c);if(!e(c,null,l)){o(l);return}}catch(l){if(!e(c,l)){i(l);return}}})()})}function Db(t){return("0"+t.toString(16)).substr(-2)}function Mb(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=r.length;let i="";for(let c=0;c<56;c++)i+=r.charAt(Math.floor(Math.random()*o));return i}return crypto.getRandomValues(e),Array.from(e,Db).join("")}async function $b(t){const r=new TextEncoder().encode(t),o=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(o);return Array.from(i).map(c=>String.fromCharCode(c)).join("")}async function Fb(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await $b(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function so(t,e,r=!1){const o=Mb();let i=o;r&&(i+="/PASSWORD_RECOVERY"),await uo(t,`${e}-code-verifier`,i);const c=await Fb(o);return[c,o===c?"plain":"s256"]}const Vb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ub(t){const e=t.headers.get(Xu);if(!e||!e.match(Vb))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function zb(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Bb(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Hb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function oo(t){if(!Hb.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function bu(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function km(t){return JSON.parse(JSON.stringify(t))}var Wb=function(t,e){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(r[o[i]]=t[o[i]]);return r};const ds=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),qb=[502,503,504];async function Em(t){var e;if(!Lb(t))throw new Qu(ds(t),0);if(qb.includes(t.status))throw new Qu(ds(t),t.status);let r;try{r=await t.json()}catch(c){throw new ps(ds(c),c)}let o;const i=Ub(t);if(i&&i.getTime()>=Sv["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?o=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(o=r.error_code),o){if(o==="weak_password")throw new xm(ds(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(o==="session_not_found")throw new Or}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,l)=>c&&typeof l=="string",!0))throw new xm(ds(r),t.status,r.weak_password.reasons);throw new bb(ds(r),t.status||500,o)}const Kb=(t,e,r,o)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(o),Object.assign(Object.assign({},i),r))};async function Le(t,e,r,o){var i;const c=Object.assign({},o?.headers);c[Xu]||(c[Xu]=Sv["2024-01-01"].name),o?.jwt&&(c.Authorization=`Bearer ${o.jwt}`);const l=(i=o?.query)!==null&&i!==void 0?i:{};o?.redirectTo&&(l.redirect_to=o.redirectTo);const d=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await Gb(t,e,r+d,{headers:c,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(h):{data:Object.assign({},h),error:null}}async function Gb(t,e,r,o,i,c){const l=Kb(e,o,i,c);let d;try{d=await t(r,Object.assign({},l))}catch(h){throw console.error(h),new Qu(ds(h),0)}if(d.ok||await Em(d),o?.noResolveJson)return d;try{return await d.json()}catch(h){await Em(h)}}function In(t){var e;let r=null;Xb(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Ab(t.expires_in)));const o=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:o},error:null}}function Tm(t){const e=In(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Mr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Yb(t){return{data:t,error:null}}function Jb(t){const{action_link:e,email_otp:r,hashed_token:o,redirect_to:i,verification_type:c}=t,l=Wb(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:r,hashed_token:o,redirect_to:i,verification_type:c},h=Object.assign({},l);return{data:{properties:d,user:h},error:null}}function Pm(t){return t}function Xb(t){return t.access_token&&t.refresh_token&&t.expires_in}const Su=["global","local","others"];var Qb=function(t,e){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(r[o[i]]=t[o[i]]);return r};class Zb{constructor({url:e="",headers:r={},fetch:o}){this.url=e,this.headers=r,this.fetch=Ev(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Su[0]){if(Su.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Su.join(", ")}`);try{return await Le(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(o){if(je(o))return{data:null,error:o};throw o}}async inviteUserByEmail(e,r={}){try{return await Le(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Mr})}catch(o){if(je(o))return{data:{user:null},error:o};throw o}}async generateLink(e){try{const{options:r}=e,o=Qb(e,["options"]),i=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(i.new_email=o?.newEmail,delete i.newEmail),await Le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Jb,redirectTo:r?.redirectTo})}catch(r){if(je(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Le(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Mr})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,o,i,c,l,d,h;try{const p={nextPage:null,lastPage:0,total:0},v=await Le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(c=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&c!==void 0?c:""},xform:Pm});if(v.error)throw v.error;const g=await v.json(),w=(l=v.headers.get("x-total-count"))!==null&&l!==void 0?l:0,S=(h=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return S.length>0&&(S.forEach(_=>{const k=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(_.split(";")[1].split("=")[1]);p[`${E}Page`]=k}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},g),p),error:null}}catch(p){if(je(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){oo(e);try{return await Le(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Mr})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){oo(e);try{return await Le(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Mr})}catch(o){if(je(o))return{data:{user:null},error:o};throw o}}async deleteUser(e,r=!1){oo(e);try{return await Le(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Mr})}catch(o){if(je(o))return{data:{user:null},error:o};throw o}}async _listFactors(e){oo(e.userId);try{const{data:r,error:o}=await Le(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:o}}catch(r){if(je(r))return{data:null,error:r};throw r}}async _deleteFactor(e){oo(e.userId),oo(e.id);try{return{data:await Le(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,o,i,c,l,d,h;try{const p={nextPage:null,lastPage:0,total:0},v=await Le(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(c=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&c!==void 0?c:""},xform:Pm});if(v.error)throw v.error;const g=await v.json(),w=(l=v.headers.get("x-total-count"))!==null&&l!==void 0?l:0,S=(h=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return S.length>0&&(S.forEach(_=>{const k=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(_.split(";")[1].split("=")[1]);p[`${E}Page`]=k}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},g),p),error:null}}catch(p){if(je(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await Le(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(je(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await Le(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(je(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Le(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(je(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await Le(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(je(r))return{data:null,error:r};throw r}}}function Cm(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const io={debug:!!(globalThis&&kv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Tv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class eS extends Tv{}async function tS(t,e,r){io.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const o=new globalThis.AbortController;return e>0&&setTimeout(()=>{o.abort(),io.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async i=>{if(i){io.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{io.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw io.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new eS(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(io.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function nS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Pv(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function rS(t){return parseInt(t,16)}function sS(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,o=>o.toString(16).padStart(2,"0")).join("")}function oS(t){var e;const{chainId:r,domain:o,expirationTime:i,issuedAt:c=new Date,nonce:l,notBefore:d,requestId:h,resources:p,scheme:v,uri:g,version:w}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const S=Pv(t.address),_=v?`${v}://${o}`:o,k=t.statement?`${t.statement}
`:"",E=`${_} wants you to sign in with your Ethereum account:
${S}

${k}`;let P=`URI: ${g}
Version: ${w}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${c.toISOString()}`;if(i&&(P+=`
Expiration Time: ${i.toISOString()}`),d&&(P+=`
Not Before: ${d.toISOString()}`),h&&(P+=`
Request ID: ${h}`),p){let I=`
Resources:`;for(const A of p){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);I+=`
- ${A}`}P+=I}return`${E}
${P}`}class mt extends Error{constructor({message:e,code:r,cause:o,name:i}){var c;super(e,{cause:o}),this.__isWebAuthnError=!0,this.name=(c=i??(o instanceof Error?o.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=r}}class dl extends mt{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function iS({error:t,options:e}){var r,o,i;const{publicKey:c}=e;if(!c)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new mt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=c.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new mt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new mt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=c.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new mt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new mt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new mt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return c.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new mt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new mt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(jv(l)){if(c.rp.id!==l)return new mt({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new mt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new mt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function aS({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new mt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new mt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(jv(o)){if(r.rpId!==o)return new mt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new mt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var Cv=function(t,e){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(r[o[i]]=t[o[i]]);return r};class lS{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const cS=new lS;function uS(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:o}=t,i=Cv(t,["challenge","user","excludeCredentials"]),c=vo(e).buffer,l=Object.assign(Object.assign({},r),{id:vo(r.id).buffer}),d=Object.assign(Object.assign({},i),{challenge:c,user:l});if(o&&o.length>0){d.excludeCredentials=new Array(o.length);for(let h=0;h<o.length;h++){const p=o[h];d.excludeCredentials[h]=Object.assign(Object.assign({},p),{id:vo(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return d}function dS(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,o=Cv(t,["challenge","allowCredentials"]),i=vo(e).buffer,c=Object.assign(Object.assign({},o),{challenge:i});if(r&&r.length>0){c.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const d=r[l];c.allowCredentials[l]=Object.assign(Object.assign({},d),{id:vo(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return c}function hS(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:vs(new Uint8Array(t.response.attestationObject)),clientDataJSON:vs(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function fS(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,o=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:vs(new Uint8Array(i.authenticatorData)),clientDataJSON:vs(new Uint8Array(i.clientDataJSON)),signature:vs(new Uint8Array(i.signature)),userHandle:i.userHandle?vs(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function jv(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function jm(){var t,e;return!!(hn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function pS(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new dl("Browser returned unexpected credential type",e)}:{data:null,error:new dl("Empty credential response",e)}}catch(e){return{data:null,error:iS({error:e,options:t})}}}async function mS(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new dl("Browser returned unexpected credential type",e)}:{data:null,error:new dl("Empty credential response",e)}}catch(e){return{data:null,error:aS({error:e,options:t})}}}const gS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},vS={userVerification:"preferred",hints:["security-key"]};function hl(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),o={};for(const i of t)if(i)for(const c in i){const l=i[c];if(l!==void 0)if(Array.isArray(l))o[c]=l;else if(r(l))o[c]=l;else if(e(l)){const d=o[c];e(d)?o[c]=hl(d,l):o[c]=hl(l)}else o[c]=l}return o}function yS(t,e){return hl(gS,t,e||{})}function wS(t,e){return hl(vS,t,e||{})}class xS{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:o,signal:i},c){try{const{data:l,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!l)return{data:null,error:d};const h=i??cS.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:p}=l.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${o}`),p.displayName||(p.displayName=p.name)}switch(l.webauthn.type){case"create":{const p=yS(l.webauthn.credential_options.publicKey,c?.create),{data:v,error:g}=await pS({publicKey:p,signal:h});return v?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:v}},error:null}:{data:null,error:g}}case"request":{const p=wS(l.webauthn.credential_options.publicKey,c?.request),{data:v,error:g}=await mS(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:p,signal:h}));return v?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:v}},error:null}:{data:null,error:g}}}}catch(l){return je(l)?{data:null,error:l}:{data:null,error:new ps("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:r,webauthn:o}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:o})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:i}},c){if(!r)return{data:null,error:new ki("rpId is required for WebAuthn authentication")};try{if(!jm())return{data:null,error:new ps("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:o},signal:i},{request:c});if(!l)return{data:null,error:d};const{webauthn:h}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:h.type,rpId:r,rpOrigins:o,credential_response:h.credential_response}})}catch(l){return je(l)?{data:null,error:l}:{data:null,error:new ps("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:i},c){if(!r)return{data:null,error:new ki("rpId is required for WebAuthn registration")};try{if(!jm())return{data:null,error:new ps("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(v=>{var g;return(g=v.data)===null||g===void 0?void 0:g.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===e&&w.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:d};const{data:h,error:p}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:o},signal:i},{create:c});return h?this._verify({factorId:l.id,challengeId:h.challengeId,webauthn:{rpId:r,rpOrigins:o,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:p}}catch(l){return je(l)?{data:null,error:l}:{data:null,error:new ps("Unexpected error in register",l)}}}}nS();const bS={url:gb,storageKey:vb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Am(t,e,r){return await r()}const ao={};class Ei{get jwks(){var e,r;return(r=(e=ao[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){ao[this.storageKey]=Object.assign(Object.assign({},ao[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=ao[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ao[this.storageKey]=Object.assign(Object.assign({},ao[this.storageKey]),{cachedAt:e})}constructor(e){var r,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ei.nextInstanceID,Ei.nextInstanceID+=1,this.instanceID>0&&hn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},bS),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Zb({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Ev(i.fetch),this.lock=i.lock||Am,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:hn()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=tS:this.lock=Am,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new xS(this)},this.persistSession?(i.storage?this.storage=i.storage:kv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Cm(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Cm(this.memoryStorage)),hn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${bv}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Rb(window.location.href);let o="none";if(this._isImplicitGrantCallback(r)?o="implicit":await this._isPKCECallback(r)&&(o="pkce"),hn()&&this.detectSessionInUrl&&o!=="none"){const{data:i,error:c}=await this._getSessionFromURL(r,o);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),kb(c)){const h=(e=c.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:l,redirectType:d}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",d),await this._saveSession(l),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return je(r)?{error:r}:{error:new ps("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,o,i;try{const c=await Le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:In}),{data:l,error:d}=c;if(d||!l)return{data:{user:null,session:null},error:d};const h=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(c){if(je(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(e){var r,o,i;try{let c;if("email"in e){const{email:v,password:g,options:w}=e;let S=null,_=null;this.flowType==="pkce"&&([S,_]=await so(this.storage,this.storageKey)),c=await Le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:v,password:g,data:(r=w?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:S,code_challenge_method:_},xform:In})}else if("phone"in e){const{phone:v,password:g,options:w}=e;c=await Le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:g,data:(o=w?.data)!==null&&o!==void 0?o:{},channel:(i=w?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:In})}else throw new qa("You must provide either an email or phone number and a password");const{data:l,error:d}=c;if(d||!l)return{data:{user:null,session:null},error:d};const h=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(c){if(je(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(e){try{let r;if("email"in e){const{email:c,password:l,options:d}=e;r=await Le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:l,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Tm})}else if("phone"in e){const{phone:c,password:l,options:d}=e;r=await Le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:l,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Tm})}else throw new qa("You must provide either an email or phone number and a password");const{data:o,error:i}=r;return i?{data:{user:null,session:null},error:i}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new ro}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:i})}catch(r){if(je(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,o,i,c;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(c=e.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,o,i,c,l,d,h,p,v,g,w;let S,_;if("message"in e)S=e.message,_=e.signature;else{const{chain:k,wallet:E,statement:P,options:I}=e;let A;if(hn())if(typeof E=="object")A=E;else{const ee=window;if("ethereum"in ee&&typeof ee.ethereum=="object"&&"request"in ee.ethereum&&typeof ee.ethereum.request=="function")A=ee.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=E}const W=new URL((r=I?.url)!==null&&r!==void 0?r:window.location.href),V=await A.request({method:"eth_requestAccounts"}).then(ee=>ee).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!V||V.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=Pv(V[0]);let H=(o=I?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!H){const ee=await A.request({method:"eth_chainId"});H=rS(ee)}const M={domain:W.host,address:O,statement:P,uri:W.href,version:"1",chainId:H,nonce:(i=I?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(c=I?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(d=I?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=I?.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(p=I?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=I?.signInWithEthereum)===null||v===void 0?void 0:v.resources};S=oS(M),_=await A.request({method:"personal_sign",params:[sS(S),O]})}try{const{data:k,error:E}=await Le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:_},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:In});if(E)throw E;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new ro}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:E})}catch(k){if(je(k))return{data:{user:null,session:null},error:k};throw k}}async signInWithSolana(e){var r,o,i,c,l,d,h,p,v,g,w,S;let _,k;if("message"in e)_=e.message,k=e.signature;else{const{chain:E,wallet:P,statement:I,options:A}=e;let W;if(hn())if(typeof P=="object")W=P;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))W=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");W=P}const V=new URL((r=A?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in W&&W.signIn){const O=await W.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A?.signInWithSolana),{version:"1",domain:V.host,uri:V.href}),I?{statement:I}:null));let H;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")H=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)H=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)_=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),k=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in W)||typeof W.signMessage!="function"||!("publicKey"in W)||typeof W!="object"||!W.publicKey||!("toBase58"in W.publicKey)||typeof W.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${V.host} wants you to sign in with your Solana account:`,W.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${V.href}`,`Issued At: ${(i=(o=A?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((c=A?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((l=A?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((d=A?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((h=A?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((p=A?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((g=(v=A?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||g===void 0)&&g.length?["Resources",...A.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const O=await W.signMessage(new TextEncoder().encode(_),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=O}}try{const{data:E,error:P}=await Le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:vs(k)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:In});if(P)throw P;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new ro}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:P})}catch(E){if(je(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(e){const r=await is(this.storage,`${this.storageKey}-code-verifier`),[o,i]=(r??"").split("/");try{const{data:c,error:l}=await Le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:o},xform:In});if(await Lr(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new ro}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:i??null}),error:l})}catch(c){if(je(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(e){try{const{options:r,provider:o,token:i,access_token:c,nonce:l}=e,d=await Le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:i,access_token:c,nonce:l,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:In}),{data:h,error:p}=d;return p?{data:{user:null,session:null},error:p}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new ro}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:p})}catch(r){if(je(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,o,i,c,l;try{if("email"in e){const{email:d,options:h}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await so(this.storage,this.storageKey));const{error:g}=await Le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=h?.data)!==null&&r!==void 0?r:{},create_user:(o=h?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:h?.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:d,options:h}=e,{data:p,error:v}=await Le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(i=h?.data)!==null&&i!==void 0?i:{},create_user:(c=h?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(l=h?.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:v}}throw new qa("You must provide either an email or phone number.")}catch(d){if(je(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var r,o;try{let i,c;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,c=(o=e.options)===null||o===void 0?void 0:o.captchaToken);const{data:l,error:d}=await Le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:c}}),redirectTo:i,xform:In});if(d)throw d;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,p=l.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(i){if(je(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,o,i;try{let c=null,l=null;return this.flowType==="pkce"&&([c,l]=await so(this.storage,this.storageKey)),await Le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(o=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&o!==void 0?o:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:l}),headers:this.headers,xform:Yb})}catch(c){if(je(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:o}=e;if(o)throw o;if(!r)throw new Or;const{error:i}=await Le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(je(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:o,type:i,options:c}=e,{error:l}=await Le(this.fetch,"POST",r,{headers:this.headers,body:{email:o,type:i,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:o,type:i,options:c}=e,{data:l,error:d}=await Le(this.fetch,"POST",r,{headers:this.headers,body:{phone:o,type:i,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:d}}throw new qa("You must provide either an email or phone number and a type")}catch(r){if(je(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await o,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=r();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await is(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const o=e.expires_at?e.expires_at*1e3-Date.now()<yu:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",e.expires_at),!o){if(this.userStorage){const l=await is(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=bu()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(h,p,v)=>(!l&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,p,v))})}return{data:{session:e},error:null}}const{data:i,error:c}=await this._callRefreshToken(e.refresh_token);return c?{data:{session:null},error:c}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Mr}):await this._useSession(async r=>{var o,i,c;const{data:l,error:d}=r;if(d)throw d;return!(!((o=l.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Or}:await Le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&c!==void 0?c:void 0,xform:Mr})})}catch(r){if(je(r))return _b(r)&&(await this._removeSession(),await Lr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async o=>{const{data:i,error:c}=o;if(c)throw c;if(!i.session)throw new Or;const l=i.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await so(this.storage,this.storageKey));const{data:p,error:v}=await Le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:l.access_token,xform:Mr});if(v)throw v;return l.user=p.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(o){if(je(o))return{data:{user:null},error:o};throw o}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Or;const r=Date.now()/1e3;let o=r,i=!0,c=null;const{payload:l}=xu(e.access_token);if(l.exp&&(o=l.exp,i=o<=r),i){const{data:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!d)return{data:{user:null,session:null},error:null};c=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;c={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:o-r,expires_at:o},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(r){if(je(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var o;if(!e){const{data:l,error:d}=r;if(d)throw d;e=(o=l.session)!==null&&o!==void 0?o:void 0}if(!e?.refresh_token)throw new Or;const{data:i,error:c}=await this._callRefreshToken(e.refresh_token);return c?{data:{user:null,session:null},error:c}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(je(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!hn())throw new Ka("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ka(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new wm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ka("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new wm("No code detected.");const{data:I,error:A}=await this._exchangeCodeForSession(e.code);if(A)throw A;const W=new URL(window.location.href);return W.searchParams.delete("code"),window.history.replaceState(window.history.state,"",W.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:i,access_token:c,refresh_token:l,expires_in:d,expires_at:h,token_type:p}=e;if(!c||!d||!l||!p)throw new Ka("No session defined in URL");const v=Math.round(Date.now()/1e3),g=parseInt(d);let w=v+g;h&&(w=parseInt(h));const S=w-v;S*1e3<=co&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${g}s`);const _=w-g;v-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,w,v):v-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,w,v);const{data:k,error:E}=await this._getUser(c);if(E)throw E;const P={provider_token:o,provider_refresh_token:i,access_token:c,expires_in:g,expires_at:w,refresh_token:l,token_type:p,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:P,redirectType:e.type},error:null}}catch(o){if(je(o))return{data:{session:null,redirectType:null},error:o};throw o}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await is(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var o;const{data:i,error:c}=r;if(c)return{error:c};const l=(o=i.session)===null||o===void 0?void 0:o.access_token;if(l){const{error:d}=await this.admin.signOut(l,e);if(d&&!(Sb(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await Lr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=Nb(),o={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:o}}}async _emitInitialSession(e){return await this._useSession(async r=>{var o,i;try{const{data:{session:c},error:l}=r;if(l)throw l;await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",e,"session",c)}catch(c){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",c),console.error(c)}})}async resetPasswordForEmail(e,r={}){let o=null,i=null;this.flowType==="pkce"&&([o,i]=await so(this.storage,this.storageKey,!0));try{return await Le(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(je(c))return{data:null,error:c};throw c}}async getUserIdentities(){var e;try{const{data:r,error:o}=await this.getUser();if(o)throw o;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:o,error:i}=await this._useSession(async c=>{var l,d,h,p,v;const{data:g,error:w}=c;if(w)throw w;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Le(this.fetch,"GET",S,{headers:this.headers,jwt:(v=(p=g.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(i)throw i;return hn()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(o?.url),{data:{provider:e.provider,url:o?.url},error:null}}catch(o){if(je(o))return{data:{provider:e.provider,url:null},error:o};throw o}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var o;try{const{error:i,data:{session:c}}=r;if(i)throw i;const{options:l,provider:d,token:h,access_token:p,nonce:v}=e,g=await Le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=c?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:d,id_token:h,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:In}),{data:w,error:S}=g;return S?{data:{user:null,session:null},error:S}:!w||!w.session||!w.user?{data:{user:null,session:null},error:new ro}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),{data:w,error:S})}catch(i){if(je(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var o,i;const{data:c,error:l}=r;if(l)throw l;return await Le(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(je(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const o=Date.now();return await Ob(async i=>(i>0&&await Ib(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await Le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:In})),(i,c)=>{const l=200*Math.pow(2,i);return c&&wu(c)&&Date.now()+l-o<co})}catch(o){if(this._debug(r,"error",o),je(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const o=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",o),hn()&&!r.skipBrowserRedirect&&window.location.assign(o),{data:{provider:e,url:o},error:null}}async _recoverAndRefresh(){var e,r;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const i=await is(this.storage,this.storageKey);if(i&&this.userStorage){let l=await is(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await uo(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l?.user)!==null&&e!==void 0?e:bu()}else if(i&&!i.user&&!i.user){const l=await is(this.storage,this.storageKey+"-user");l&&l?.user?(i.user=l.user,await Lr(this.storage,this.storageKey+"-user"),await uo(this.storage,this.storageKey,i)):i.user=bu()}if(this._debug(o,"session from storage",i),!this._isValidSession(i)){this._debug(o,"session is not valid"),i!==null&&await this._removeSession();return}const c=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<yu;if(this._debug(o,`session has${c?"":" not"} expired with margin of ${yu}s`),c){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),wu(l)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:d}=await this._getUser(i.access_token);!d&&l?.user?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(o,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(o,"error",i),console.error(i);return}finally{this._debug(o,"end")}}async _callRefreshToken(e){var r,o;if(!e)throw new Or;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new bl;const{data:c,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!c.session)throw new Or;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const d={data:c.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(c){if(this._debug(i,"error",c),je(c)){const l={data:null,error:c};return wu(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(c),c}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,o=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:e,session:r});const c=[],l=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,r)}catch(h){c.push(h)}});if(await Promise.all(l),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),o=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&r.user&&await uo(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const c=km(i);await uo(this.storage,this.storageKey,c)}else{const i=km(r);await uo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Lr(this.storage,this.storageKey),await Lr(this.storage,this.storageKey+"-code-verifier"),await Lr(this.storage,this.storageKey+"-user"),this.userStorage&&await Lr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&hn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),co);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:o}}=r;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((o.expires_at*1e3-e)/co);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${co}ms, refresh threshold is ${Ju} ticks`),i<=Ju&&await this._callRefreshToken(o.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Tv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!hn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,o){const i=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&i.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[c,l]=await so(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(d.toString())}if(o?.queryParams){const c=new URLSearchParams(o.queryParams);i.push(c.toString())}return o?.skipBrowserRedirect&&i.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var o;const{data:i,error:c}=r;return c?{data:null,error:c}:await Le(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(o=i?.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(je(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var o,i;const{data:c,error:l}=r;if(l)return{data:null,error:l};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:p}=await Le(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&h.type==="totp"&&(!((i=h?.totp)===null||i===void 0)&&i.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(r){if(je(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var o;const{data:i,error:c}=r;if(c)return{data:null,error:c};const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?hS(e.webauthn.credential_response):fS(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:h}=await Le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(o=i?.session)===null||o===void 0?void 0:o.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:h})})}catch(r){if(je(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var o;const{data:i,error:c}=r;if(c)return{data:null,error:c};const l=await Le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(o=i?.session)===null||o===void 0?void 0:o.access_token});if(l.error)return l;const{data:d}=l;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:uS(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:dS(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(je(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:o}=await this._challenge({factorId:e.factorId});return o?{data:null,error:o}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:o}=await this.getUser();if(o)return{data:null,error:o};const i={all:[],phone:[],totp:[],webauthn:[]};for(const c of(e=r?.factors)!==null&&e!==void 0?e:[])i.all.push(c),c.status==="verified"&&i[c.factor_type].push(c);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,o;const{data:{session:i},error:c}=e;if(c)return{data:null,error:c};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=xu(i.access_token);let d=null;l.aal&&(d=l.aal);let h=d;((o=(r=i.user.factors)===null||r===void 0?void 0:r.filter(g=>g.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(h="aal2");const v=l.amr||[];return{data:{currentLevel:d,nextLevel:h,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(e,r={keys:[]}){let o=r.keys.find(d=>d.kid===e);if(o)return o;const i=Date.now();if(o=this.jwks.keys.find(d=>d.kid===e),o&&this.jwks_cached_at+xb>i)return o;const{data:c,error:l}=await Le(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=i,o=c.keys.find(d=>d.kid===e),!o)?null:o}async getClaims(e,r={}){try{let o=e;if(!o){const{data:S,error:_}=await this.getSession();if(_||!S.session)return{data:null,error:_};o=S.session.access_token}const{header:i,payload:c,signature:l,raw:{header:d,payload:h}}=xu(o);r?.allowExpired||zb(c.exp);const p=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!p){const{error:S}=await this.getUser(o);if(S)throw S;return{data:{claims:c,header:i,signature:l},error:null}}const v=Bb(i.alg),g=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,g,l,jb(`${d}.${h}`)))throw new Zu("Invalid JWT signature");return{data:{claims:c,header:i,signature:l},error:null}}catch(o){if(je(o))return{data:null,error:o};throw o}}}Ei.nextInstanceID=0;const SS=Ei;class _S extends SS{constructor(e){super(e)}}var kS=function(t,e,r,o){function i(c){return c instanceof r?c:new r(function(l){l(c)})}return new(r||(r=Promise))(function(c,l){function d(v){try{p(o.next(v))}catch(g){l(g)}}function h(v){try{p(o.throw(v))}catch(g){l(g)}}function p(v){v.done?c(v.value):i(v.value).then(d,h)}p((o=o.apply(t,e||[])).next())})};class ES{constructor(e,r,o){var i,c,l;this.supabaseUrl=e,this.supabaseKey=r;const d=mb(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,p={db:ob,realtime:ab,auth:Object.assign(Object.assign({},ib),{storageKey:h}),global:sb},v=pb(o??{},p);this.storageKey=(i=v.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(c=v.global.headers)!==null&&c!==void 0?c:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(g,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=v.auth)!==null&&l!==void 0?l:{},this.headers,v.global.fetch),this.fetch=db(r,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new b1(new URL("rest/v1",d).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new tb(this.storageUrl.href,this.headers,this.fetch,o?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new d1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},o={}){return this.rest.rpc(e,r,o)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return kS(this,void 0,void 0,function*(){var e,r;if(this.accessToken)return yield this.accessToken();const{data:o}=yield this.auth.getSession();return(r=(e=o.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:o,storage:i,userStorage:c,storageKey:l,flowType:d,lock:h,debug:p},v,g){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _S({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),v),storageKey:l,autoRefreshToken:e,persistSession:r,detectSessionInUrl:o,storage:i,userStorage:c,flowType:d,lock:h,debug:p,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new $1(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,o)=>{this._handleTokenChanged(r,"CLIENT",o?.access_token)})}_handleTokenChanged(e,r,o){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const TS=(t,e,r)=>new ES(t,e,r);function PS(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}PS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Av=TS(`https://${ms}.supabase.co`,gs,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1,flowType:"pkce",retryPolicy:{maxRetries:3,backoffMultiplier:2,maxBackoffInterval:3e4}},global:{headers:{"x-client-info":"persian-poetry-app"}}});function Nv(){return Av}const _s=Object.freeze(Object.defineProperty({__proto__:null,createClient:Nv,supabase:Av},Symbol.toStringTag,{value:"Module"})),Rv=b.createContext(void 0);function Eo(){const t=b.useContext(Rv);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function CS({children:t}){const[e,r]=b.useState(null),[o,i]=b.useState(!0),c=Nv(),l=async()=>{try{for(let k=0;k<localStorage.length;k++){const E=localStorage.key(k);if(E&&E.startsWith("sb-"))try{const P=localStorage.getItem(E);if(P){const I=JSON.parse(P);I&&typeof I=="object"&&I.access_token&&I.expires_at&&I.expires_at<Math.floor(Date.now()/1e3)-86400&&(console.log("Found very old expired token, clearing:",E),localStorage.removeItem(E))}}catch{console.log("Found corrupted auth data, removing:",E),localStorage.removeItem(E)}}}catch(k){console.warn("Error during auth cleanup:",k)}};b.useEffect(()=>{let k=!0;l();const E=async()=>{try{console.log("Clearing invalid session..."),k&&r(null);try{localStorage.removeItem("supabase.auth.token");const V=[];for(let O=0;O<localStorage.length;O++){const H=localStorage.key(O);H&&(H.startsWith("sb-")||H.includes("supabase")||H.includes("auth"))&&V.push(H)}V.forEach(O=>{try{localStorage.removeItem(O)}catch{}})}catch(V){console.warn("Error clearing localStorage:",V)}try{sessionStorage.clear()}catch(V){console.warn("Error clearing sessionStorage:",V)}try{await c.auth.signOut()}catch(V){console.warn("Silent sign out failed:",V)}k&&i(!1)}catch(V){console.error("Error clearing session:",V),k&&(r(null),i(!1))}},P=()=>{try{let V=!1;for(let O=0;O<localStorage.length;O++){const H=localStorage.key(O);if(H&&(H.startsWith("sb-")||H.includes("supabase.auth"))){V=!0;break}}return V}catch(V){return console.warn("Error checking localStorage:",V),!1}},I=async()=>{try{console.log(" Checking for OAuth callback..."),console.log("Current URL:",window.location.href);const O=new URLSearchParams(window.location.search).get("code");if(O){console.log(" PKCE OAuth redirect detected! Exchanging code for session..."),console.log("Code found in query params");try{const{data:_e,error:xe}=await c.auth.exchangeCodeForSession(O);if(xe){console.error(" Code exchange error:",xe),console.error("Error details:",JSON.stringify(xe,null,2)),window.history.replaceState(null,"",window.location.pathname),k&&(r(null),i(!1));return}if(_e?.session?.user){console.log(" PKCE OAuth session established successfully!"),console.log(" User email:",_e.session.user.email),console.log(" User ID:",_e.session.user.id),k&&(r(_e.session.user),i(!1)),window.history.replaceState(null,"",window.location.pathname);return}else console.warn(" No session data returned from code exchange"),console.warn("Data received:",_e)}catch(_e){console.error(" Exception while exchanging code:",_e),window.history.replaceState(null,"",window.location.pathname)}}const H=window.location.hash;console.log("Hash:",H?H.substring(0,50)+"...":"none");const M=new URLSearchParams(H.substring(1)),ee=M.get("access_token"),ie=M.get("refresh_token"),Ee=ee&&ie;if(Ee){console.log(" Implicit OAuth redirect detected! Processing tokens..."),console.log("Hash params found:",Array.from(M.keys()).join(", "));try{const{data:_e,error:xe}=await c.auth.setSession({access_token:ee,refresh_token:ie});if(xe){console.error(" OAuth session error:",xe),console.error("Error details:",JSON.stringify(xe,null,2)),window.history.replaceState(null,"",window.location.pathname),k&&(r(null),i(!1));return}if(_e?.session?.user){console.log(" OAuth session established successfully!"),console.log(" User email:",_e.session.user.email),console.log(" User ID:",_e.session.user.id),k&&(r(_e.session.user),i(!1)),window.history.replaceState(null,"",window.location.pathname);return}else console.warn(" No session data returned from setSession"),console.warn("Data received:",_e)}catch(_e){console.error(" Exception while processing OAuth tokens:",_e),window.history.replaceState(null,"",window.location.pathname)}}else if(H.includes("error")){const _e=M.get("error_description"),xe=M.get("error");console.error(" OAuth error in callback:",xe,_e),window.history.replaceState(null,"",window.location.pathname),k&&(r(null),i(!1));return}else console.log(" No OAuth code or tokens found in URL");if(!P()&&!Ee){console.log("No existing auth data found, skipping session check"),k&&(r(null),i(!1));return}const{data:{session:he},error:we}=await c.auth.getSession();if(we&&(console.error("Session initialization error:",we),we.message.includes("refresh_token_not_found")||we.message.includes("Invalid Refresh Token")||we.message.includes("JWT expired")||we.name==="AuthApiError")){console.log("Invalid session detected, clearing authentication state"),await E();return}if(he){const _e=Math.floor(Date.now()/1e3);if(he.expires_at&&he.expires_at<_e){if(console.log("Session is expired, attempting refresh"),(await A()).error){console.log("Refresh failed, clearing session"),await E();return}}else k&&(r(he.user),i(!1))}else k&&(r(null),i(!1))}catch(V){console.error("Auth initialization failed:",V),k&&await E()}},A=async()=>{try{const{data:V,error:O}=await c.auth.refreshSession();return O?(console.error("Session refresh error:",O),O.message.includes("refresh_token_not_found")||O.message.includes("Invalid Refresh Token")||O.message.includes("JWT expired")||O.name==="AuthApiError"?(console.log("Invalid refresh token detected, clearing session"),await E(),{error:"Your session has expired. Please sign in again."}):{error:O.message}):(V?.session&&k&&(console.log("Session refreshed successfully"),r(V.session.user)),{})}catch(V){return console.error("Unexpected refresh error:",V),V instanceof Error&&V.message.includes("refresh_token")?(console.log("Clearing session due to refresh token error"),await E(),{error:"Session expired. Please sign in again."}):{error:"Failed to refresh session"}}};I();const{data:{subscription:W}}=c.auth.onAuthStateChange(async(V,O)=>{if(console.log("Auth state change:",V,O?.user?.id),!!k)switch(V){case"SIGNED_OUT":console.log("User signed out"),r(null),i(!1);break;case"TOKEN_REFRESHED":O?(console.log("Token refreshed successfully"),r(O.user),i(!1)):(console.log("Token refresh failed, clearing session"),await E());break;case"SIGNED_IN":if(console.log("User signed in"),r(O?.user??null),i(!1),O?.user){const H=O.user.user_metadata?.avatar_url;if(O.user.app_metadata?.provider==="google"&&H){console.log("Google user detected, syncing profile picture:",H);try{const{projectId:ee,publicAnonKey:ie}=await it(async()=>{const{projectId:Ee,publicAnonKey:he}=await Promise.resolve().then(()=>Xn);return{projectId:Ee,publicAnonKey:he}},void 0);await fetch(`https://${ee}.supabase.co/functions/v1/make-server-c192d0ee/profile`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O.access_token}`},body:JSON.stringify({avatarUrl:H,name:O.user.user_metadata?.full_name||O.user.user_metadata?.name||O.user.email?.split("@")[0]})}),console.log(" Google profile picture synced successfully")}catch(ee){console.warn("Failed to sync Google profile picture:",ee)}}}break;default:r(O?.user??null),i(!1);break}});return()=>{k=!1,W.unsubscribe()}},[]);const d=async(k,E)=>{try{const{error:P}=await c.auth.signInWithPassword({email:k,password:E});return P?{error:P.message}:{}}catch{return{error:"An unexpected error occurred"}}},h=async()=>{try{console.log(" Starting Google OAuth flow..."),console.log(" Current URL:",window.location.href),console.log(" Hostname:",window.location.hostname);const k=window.location.hostname==="localhost"?window.location.origin:"https://rubatar.com";console.log(" Redirect URL:",k);const{data:E,error:P}=await c.auth.signInWithOAuth({provider:"google",options:{redirectTo:k,queryParams:{access_type:"offline",prompt:"consent"}}});return P?(console.error(" Google OAuth error:",P),{error:P.message}):(console.log(" OAuth redirect initiated"),console.log(" Data:",E),{})}catch(k){return console.error(" Unexpected Google OAuth error:",k),{error:"An unexpected error occurred"}}},p=async(k,E,P)=>{try{const{projectId:I,publicAnonKey:A}=await it(async()=>{const{projectId:O,publicAnonKey:H}=await Promise.resolve().then(()=>Xn);return{projectId:O,publicAnonKey:H}},void 0),W=await fetch(`https://${I}.supabase.co/functions/v1/make-server-c192d0ee/signup`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({email:k,password:E,name:P})}),V=await W.json();return W.ok?{needsVerification:!0}:V.error==="email_exists"?{error:"A user with this email address has already been registered"}:V.error==="weak_password"?{error:"Password is too weak"}:V.error==="invalid_email"?{error:"Invalid email address"}:{error:V.error||"Failed to create account"}}catch{return{error:"An unexpected error occurred"}}},v=async()=>{try{localStorage.removeItem("supabase.auth.token"),sessionStorage.clear(),await c.auth.signOut(),console.log("User signed out successfully")}catch(k){console.error("Error during sign out:",k),r(null)}},_={user:e,loading:o,signIn:d,signInWithGoogle:h,signUp:p,signOut:v,resetPassword:async(k,E)=>{try{const P=window.location.hostname==="localhost"?window.location.origin:"https://rubatar.com",{error:I}=await c.auth.resetPasswordForEmail(k,{redirectTo:E||`${P}?reset=true`});return I?{error:I.message}:{}}catch{return{error:"An unexpected error occurred"}}},updatePassword:async k=>{try{const{error:E}=await c.auth.updateUser({password:k});return E?{error:E.message}:{}}catch{return{error:"An unexpected error occurred"}}},refreshSession:async()=>{try{const{data:k,error:E}=await c.auth.refreshSession();if(E){if(console.error("External session refresh error:",E),E.message.includes("refresh_token_not_found")||E.message.includes("Invalid Refresh Token")||E.message.includes("JWT expired")||E.name==="AuthApiError"){console.log("Invalid refresh token detected in external call, clearing session");try{localStorage.removeItem("supabase.auth.token");const P=[];for(let I=0;I<localStorage.length;I++){const A=localStorage.key(I);A&&(A.startsWith("sb-")||A.includes("supabase")||A.includes("auth"))&&P.push(A)}P.forEach(I=>{try{localStorage.removeItem(I)}catch{}})}catch(P){console.warn("Error clearing localStorage:",P)}return await v(),{error:"Your session has expired. Please sign in again."}}return{error:E.message}}return k?.session&&(console.log("External session refreshed successfully"),r(k.session.user)),{}}catch(k){return console.error("Unexpected external refresh error:",k),k instanceof Error&&k.message.includes("refresh_token")?(console.log("Clearing session due to refresh token error"),await v(),{error:"Session expired. Please sign in again."}):{error:"Failed to refresh session"}}}};return m.jsx(Rv.Provider,{value:_,children:t})}const Lv=b.createContext(void 0);function zr(){const t=b.useContext(Lv);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}function jS({children:t}){const[e,r]=b.useState("dark");b.useEffect(()=>{const l=localStorage.getItem("poetry-app-theme");l&&r(l)},[]),b.useEffect(()=>{const l=document.documentElement;e==="dark"?l.classList.add("dark"):l.classList.remove("dark"),localStorage.setItem("poetry-app-theme",e)},[e]);const c={theme:e,toggleTheme:()=>{r(l=>l==="light"?"dark":"light")},setTheme:l=>{r(l)}};return m.jsx(Lv.Provider,{value:c,children:t})}const Iv=b.createContext(void 0);function Ov(){const t=b.useContext(Iv);if(t===void 0)throw new Error("useProfile must be used within a ProfileProvider");return t}function AS({children:t}){const[e,r]=b.useState(""),o={profileImage:e,setProfileImage:r};return m.jsx(Iv.Provider,{value:o,children:t})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RS=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,o)=>o?o.toUpperCase():r.toLowerCase()),Nm=t=>{const e=RS(t);return e.charAt(0).toUpperCase()+e.slice(1)},Dv=(...t)=>t.filter((e,r,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:i="",children:c,iconNode:l,...d},h)=>b.createElement("svg",{ref:h,...LS,width:e,height:e,stroke:t,strokeWidth:o?Number(r)*24/Number(e):r,className:Dv("lucide",i),...d},[...l.map(([p,v])=>b.createElement(p,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=(t,e)=>{const r=b.forwardRef(({className:o,...i},c)=>b.createElement(IS,{ref:c,iconNode:e,className:Dv(`lucide-${NS(Nm(t))}`,`lucide-${t}`,o),...i}));return r.displayName=Nm(t),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],DS=jt("arrow-right",OS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],$S=jt("camera",MS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Rm=jt("chevron-left",FS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Lm=jt("chevron-right",VS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ga=jt("eye-off",US);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ya=jt("eye",zS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Nd=jt("heart",BS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],WS=jt("layout-grid",HS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],KS=jt("list",qS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ja=jt("lock",GS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],JS=jt("log-out",YS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],_u=jt("mail",XS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],ZS=jt("moon",QS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],t_=jt("sun",e_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Im=jt("trash-2",n_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Mv=jt("user",r_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],o_=jt("volume-2",s_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],a_=jt("volume-x",i_),Rd=b.createContext({});function Ld(t){const e=b.useRef(null);return e.current===null&&(e.current=t()),e.current}const Id=typeof window<"u",$v=Id?b.useLayoutEffect:b.useEffect,Sl=b.createContext(null);function Od(t,e){t.indexOf(e)===-1&&t.push(e)}function Dd(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const ur=(t,e,r)=>r>e?e:r<t?t:r;let Md=()=>{};const dr={},Fv=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Vv(t){return typeof t=="object"&&t!==null}const Uv=t=>/^0[^.\s]+$/u.test(t);function $d(t){let e;return()=>(e===void 0&&(e=t()),e)}const kn=t=>t,l_=(t,e)=>r=>e(t(r)),Li=(...t)=>t.reduce(l_),Ti=(t,e,r)=>{const o=e-t;return o===0?1:(r-t)/o};class Fd{constructor(){this.subscriptions=[]}add(e){return Od(this.subscriptions,e),()=>Dd(this.subscriptions,e)}notify(e,r,o){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,r,o);else for(let c=0;c<i;c++){const l=this.subscriptions[c];l&&l(e,r,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Yn=t=>t*1e3,_n=t=>t/1e3;function zv(t,e){return e?t*(1e3/e):0}const Bv=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,c_=1e-7,u_=12;function d_(t,e,r,o,i){let c,l,d=0;do l=e+(r-e)/2,c=Bv(l,o,i)-t,c>0?r=l:e=l;while(Math.abs(c)>c_&&++d<u_);return l}function Ii(t,e,r,o){if(t===e&&r===o)return kn;const i=c=>d_(c,0,1,t,r);return c=>c===0||c===1?c:Bv(i(c),e,o)}const Hv=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Wv=t=>e=>1-t(1-e),qv=Ii(.33,1.53,.69,.99),Vd=Wv(qv),Kv=Hv(Vd),Gv=t=>(t*=2)<1?.5*Vd(t):.5*(2-Math.pow(2,-10*(t-1))),Ud=t=>1-Math.sin(Math.acos(t)),Yv=Wv(Ud),Jv=Hv(Ud),h_=Ii(.42,0,1,1),f_=Ii(0,0,.58,1),Xv=Ii(.42,0,.58,1),p_=t=>Array.isArray(t)&&typeof t[0]!="number",Qv=t=>Array.isArray(t)&&typeof t[0]=="number",m_={linear:kn,easeIn:h_,easeInOut:Xv,easeOut:f_,circIn:Ud,circInOut:Jv,circOut:Yv,backIn:Vd,backInOut:Kv,backOut:qv,anticipate:Gv},g_=t=>typeof t=="string",Om=t=>{if(Qv(t)){Md(t.length===4);const[e,r,o,i]=t;return Ii(e,r,o,i)}else if(g_(t))return m_[t];return t},Xa=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function v_(t,e){let r=new Set,o=new Set,i=!1,c=!1;const l=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function h(v){l.has(v)&&(p.schedule(v),t()),v(d)}const p={schedule:(v,g=!1,w=!1)=>{const _=w&&i?r:o;return g&&l.add(v),_.has(v)||_.add(v),v},cancel:v=>{o.delete(v),l.delete(v)},process:v=>{if(d=v,i){c=!0;return}i=!0,[r,o]=[o,r],r.forEach(h),r.clear(),i=!1,c&&(c=!1,p.process(v))}};return p}const y_=40;function Zv(t,e){let r=!1,o=!0;const i={delta:0,timestamp:0,isProcessing:!1},c=()=>r=!0,l=Xa.reduce((A,W)=>(A[W]=v_(c),A),{}),{setup:d,read:h,resolveKeyframes:p,preUpdate:v,update:g,preRender:w,render:S,postRender:_}=l,k=()=>{const A=dr.useManualTiming?i.timestamp:performance.now();r=!1,dr.useManualTiming||(i.delta=o?1e3/60:Math.max(Math.min(A-i.timestamp,y_),1)),i.timestamp=A,i.isProcessing=!0,d.process(i),h.process(i),p.process(i),v.process(i),g.process(i),w.process(i),S.process(i),_.process(i),i.isProcessing=!1,r&&e&&(o=!1,t(k))},E=()=>{r=!0,o=!0,i.isProcessing||t(k)};return{schedule:Xa.reduce((A,W)=>{const V=l[W];return A[W]=(O,H=!1,M=!1)=>(r||E(),V.schedule(O,H,M)),A},{}),cancel:A=>{for(let W=0;W<Xa.length;W++)l[Xa[W]].cancel(A)},state:i,steps:l}}const{schedule:Je,cancel:Fr,state:Lt,steps:ku}=Zv(typeof requestAnimationFrame<"u"?requestAnimationFrame:kn,!0);let ol;function w_(){ol=void 0}const rn={now:()=>(ol===void 0&&rn.set(Lt.isProcessing||dr.useManualTiming?Lt.timestamp:performance.now()),ol),set:t=>{ol=t,queueMicrotask(w_)}},e0=t=>e=>typeof e=="string"&&e.startsWith(t),zd=e0("--"),x_=e0("var(--"),Bd=t=>x_(t)?b_.test(t.split("/*")[0].trim()):!1,b_=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,To={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Pi={...To,transform:t=>ur(0,1,t)},Qa={...To,default:1},wi=t=>Math.round(t*1e5)/1e5,Hd=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function S_(t){return t==null}const __=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Wd=(t,e)=>r=>!!(typeof r=="string"&&__.test(r)&&r.startsWith(t)||e&&!S_(r)&&Object.prototype.hasOwnProperty.call(r,e)),t0=(t,e,r)=>o=>{if(typeof o!="string")return o;const[i,c,l,d]=o.match(Hd);return{[t]:parseFloat(i),[e]:parseFloat(c),[r]:parseFloat(l),alpha:d!==void 0?parseFloat(d):1}},k_=t=>ur(0,255,t),Eu={...To,transform:t=>Math.round(k_(t))},ys={test:Wd("rgb","red"),parse:t0("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:o=1})=>"rgba("+Eu.transform(t)+", "+Eu.transform(e)+", "+Eu.transform(r)+", "+wi(Pi.transform(o))+")"};function E_(t){let e="",r="",o="",i="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),o=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),o=t.substring(3,4),i=t.substring(4,5),e+=e,r+=r,o+=o,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(o,16),alpha:i?parseInt(i,16)/255:1}}const ed={test:Wd("#"),parse:E_,transform:ys.transform},Oi=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Dr=Oi("deg"),Jn=Oi("%"),Ae=Oi("px"),T_=Oi("vh"),P_=Oi("vw"),Dm={...Jn,parse:t=>Jn.parse(t)/100,transform:t=>Jn.transform(t*100)},ho={test:Wd("hsl","hue"),parse:t0("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:o=1})=>"hsla("+Math.round(t)+", "+Jn.transform(wi(e))+", "+Jn.transform(wi(r))+", "+wi(Pi.transform(o))+")"},vt={test:t=>ys.test(t)||ed.test(t)||ho.test(t),parse:t=>ys.test(t)?ys.parse(t):ho.test(t)?ho.parse(t):ed.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ys.transform(t):ho.transform(t),getAnimatableNone:t=>{const e=vt.parse(t);return e.alpha=0,vt.transform(e)}},C_=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function j_(t){return isNaN(t)&&typeof t=="string"&&(t.match(Hd)?.length||0)+(t.match(C_)?.length||0)>0}const n0="number",r0="color",A_="var",N_="var(",Mm="${}",R_=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ci(t){const e=t.toString(),r=[],o={color:[],number:[],var:[]},i=[];let c=0;const d=e.replace(R_,h=>(vt.test(h)?(o.color.push(c),i.push(r0),r.push(vt.parse(h))):h.startsWith(N_)?(o.var.push(c),i.push(A_),r.push(h)):(o.number.push(c),i.push(n0),r.push(parseFloat(h))),++c,Mm)).split(Mm);return{values:r,split:d,indexes:o,types:i}}function s0(t){return Ci(t).values}function o0(t){const{split:e,types:r}=Ci(t),o=e.length;return i=>{let c="";for(let l=0;l<o;l++)if(c+=e[l],i[l]!==void 0){const d=r[l];d===n0?c+=wi(i[l]):d===r0?c+=vt.transform(i[l]):c+=i[l]}return c}}const L_=t=>typeof t=="number"?0:vt.test(t)?vt.getAnimatableNone(t):t;function I_(t){const e=s0(t);return o0(t)(e.map(L_))}const Vr={test:j_,parse:s0,createTransformer:o0,getAnimatableNone:I_};function Tu(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function O_({hue:t,saturation:e,lightness:r,alpha:o}){t/=360,e/=100,r/=100;let i=0,c=0,l=0;if(!e)i=c=l=r;else{const d=r<.5?r*(1+e):r+e-r*e,h=2*r-d;i=Tu(h,d,t+1/3),c=Tu(h,d,t),l=Tu(h,d,t-1/3)}return{red:Math.round(i*255),green:Math.round(c*255),blue:Math.round(l*255),alpha:o}}function fl(t,e){return r=>r>0?e:t}const nt=(t,e,r)=>t+(e-t)*r,Pu=(t,e,r)=>{const o=t*t,i=r*(e*e-o)+o;return i<0?0:Math.sqrt(i)},D_=[ed,ys,ho],M_=t=>D_.find(e=>e.test(t));function $m(t){const e=M_(t);if(!e)return!1;let r=e.parse(t);return e===ho&&(r=O_(r)),r}const Fm=(t,e)=>{const r=$m(t),o=$m(e);if(!r||!o)return fl(t,e);const i={...r};return c=>(i.red=Pu(r.red,o.red,c),i.green=Pu(r.green,o.green,c),i.blue=Pu(r.blue,o.blue,c),i.alpha=nt(r.alpha,o.alpha,c),ys.transform(i))},td=new Set(["none","hidden"]);function $_(t,e){return td.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function F_(t,e){return r=>nt(t,e,r)}function qd(t){return typeof t=="number"?F_:typeof t=="string"?Bd(t)?fl:vt.test(t)?Fm:z_:Array.isArray(t)?i0:typeof t=="object"?vt.test(t)?Fm:V_:fl}function i0(t,e){const r=[...t],o=r.length,i=t.map((c,l)=>qd(c)(c,e[l]));return c=>{for(let l=0;l<o;l++)r[l]=i[l](c);return r}}function V_(t,e){const r={...t,...e},o={};for(const i in r)t[i]!==void 0&&e[i]!==void 0&&(o[i]=qd(t[i])(t[i],e[i]));return i=>{for(const c in o)r[c]=o[c](i);return r}}function U_(t,e){const r=[],o={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const c=e.types[i],l=t.indexes[c][o[c]],d=t.values[l]??0;r[i]=d,o[c]++}return r}const z_=(t,e)=>{const r=Vr.createTransformer(e),o=Ci(t),i=Ci(e);return o.indexes.var.length===i.indexes.var.length&&o.indexes.color.length===i.indexes.color.length&&o.indexes.number.length>=i.indexes.number.length?td.has(t)&&!i.values.length||td.has(e)&&!o.values.length?$_(t,e):Li(i0(U_(o,i),i.values),r):fl(t,e)};function a0(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?nt(t,e,r):qd(t)(t,e)}const B_=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>Je.update(e,r),stop:()=>Fr(e),now:()=>Lt.isProcessing?Lt.timestamp:rn.now()}},l0=(t,e,r=10)=>{let o="";const i=Math.max(Math.round(e/r),2);for(let c=0;c<i;c++)o+=Math.round(t(c/(i-1))*1e4)/1e4+", ";return`linear(${o.substring(0,o.length-2)})`},pl=2e4;function Kd(t){let e=0;const r=50;let o=t.next(e);for(;!o.done&&e<pl;)e+=r,o=t.next(e);return e>=pl?1/0:e}function H_(t,e=100,r){const o=r({...t,keyframes:[0,e]}),i=Math.min(Kd(o),pl);return{type:"keyframes",ease:c=>o.next(i*c).value/e,duration:_n(i)}}const W_=5;function c0(t,e,r){const o=Math.max(e-W_,0);return zv(r-t(o),e-o)}const st={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Cu=.001;function q_({duration:t=st.duration,bounce:e=st.bounce,velocity:r=st.velocity,mass:o=st.mass}){let i,c,l=1-e;l=ur(st.minDamping,st.maxDamping,l),t=ur(st.minDuration,st.maxDuration,_n(t)),l<1?(i=p=>{const v=p*l,g=v*t,w=v-r,S=nd(p,l),_=Math.exp(-g);return Cu-w/S*_},c=p=>{const g=p*l*t,w=g*r+r,S=Math.pow(l,2)*Math.pow(p,2)*t,_=Math.exp(-g),k=nd(Math.pow(p,2),l);return(-i(p)+Cu>0?-1:1)*((w-S)*_)/k}):(i=p=>{const v=Math.exp(-p*t),g=(p-r)*t+1;return-Cu+v*g},c=p=>{const v=Math.exp(-p*t),g=(r-p)*(t*t);return v*g});const d=5/t,h=G_(i,c,d);if(t=Yn(t),isNaN(h))return{stiffness:st.stiffness,damping:st.damping,duration:t};{const p=Math.pow(h,2)*o;return{stiffness:p,damping:l*2*Math.sqrt(o*p),duration:t}}}const K_=12;function G_(t,e,r){let o=r;for(let i=1;i<K_;i++)o=o-t(o)/e(o);return o}function nd(t,e){return t*Math.sqrt(1-e*e)}const Y_=["duration","bounce"],J_=["stiffness","damping","mass"];function Vm(t,e){return e.some(r=>t[r]!==void 0)}function X_(t){let e={velocity:st.velocity,stiffness:st.stiffness,damping:st.damping,mass:st.mass,isResolvedFromDuration:!1,...t};if(!Vm(t,J_)&&Vm(t,Y_))if(t.visualDuration){const r=t.visualDuration,o=2*Math.PI/(r*1.2),i=o*o,c=2*ur(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:st.mass,stiffness:i,damping:c}}else{const r=q_(t);e={...e,...r,mass:st.mass},e.isResolvedFromDuration=!0}return e}function ml(t=st.visualDuration,e=st.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:o,restDelta:i}=r;const c=r.keyframes[0],l=r.keyframes[r.keyframes.length-1],d={done:!1,value:c},{stiffness:h,damping:p,mass:v,duration:g,velocity:w,isResolvedFromDuration:S}=X_({...r,velocity:-_n(r.velocity||0)}),_=w||0,k=p/(2*Math.sqrt(h*v)),E=l-c,P=_n(Math.sqrt(h/v)),I=Math.abs(E)<5;o||(o=I?st.restSpeed.granular:st.restSpeed.default),i||(i=I?st.restDelta.granular:st.restDelta.default);let A;if(k<1){const V=nd(P,k);A=O=>{const H=Math.exp(-k*P*O);return l-H*((_+k*P*E)/V*Math.sin(V*O)+E*Math.cos(V*O))}}else if(k===1)A=V=>l-Math.exp(-P*V)*(E+(_+P*E)*V);else{const V=P*Math.sqrt(k*k-1);A=O=>{const H=Math.exp(-k*P*O),M=Math.min(V*O,300);return l-H*((_+k*P*E)*Math.sinh(M)+V*E*Math.cosh(M))/V}}const W={calculatedDuration:S&&g||null,next:V=>{const O=A(V);if(S)d.done=V>=g;else{let H=V===0?_:0;k<1&&(H=V===0?Yn(_):c0(A,V,O));const M=Math.abs(H)<=o,ee=Math.abs(l-O)<=i;d.done=M&&ee}return d.value=d.done?l:O,d},toString:()=>{const V=Math.min(Kd(W),pl),O=l0(H=>W.next(V*H).value,V,30);return V+"ms "+O},toTransition:()=>{}};return W}ml.applyToOptions=t=>{const e=H_(t,100,ml);return t.ease=e.ease,t.duration=Yn(e.duration),t.type="keyframes",t};function rd({keyframes:t,velocity:e=0,power:r=.8,timeConstant:o=325,bounceDamping:i=10,bounceStiffness:c=500,modifyTarget:l,min:d,max:h,restDelta:p=.5,restSpeed:v}){const g=t[0],w={done:!1,value:g},S=M=>d!==void 0&&M<d||h!==void 0&&M>h,_=M=>d===void 0?h:h===void 0||Math.abs(d-M)<Math.abs(h-M)?d:h;let k=r*e;const E=g+k,P=l===void 0?E:l(E);P!==E&&(k=P-g);const I=M=>-k*Math.exp(-M/o),A=M=>P+I(M),W=M=>{const ee=I(M),ie=A(M);w.done=Math.abs(ee)<=p,w.value=w.done?P:ie};let V,O;const H=M=>{S(w.value)&&(V=M,O=ml({keyframes:[w.value,_(w.value)],velocity:c0(A,M,w.value),damping:i,stiffness:c,restDelta:p,restSpeed:v}))};return H(0),{calculatedDuration:null,next:M=>{let ee=!1;return!O&&V===void 0&&(ee=!0,W(M),H(M)),V!==void 0&&M>=V?O.next(M-V):(!ee&&W(M),w)}}}function Q_(t,e,r){const o=[],i=r||dr.mix||a0,c=t.length-1;for(let l=0;l<c;l++){let d=i(t[l],t[l+1]);if(e){const h=Array.isArray(e)?e[l]||kn:e;d=Li(h,d)}o.push(d)}return o}function Z_(t,e,{clamp:r=!0,ease:o,mixer:i}={}){const c=t.length;if(Md(c===e.length),c===1)return()=>e[0];if(c===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[c-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=Q_(e,o,i),h=d.length,p=v=>{if(l&&v<t[0])return e[0];let g=0;if(h>1)for(;g<t.length-2&&!(v<t[g+1]);g++);const w=Ti(t[g],t[g+1],v);return d[g](w)};return r?v=>p(ur(t[0],t[c-1],v)):p}function ek(t,e){const r=t[t.length-1];for(let o=1;o<=e;o++){const i=Ti(0,e,o);t.push(nt(r,1,i))}}function tk(t){const e=[0];return ek(e,t.length-1),e}function nk(t,e){return t.map(r=>r*e)}function rk(t,e){return t.map(()=>e||Xv).splice(0,t.length-1)}function xi({duration:t=300,keyframes:e,times:r,ease:o="easeInOut"}){const i=p_(o)?o.map(Om):Om(o),c={done:!1,value:e[0]},l=nk(r&&r.length===e.length?r:tk(e),t),d=Z_(l,e,{ease:Array.isArray(i)?i:rk(e,i)});return{calculatedDuration:t,next:h=>(c.value=d(h),c.done=h>=t,c)}}const sk=t=>t!==null;function Gd(t,{repeat:e,repeatType:r="loop"},o,i=1){const c=t.filter(sk),d=i<0||e&&r!=="loop"&&e%2===1?0:c.length-1;return!d||o===void 0?c[d]:o}const ok={decay:rd,inertia:rd,tween:xi,keyframes:xi,spring:ml};function u0(t){typeof t.type=="string"&&(t.type=ok[t.type])}class Yd{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const ik=t=>t/100;class Jd extends Yd{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==rn.now()&&this.tick(rn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;u0(e);const{type:r=xi,repeat:o=0,repeatDelay:i=0,repeatType:c,velocity:l=0}=e;let{keyframes:d}=e;const h=r||xi;h!==xi&&typeof d[0]!="number"&&(this.mixKeyframes=Li(ik,a0(d[0],d[1])),d=[0,100]);const p=h({...e,keyframes:d});c==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...d].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=Kd(p));const{calculatedDuration:v}=p;this.calculatedDuration=v,this.resolvedDuration=v+i,this.totalDuration=this.resolvedDuration*(o+1)-i,this.generator=p}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:o,totalDuration:i,mixKeyframes:c,mirroredGenerator:l,resolvedDuration:d,calculatedDuration:h}=this;if(this.startTime===null)return o.next(0);const{delay:p=0,keyframes:v,repeat:g,repeatType:w,repeatDelay:S,type:_,onUpdate:k,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const P=this.currentTime-p*(this.playbackSpeed>=0?1:-1),I=this.playbackSpeed>=0?P<0:P>i;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let A=this.currentTime,W=o;if(g){const M=Math.min(this.currentTime,i)/d;let ee=Math.floor(M),ie=M%1;!ie&&M>=1&&(ie=1),ie===1&&ee--,ee=Math.min(ee,g+1),!!(ee%2)&&(w==="reverse"?(ie=1-ie,S&&(ie-=S/d)):w==="mirror"&&(W=l)),A=ur(0,1,ie)*d}const V=I?{done:!1,value:v[0]}:W.next(A);c&&(V.value=c(V.value));let{done:O}=V;!I&&h!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const H=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return H&&_!==rd&&(V.value=Gd(v,this.options,E,this.speed)),k&&k(V.value),H&&this.finish(),V}then(e,r){return this.finished.then(e,r)}get duration(){return _n(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+_n(e)}get time(){return _n(this.currentTime)}set time(e){e=Yn(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(rn.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=_n(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=B_,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const o=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=o):this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime||(this.startTime=r??o),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(rn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function ak(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ws=t=>t*180/Math.PI,sd=t=>{const e=ws(Math.atan2(t[1],t[0]));return od(e)},lk={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:sd,rotateZ:sd,skewX:t=>ws(Math.atan(t[1])),skewY:t=>ws(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},od=t=>(t=t%360,t<0&&(t+=360),t),Um=sd,zm=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Bm=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),ck={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:zm,scaleY:Bm,scale:t=>(zm(t)+Bm(t))/2,rotateX:t=>od(ws(Math.atan2(t[6],t[5]))),rotateY:t=>od(ws(Math.atan2(-t[2],t[0]))),rotateZ:Um,rotate:Um,skewX:t=>ws(Math.atan(t[4])),skewY:t=>ws(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function id(t){return t.includes("scale")?1:0}function ad(t,e){if(!t||t==="none")return id(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,i;if(r)o=ck,i=r;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=lk,i=d}if(!i)return id(e);const c=o[e],l=i[1].split(",").map(dk);return typeof c=="function"?c(l):l[c]}const uk=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return ad(r,e)};function dk(t){return parseFloat(t.trim())}const Po=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Co=new Set(Po),Hm=t=>t===To||t===Ae,hk=new Set(["x","y","z"]),fk=Po.filter(t=>!hk.has(t));function pk(t){const e=[];return fk.forEach(r=>{const o=t.getValue(r);o!==void 0&&(e.push([r,o.get()]),o.set(r.startsWith("scale")?1:0))}),e}const xs={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>ad(e,"x"),y:(t,{transform:e})=>ad(e,"y")};xs.translateX=xs.x;xs.translateY=xs.y;const bs=new Set;let ld=!1,cd=!1,ud=!1;function d0(){if(cd){const t=Array.from(bs).filter(o=>o.needsMeasurement),e=new Set(t.map(o=>o.element)),r=new Map;e.forEach(o=>{const i=pk(o);i.length&&(r.set(o,i),o.render())}),t.forEach(o=>o.measureInitialState()),e.forEach(o=>{o.render();const i=r.get(o);i&&i.forEach(([c,l])=>{o.getValue(c)?.set(l)})}),t.forEach(o=>o.measureEndState()),t.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}cd=!1,ld=!1,bs.forEach(t=>t.complete(ud)),bs.clear()}function h0(){bs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(cd=!0)})}function mk(){ud=!0,h0(),d0(),ud=!1}class Xd{constructor(e,r,o,i,c,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=o,this.motionValue=i,this.element=c,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(bs.add(this),ld||(ld=!0,Je.read(h0),Je.resolveKeyframes(d0))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:o,motionValue:i}=this;if(e[0]===null){const c=i?.get(),l=e[e.length-1];if(c!==void 0)e[0]=c;else if(o&&r){const d=o.readValue(r,l);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=l),i&&c===void 0&&i.set(e[0])}ak(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),bs.delete(this)}cancel(){this.state==="scheduled"&&(bs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const gk=t=>t.startsWith("--");function vk(t,e,r){gk(e)?t.style.setProperty(e,r):t.style[e]=r}const yk=$d(()=>window.ScrollTimeline!==void 0),wk={};function xk(t,e){const r=$d(t);return()=>wk[e]??r()}const f0=xk(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),mi=([t,e,r,o])=>`cubic-bezier(${t}, ${e}, ${r}, ${o})`,Wm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:mi([0,.65,.55,1]),circOut:mi([.55,0,1,.45]),backIn:mi([.31,.01,.66,-.59]),backOut:mi([.33,1.53,.69,.99])};function p0(t,e){if(t)return typeof t=="function"?f0()?l0(t,e):"ease-out":Qv(t)?mi(t):Array.isArray(t)?t.map(r=>p0(r,e)||Wm.easeOut):Wm[t]}function bk(t,e,r,{delay:o=0,duration:i=300,repeat:c=0,repeatType:l="loop",ease:d="easeOut",times:h}={},p=void 0){const v={[e]:r};h&&(v.offset=h);const g=p0(d,i);Array.isArray(g)&&(v.easing=g);const w={delay:o,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:c+1,direction:l==="reverse"?"alternate":"normal"};return p&&(w.pseudoElement=p),t.animate(v,w)}function m0(t){return typeof t=="function"&&"applyToOptions"in t}function Sk({type:t,...e}){return m0(t)&&f0()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class _k extends Yd{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:o,keyframes:i,pseudoElement:c,allowFlatten:l=!1,finalKeyframe:d,onComplete:h}=e;this.isPseudoElement=!!c,this.allowFlatten=l,this.options=e,Md(typeof e.type!="string");const p=Sk(e);this.animation=bk(r,o,i,p,c),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!c){const v=Gd(i,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(v):vk(r,o,v),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return _n(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+_n(e)}get time(){return _n(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Yn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&yk()?(this.animation.timeline=e,kn):r(this)}}const g0={anticipate:Gv,backInOut:Kv,circInOut:Jv};function kk(t){return t in g0}function Ek(t){typeof t.ease=="string"&&kk(t.ease)&&(t.ease=g0[t.ease])}const qm=10;class Tk extends _k{constructor(e){Ek(e),u0(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:o,onComplete:i,element:c,...l}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const d=new Jd({...l,autoplay:!1}),h=Yn(this.finishedTime??this.time);r.setWithVelocity(d.sample(h-qm).value,d.sample(h).value,qm),d.stop()}}const Km=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Vr.test(t)||t==="0")&&!t.startsWith("url("));function Pk(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function Ck(t,e,r,o){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const c=t[t.length-1],l=Km(i,e),d=Km(c,e);return!l||!d?!1:Pk(t)||(r==="spring"||m0(r))&&o}function dd(t){t.duration=0,t.type="keyframes"}const jk=new Set(["opacity","clipPath","filter","transform"]),Ak=$d(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Nk(t){const{motionValue:e,name:r,repeatDelay:o,repeatType:i,damping:c,type:l}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:p}=e.owner.getProps();return Ak()&&r&&jk.has(r)&&(r!=="transform"||!p)&&!h&&!o&&i!=="mirror"&&c!==0&&l!=="inertia"}const Rk=40;class Lk extends Yd{constructor({autoplay:e=!0,delay:r=0,type:o="keyframes",repeat:i=0,repeatDelay:c=0,repeatType:l="loop",keyframes:d,name:h,motionValue:p,element:v,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=rn.now();const w={autoplay:e,delay:r,type:o,repeat:i,repeatDelay:c,repeatType:l,name:h,motionValue:p,element:v,...g},S=v?.KeyframeResolver||Xd;this.keyframeResolver=new S(d,(_,k,E)=>this.onKeyframesResolved(_,k,w,!E),h,p,v),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,r,o,i){this.keyframeResolver=void 0;const{name:c,type:l,velocity:d,delay:h,isHandoff:p,onUpdate:v}=o;this.resolvedAt=rn.now(),Ck(e,c,l,d)||((dr.instantAnimations||!h)&&v?.(Gd(e,o,r)),e[0]=e[e.length-1],dd(o),o.repeat=0);const w={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Rk?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...o,keyframes:e},S=!p&&Nk(w)?new Tk({...w,element:w.motionValue.owner.current}):new Jd(w);S.finished.then(()=>this.notifyFinished()).catch(kn),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),mk()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Ik=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ok(t){const e=Ik.exec(t);if(!e)return[,];const[,r,o,i]=e;return[`--${r??o}`,i]}function v0(t,e,r=1){const[o,i]=Ok(t);if(!o)return;const c=window.getComputedStyle(e).getPropertyValue(o);if(c){const l=c.trim();return Fv(l)?parseFloat(l):l}return Bd(i)?v0(i,e,r+1):i}function Qd(t,e){return t?.[e]??t?.default??t}const y0=new Set(["width","height","top","left","right","bottom",...Po]),Dk={test:t=>t==="auto",parse:t=>t},w0=t=>e=>e.test(t),x0=[To,Ae,Jn,Dr,P_,T_,Dk],Gm=t=>x0.find(w0(t));function Mk(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Uv(t):!0}const $k=new Set(["brightness","contrast","saturate","opacity"]);function Fk(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[o]=r.match(Hd)||[];if(!o)return t;const i=r.replace(o,"");let c=$k.has(e)?1:0;return o!==r&&(c*=100),e+"("+c+i+")"}const Vk=/\b([a-z-]*)\(.*?\)/gu,hd={...Vr,getAnimatableNone:t=>{const e=t.match(Vk);return e?e.map(Fk).join(" "):t}},Ym={...To,transform:Math.round},Uk={rotate:Dr,rotateX:Dr,rotateY:Dr,rotateZ:Dr,scale:Qa,scaleX:Qa,scaleY:Qa,scaleZ:Qa,skew:Dr,skewX:Dr,skewY:Dr,distance:Ae,translateX:Ae,translateY:Ae,translateZ:Ae,x:Ae,y:Ae,z:Ae,perspective:Ae,transformPerspective:Ae,opacity:Pi,originX:Dm,originY:Dm,originZ:Ae},Zd={borderWidth:Ae,borderTopWidth:Ae,borderRightWidth:Ae,borderBottomWidth:Ae,borderLeftWidth:Ae,borderRadius:Ae,radius:Ae,borderTopLeftRadius:Ae,borderTopRightRadius:Ae,borderBottomRightRadius:Ae,borderBottomLeftRadius:Ae,width:Ae,maxWidth:Ae,height:Ae,maxHeight:Ae,top:Ae,right:Ae,bottom:Ae,left:Ae,padding:Ae,paddingTop:Ae,paddingRight:Ae,paddingBottom:Ae,paddingLeft:Ae,margin:Ae,marginTop:Ae,marginRight:Ae,marginBottom:Ae,marginLeft:Ae,backgroundPositionX:Ae,backgroundPositionY:Ae,...Uk,zIndex:Ym,fillOpacity:Pi,strokeOpacity:Pi,numOctaves:Ym},zk={...Zd,color:vt,backgroundColor:vt,outlineColor:vt,fill:vt,stroke:vt,borderColor:vt,borderTopColor:vt,borderRightColor:vt,borderBottomColor:vt,borderLeftColor:vt,filter:hd,WebkitFilter:hd},b0=t=>zk[t];function S0(t,e){let r=b0(t);return r!==hd&&(r=Vr),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const Bk=new Set(["auto","none","0"]);function Hk(t,e,r){let o=0,i;for(;o<t.length&&!i;){const c=t[o];typeof c=="string"&&!Bk.has(c)&&Ci(c).values.length&&(i=t[o]),o++}if(i&&r)for(const c of e)t[c]=S0(r,i)}class Wk extends Xd{constructor(e,r,o,i,c){super(e,r,o,i,c,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:o}=this;if(!r||!r.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let p=e[h];if(typeof p=="string"&&(p=p.trim(),Bd(p))){const v=v0(p,r.current);v!==void 0&&(e[h]=v),h===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!y0.has(o)||e.length!==2)return;const[i,c]=e,l=Gm(i),d=Gm(c);if(l!==d)if(Hm(l)&&Hm(d))for(let h=0;h<e.length;h++){const p=e[h];typeof p=="string"&&(e[h]=parseFloat(p))}else xs[o]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,o=[];for(let i=0;i<e.length;i++)(e[i]===null||Mk(e[i]))&&o.push(i);o.length&&Hk(e,o,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:o}=this;if(!e||!e.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xs[o](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&e.getValue(o,i).jump(i,!1)}measureEndState(){const{element:e,name:r,unresolvedKeyframes:o}=this;if(!e||!e.current)return;const i=e.getValue(r);i&&i.jump(this.measuredOrigin,!1);const c=o.length-1,l=o[c];o[c]=xs[r](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,h])=>{e.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function qk(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let o=document;const i=r?.[t]??o.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const _0=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function k0(t){return Vv(t)&&"offsetHeight"in t}const Jm=30,Kk=t=>!isNaN(parseFloat(t));class Gk{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=o=>{const i=rn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=rn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Kk(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new Fd);const o=this.events[e].add(r);return e==="change"?()=>{o(),Je.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,r,o){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-o}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=rn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Jm)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,Jm);return zv(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xo(t,e){return new Gk(t,e)}const{schedule:eh}=Zv(queueMicrotask,!1),On={x:!1,y:!1};function E0(){return On.x||On.y}function Yk(t){return t==="x"||t==="y"?On[t]?null:(On[t]=!0,()=>{On[t]=!1}):On.x||On.y?null:(On.x=On.y=!0,()=>{On.x=On.y=!1})}function T0(t,e){const r=qk(t),o=new AbortController,i={passive:!0,...e,signal:o.signal};return[r,i,()=>o.abort()]}function Xm(t){return!(t.pointerType==="touch"||E0())}function Jk(t,e,r={}){const[o,i,c]=T0(t,r),l=d=>{if(!Xm(d))return;const{target:h}=d,p=e(h,d);if(typeof p!="function"||!h)return;const v=g=>{Xm(g)&&(p(g),h.removeEventListener("pointerleave",v))};h.addEventListener("pointerleave",v,i)};return o.forEach(d=>{d.addEventListener("pointerenter",l,i)}),c}const P0=(t,e)=>e?t===e?!0:P0(t,e.parentElement):!1,th=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Xk=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Qk(t){return Xk.has(t.tagName)||t.tabIndex!==-1}const il=new WeakSet;function Qm(t){return e=>{e.key==="Enter"&&t(e)}}function ju(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Zk=(t,e)=>{const r=t.currentTarget;if(!r)return;const o=Qm(()=>{if(il.has(r))return;ju(r,"down");const i=Qm(()=>{ju(r,"up")}),c=()=>ju(r,"cancel");r.addEventListener("keyup",i,e),r.addEventListener("blur",c,e)});r.addEventListener("keydown",o,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",o),e)};function Zm(t){return th(t)&&!E0()}function eE(t,e,r={}){const[o,i,c]=T0(t,r),l=d=>{const h=d.currentTarget;if(!Zm(d))return;il.add(h);const p=e(h,d),v=(S,_)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",w),il.has(h)&&il.delete(h),Zm(S)&&typeof p=="function"&&p(S,{success:_})},g=S=>{v(S,h===window||h===document||r.useGlobalTarget||P0(h,S.target))},w=S=>{v(S,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",w,i)};return o.forEach(d=>{(r.useGlobalTarget?window:d).addEventListener("pointerdown",l,i),k0(d)&&(d.addEventListener("focus",p=>Zk(p,i)),!Qk(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),c}function C0(t){return Vv(t)&&"ownerSVGElement"in t}function tE(t){return C0(t)&&t.tagName==="svg"}const Vt=t=>!!(t&&t.getVelocity),nE=[...x0,vt,Vr],rE=t=>nE.find(w0(t)),nh=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function eg(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function sE(...t){return e=>{let r=!1;const o=t.map(i=>{const c=eg(i,e);return!r&&typeof c=="function"&&(r=!0),c});if(r)return()=>{for(let i=0;i<o.length;i++){const c=o[i];typeof c=="function"?c():eg(t[i],null)}}}}function oE(...t){return b.useCallback(sE(...t),t)}class iE extends b.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const o=r.offsetParent,i=k0(o)&&o.offsetWidth||0,c=this.props.sizeRef.current;c.height=r.offsetHeight||0,c.width=r.offsetWidth||0,c.top=r.offsetTop,c.left=r.offsetLeft,c.right=i-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function aE({children:t,isPresent:e,anchorX:r,root:o}){const i=b.useId(),c=b.useRef(null),l=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=b.useContext(nh),h=oE(c,t?.ref);return b.useInsertionEffect(()=>{const{width:p,height:v,top:g,left:w,right:S}=l.current;if(e||!c.current||!p||!v)return;const _=r==="left"?`left: ${w}`:`right: ${S}`;c.current.dataset.motionPopId=i;const k=document.createElement("style");d&&(k.nonce=d);const E=o??document.head;return E.appendChild(k),k.sheet&&k.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${v}px !important;
            ${_}px !important;
            top: ${g}px !important;
          }
        `),()=>{E.contains(k)&&E.removeChild(k)}},[e]),m.jsx(iE,{isPresent:e,childRef:c,sizeRef:l,children:b.cloneElement(t,{ref:h})})}const lE=({children:t,initial:e,isPresent:r,onExitComplete:o,custom:i,presenceAffectsLayout:c,mode:l,anchorX:d,root:h})=>{const p=Ld(cE),v=b.useId();let g=!0,w=b.useMemo(()=>(g=!1,{id:v,initial:e,isPresent:r,custom:i,onExitComplete:S=>{p.set(S,!0);for(const _ of p.values())if(!_)return;o&&o()},register:S=>(p.set(S,!1),()=>p.delete(S))}),[r,p,o]);return c&&g&&(w={...w}),b.useMemo(()=>{p.forEach((S,_)=>p.set(_,!1))},[r]),b.useEffect(()=>{!r&&!p.size&&o&&o()},[r]),l==="popLayout"&&(t=m.jsx(aE,{isPresent:r,anchorX:d,root:h,children:t})),m.jsx(Sl.Provider,{value:w,children:t})};function cE(){return new Map}function j0(t=!0){const e=b.useContext(Sl);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:o,register:i}=e,c=b.useId();b.useEffect(()=>{if(t)return i(c)},[t]);const l=b.useCallback(()=>t&&o&&o(c),[c,o,t]);return!r&&o?[!1,l]:[!0]}const Za=t=>t.key||"";function tg(t){const e=[];return b.Children.forEach(t,r=>{b.isValidElement(r)&&e.push(r)}),e}const fd=({children:t,custom:e,initial:r=!0,onExitComplete:o,presenceAffectsLayout:i=!0,mode:c="sync",propagate:l=!1,anchorX:d="left",root:h})=>{const[p,v]=j0(l),g=b.useMemo(()=>tg(t),[t]),w=l&&!p?[]:g.map(Za),S=b.useRef(!0),_=b.useRef(g),k=Ld(()=>new Map),[E,P]=b.useState(g),[I,A]=b.useState(g);$v(()=>{S.current=!1,_.current=g;for(let O=0;O<I.length;O++){const H=Za(I[O]);w.includes(H)?k.delete(H):k.get(H)!==!0&&k.set(H,!1)}},[I,w.length,w.join("-")]);const W=[];if(g!==E){let O=[...g];for(let H=0;H<I.length;H++){const M=I[H],ee=Za(M);w.includes(ee)||(O.splice(H,0,M),W.push(M))}return c==="wait"&&W.length&&(O=W),A(tg(O)),P(g),null}const{forceRender:V}=b.useContext(Rd);return m.jsx(m.Fragment,{children:I.map(O=>{const H=Za(O),M=l&&!p?!1:g===I||w.includes(H),ee=()=>{if(k.has(H))k.set(H,!0);else return;let ie=!0;k.forEach(Ee=>{Ee||(ie=!1)}),ie&&(V?.(),A(_.current),l&&v?.(),o&&o())};return m.jsx(lE,{isPresent:M,initial:!S.current||r?void 0:!1,custom:e,presenceAffectsLayout:i,mode:c,root:h,onExitComplete:M?void 0:ee,anchorX:d,children:O},H)})})},A0=b.createContext({strict:!1}),ng={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bo={};for(const t in ng)bo[t]={isEnabled:e=>ng[t].some(r=>!!e[r])};function uE(t){for(const e in t)bo[e]={...bo[e],...t[e]}}const dE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function gl(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||dE.has(t)}let N0=t=>!gl(t);function hE(t){typeof t=="function"&&(N0=e=>e.startsWith("on")?!gl(e):t(e))}try{hE(require("@emotion/is-prop-valid").default)}catch{}function fE(t,e,r){const o={};for(const i in t)i==="values"&&typeof t.values=="object"||(N0(i)||r===!0&&gl(i)||!e&&!gl(i)||t.draggable&&i.startsWith("onDrag"))&&(o[i]=t[i]);return o}const _l=b.createContext({});function kl(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ji(t){return typeof t=="string"||Array.isArray(t)}const rh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],sh=["initial",...rh];function El(t){return kl(t.animate)||sh.some(e=>ji(t[e]))}function R0(t){return!!(El(t)||t.variants)}function pE(t,e){if(El(t)){const{initial:r,animate:o}=t;return{initial:r===!1||ji(r)?r:void 0,animate:ji(o)?o:void 0}}return t.inherit!==!1?e:{}}function mE(t){const{initial:e,animate:r}=pE(t,b.useContext(_l));return b.useMemo(()=>({initial:e,animate:r}),[rg(e),rg(r)])}function rg(t){return Array.isArray(t)?t.join(" "):t}const Ai={};function gE(t){for(const e in t)Ai[e]=t[e],zd(e)&&(Ai[e].isCSSVariable=!0)}function L0(t,{layout:e,layoutId:r}){return Co.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!Ai[t]||t==="opacity")}const vE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yE=Po.length;function wE(t,e,r){let o="",i=!0;for(let c=0;c<yE;c++){const l=Po[c],d=t[l];if(d===void 0)continue;let h=!0;if(typeof d=="number"?h=d===(l.startsWith("scale")?1:0):h=parseFloat(d)===0,!h||r){const p=_0(d,Zd[l]);if(!h){i=!1;const v=vE[l]||l;o+=`${v}(${p}) `}r&&(e[l]=p)}}return o=o.trim(),r?o=r(e,i?"":o):i&&(o="none"),o}function oh(t,e,r){const{style:o,vars:i,transformOrigin:c}=t;let l=!1,d=!1;for(const h in e){const p=e[h];if(Co.has(h)){l=!0;continue}else if(zd(h)){i[h]=p;continue}else{const v=_0(p,Zd[h]);h.startsWith("origin")?(d=!0,c[h]=v):o[h]=v}}if(e.transform||(l||r?o.transform=wE(e,t.transform,r):o.transform&&(o.transform="none")),d){const{originX:h="50%",originY:p="50%",originZ:v=0}=c;o.transformOrigin=`${h} ${p} ${v}`}}const ih=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function I0(t,e,r){for(const o in e)!Vt(e[o])&&!L0(o,r)&&(t[o]=e[o])}function xE({transformTemplate:t},e){return b.useMemo(()=>{const r=ih();return oh(r,e,t),Object.assign({},r.vars,r.style)},[e])}function bE(t,e){const r=t.style||{},o={};return I0(o,r,t),Object.assign(o,xE(t,e)),o}function SE(t,e){const r={},o=bE(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=o,r}const _E={offset:"stroke-dashoffset",array:"stroke-dasharray"},kE={offset:"strokeDashoffset",array:"strokeDasharray"};function EE(t,e,r=1,o=0,i=!0){t.pathLength=1;const c=i?_E:kE;t[c.offset]=Ae.transform(-o);const l=Ae.transform(e),d=Ae.transform(r);t[c.array]=`${l} ${d}`}function O0(t,{attrX:e,attrY:r,attrScale:o,pathLength:i,pathSpacing:c=1,pathOffset:l=0,...d},h,p,v){if(oh(t,d,p),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:w}=t;g.transform&&(w.transform=g.transform,delete g.transform),(w.transform||g.transformOrigin)&&(w.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),w.transform&&(w.transformBox=v?.transformBox??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),r!==void 0&&(g.y=r),o!==void 0&&(g.scale=o),i!==void 0&&EE(g,i,c,l,!1)}const D0=()=>({...ih(),attrs:{}}),M0=t=>typeof t=="string"&&t.toLowerCase()==="svg";function TE(t,e,r,o){const i=b.useMemo(()=>{const c=D0();return O0(c,e,M0(o),t.transformTemplate,t.style),{...c.attrs,style:{...c.style}}},[e]);if(t.style){const c={};I0(c,t.style,t),i.style={...c,...i.style}}return i}const PE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ah(t){return typeof t!="string"||t.includes("-")?!1:!!(PE.indexOf(t)>-1||/[A-Z]/u.test(t))}function CE(t,e,r,{latestValues:o},i,c=!1){const d=(ah(t)?TE:SE)(e,o,i,t),h=fE(e,typeof t=="string",c),p=t!==b.Fragment?{...h,...d,ref:r}:{},{children:v}=e,g=b.useMemo(()=>Vt(v)?v.get():v,[v]);return b.createElement(t,{...p,children:g})}function sg(t){const e=[{},{}];return t?.values.forEach((r,o)=>{e[0][o]=r.get(),e[1][o]=r.getVelocity()}),e}function lh(t,e,r,o){if(typeof e=="function"){const[i,c]=sg(o);e=e(r!==void 0?r:t.custom,i,c)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,c]=sg(o);e=e(r!==void 0?r:t.custom,i,c)}return e}function al(t){return Vt(t)?t.get():t}function jE({scrapeMotionValuesFromProps:t,createRenderState:e},r,o,i){return{latestValues:AE(r,o,i,t),renderState:e()}}function AE(t,e,r,o){const i={},c=o(t,{});for(const w in c)i[w]=al(c[w]);let{initial:l,animate:d}=t;const h=El(t),p=R0(t);e&&p&&!h&&t.inherit!==!1&&(l===void 0&&(l=e.initial),d===void 0&&(d=e.animate));let v=r?r.initial===!1:!1;v=v||l===!1;const g=v?d:l;if(g&&typeof g!="boolean"&&!kl(g)){const w=Array.isArray(g)?g:[g];for(let S=0;S<w.length;S++){const _=lh(t,w[S]);if(_){const{transitionEnd:k,transition:E,...P}=_;for(const I in P){let A=P[I];if(Array.isArray(A)){const W=v?A.length-1:0;A=A[W]}A!==null&&(i[I]=A)}for(const I in k)i[I]=k[I]}}}return i}const $0=t=>(e,r)=>{const o=b.useContext(_l),i=b.useContext(Sl),c=()=>jE(t,e,o,i);return r?c():Ld(c)};function ch(t,e,r){const{style:o}=t,i={};for(const c in o)(Vt(o[c])||e.style&&Vt(e.style[c])||L0(c,t)||r?.getValue(c)?.liveStyle!==void 0)&&(i[c]=o[c]);return i}const NE=$0({scrapeMotionValuesFromProps:ch,createRenderState:ih});function F0(t,e,r){const o=ch(t,e,r);for(const i in t)if(Vt(t[i])||Vt(e[i])){const c=Po.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;o[c]=t[i]}return o}const RE=$0({scrapeMotionValuesFromProps:F0,createRenderState:D0}),LE=Symbol.for("motionComponentSymbol");function fo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function IE(t,e,r){return b.useCallback(o=>{o&&t.onMount&&t.onMount(o),e&&(o?e.mount(o):e.unmount()),r&&(typeof r=="function"?r(o):fo(r)&&(r.current=o))},[e])}const uh=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),OE="framerAppearId",V0="data-"+uh(OE),U0=b.createContext({});function DE(t,e,r,o,i){const{visualElement:c}=b.useContext(_l),l=b.useContext(A0),d=b.useContext(Sl),h=b.useContext(nh).reducedMotion,p=b.useRef(null);o=o||l.renderer,!p.current&&o&&(p.current=o(t,{visualState:e,parent:c,props:r,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const v=p.current,g=b.useContext(U0);v&&!v.projection&&i&&(v.type==="html"||v.type==="svg")&&ME(p.current,r,i,g);const w=b.useRef(!1);b.useInsertionEffect(()=>{v&&w.current&&v.update(r,d)});const S=r[V0],_=b.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return $v(()=>{v&&(w.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),v.scheduleRenderMicrotask(),_.current&&v.animationState&&v.animationState.animateChanges())}),b.useEffect(()=>{v&&(!_.current&&v.animationState&&v.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),_.current=!1),v.enteringChildren=void 0)}),v}function ME(t,e,r,o){const{layoutId:i,layout:c,drag:l,dragConstraints:d,layoutScroll:h,layoutRoot:p,layoutCrossfade:v}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:z0(t.parent)),t.projection.setOptions({layoutId:i,layout:c,alwaysMeasureLayout:!!l||d&&fo(d),visualElement:t,animationType:typeof c=="string"?c:"both",initialPromotionConfig:o,crossfade:v,layoutScroll:h,layoutRoot:p})}function z0(t){if(t)return t.options.allowProjection!==!1?t.projection:z0(t.parent)}function Au(t,{forwardMotionProps:e=!1}={},r,o){r&&uE(r);const i=ah(t)?RE:NE;function c(d,h){let p;const v={...b.useContext(nh),...d,layoutId:$E(d)},{isStatic:g}=v,w=mE(d),S=i(d,g);if(!g&&Id){FE();const _=VE(v);p=_.MeasureLayout,w.visualElement=DE(t,S,v,o,_.ProjectionNode)}return m.jsxs(_l.Provider,{value:w,children:[p&&w.visualElement?m.jsx(p,{visualElement:w.visualElement,...v}):null,CE(t,d,IE(S,w.visualElement,h),S,g,e)]})}c.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=b.forwardRef(c);return l[LE]=t,l}function $E({layoutId:t}){const e=b.useContext(Rd).id;return e&&t!==void 0?e+"-"+t:t}function FE(t,e){b.useContext(A0).strict}function VE(t){const{drag:e,layout:r}=bo;if(!e&&!r)return{};const o={...e,...r};return{MeasureLayout:e?.isEnabled(t)||r?.isEnabled(t)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function UE(t,e){if(typeof Proxy>"u")return Au;const r=new Map,o=(c,l)=>Au(c,l,t,e),i=(c,l)=>o(c,l);return new Proxy(i,{get:(c,l)=>l==="create"?o:(r.has(l)||r.set(l,Au(l,void 0,t,e)),r.get(l))})}function B0({top:t,left:e,right:r,bottom:o}){return{x:{min:e,max:r},y:{min:t,max:o}}}function zE({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function BE(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),o=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:o.y,right:o.x}}function Nu(t){return t===void 0||t===1}function pd({scale:t,scaleX:e,scaleY:r}){return!Nu(t)||!Nu(e)||!Nu(r)}function hs(t){return pd(t)||H0(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function H0(t){return og(t.x)||og(t.y)}function og(t){return t&&t!=="0%"}function vl(t,e,r){const o=t-r,i=e*o;return r+i}function ig(t,e,r,o,i){return i!==void 0&&(t=vl(t,i,o)),vl(t,r,o)+e}function md(t,e=0,r=1,o,i){t.min=ig(t.min,e,r,o,i),t.max=ig(t.max,e,r,o,i)}function W0(t,{x:e,y:r}){md(t.x,e.translate,e.scale,e.originPoint),md(t.y,r.translate,r.scale,r.originPoint)}const ag=.999999999999,lg=1.0000000000001;function HE(t,e,r,o=!1){const i=r.length;if(!i)return;e.x=e.y=1;let c,l;for(let d=0;d<i;d++){c=r[d],l=c.projectionDelta;const{visualElement:h}=c.options;h&&h.props.style&&h.props.style.display==="contents"||(o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&mo(t,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,W0(t,l)),o&&hs(c.latestValues)&&mo(t,c.latestValues))}e.x<lg&&e.x>ag&&(e.x=1),e.y<lg&&e.y>ag&&(e.y=1)}function po(t,e){t.min=t.min+e,t.max=t.max+e}function cg(t,e,r,o,i=.5){const c=nt(t.min,t.max,i);md(t,e,r,c,o)}function mo(t,e){cg(t.x,e.x,e.scaleX,e.scale,e.originX),cg(t.y,e.y,e.scaleY,e.scale,e.originY)}function q0(t,e){return B0(BE(t.getBoundingClientRect(),e))}function WE(t,e,r){const o=q0(t,r),{scroll:i}=e;return i&&(po(o.x,i.offset.x),po(o.y,i.offset.y)),o}const ug=()=>({translate:0,scale:1,origin:0,originPoint:0}),go=()=>({x:ug(),y:ug()}),dg=()=>({min:0,max:0}),dt=()=>({x:dg(),y:dg()}),gd={current:null},K0={current:!1};function qE(){if(K0.current=!0,!!Id)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>gd.current=t.matches;t.addEventListener("change",e),e()}else gd.current=!1}const KE=new WeakMap;function GE(t,e,r){for(const o in e){const i=e[o],c=r[o];if(Vt(i))t.addValue(o,i);else if(Vt(c))t.addValue(o,xo(i,{owner:t}));else if(c!==i)if(t.hasValue(o)){const l=t.getValue(o);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=t.getStaticValue(o);t.addValue(o,xo(l!==void 0?l:i,{owner:t}))}}for(const o in r)e[o]===void 0&&t.removeValue(o);return e}const hg=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class YE{scrapeMotionValuesFromProps(e,r,o){return{}}constructor({parent:e,props:r,presenceContext:o,reducedMotionConfig:i,blockInitialAnimation:c,visualState:l},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Xd,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=rn.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,Je.render(this.render,!1,!0))};const{latestValues:h,renderState:p}=l;this.latestValues=h,this.baseTarget={...h},this.initialValues=r.initial?{...h}:{},this.renderState=p,this.parent=e,this.props=r,this.presenceContext=o,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=d,this.blockInitialAnimation=!!c,this.isControllingVariants=El(r),this.isVariantNode=R0(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...g}=this.scrapeMotionValuesFromProps(r,{},this);for(const w in g){const S=g[w];h[w]!==void 0&&Vt(S)&&S.set(h[w])}}mount(e){this.current=e,KE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,o)=>this.bindToMotionValue(o,r)),K0.current||qE(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gd.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Fr(this.notifyUpdate),Fr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const o=Co.has(e);o&&this.onBindTransform&&this.onBindTransform();const i=r.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Je.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{i(),c&&c(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in bo){const r=bo[e];if(!r)continue;const{isEnabled:o,Feature:i}=r;if(!this.features[e]&&i&&o(this.props)&&(this.features[e]=new i(this)),this.features[e]){const c=this.features[e];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let o=0;o<hg.length;o++){const i=hg[o];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const c="on"+i,l=e[c];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=GE(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const o=this.values.get(e);r!==o&&(o&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let o=this.values.get(e);return o===void 0&&r!==void 0&&(o=xo(r===null?void 0:r,{owner:this}),this.addValue(e,o)),o}readValue(e,r){let o=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return o!=null&&(typeof o=="string"&&(Fv(o)||Uv(o))?o=parseFloat(o):!rE(o)&&Vr.test(r)&&(o=S0(e,r)),this.setBaseTarget(e,Vt(o)?o.get():o)),Vt(o)?o.get():o}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){const{initial:r}=this.props;let o;if(typeof r=="string"||typeof r=="object"){const c=lh(this.props,r,this.presenceContext?.custom);c&&(o=c[e])}if(r&&o!==void 0)return o;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Vt(i)?i:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new Fd),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}scheduleRenderMicrotask(){eh.render(this.render)}}class G0 extends YE{constructor(){super(...arguments),this.KeyframeResolver=Wk}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:o}){delete r[e],delete o[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vt(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function Y0(t,{style:e,vars:r},o,i){const c=t.style;let l;for(l in e)c[l]=e[l];i?.applyProjectionStyles(c,o);for(l in r)c.setProperty(l,r[l])}function JE(t){return window.getComputedStyle(t)}class XE extends G0{constructor(){super(...arguments),this.type="html",this.renderInstance=Y0}readValueFromInstance(e,r){if(Co.has(r))return this.projection?.isProjecting?id(r):uk(e,r);{const o=JE(e),i=(zd(r)?o.getPropertyValue(r):o[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:r}){return q0(e,r)}build(e,r,o){oh(e,r,o.transformTemplate)}scrapeMotionValuesFromProps(e,r,o){return ch(e,r,o)}}const J0=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function QE(t,e,r,o){Y0(t,e,void 0,o);for(const i in e.attrs)t.setAttribute(J0.has(i)?i:uh(i),e.attrs[i])}class ZE extends G0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=dt}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(Co.has(r)){const o=b0(r);return o&&o.default||0}return r=J0.has(r)?r:uh(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,o){return F0(e,r,o)}build(e,r,o){O0(e,r,this.isSVGTag,o.transformTemplate,o.style)}renderInstance(e,r,o,i){QE(e,r,o,i)}mount(e){this.isSVGTag=M0(e.tagName),super.mount(e)}}const eT=(t,e)=>ah(t)?new ZE(e):new XE(e,{allowProjection:t!==b.Fragment});function yo(t,e,r){const o=t.getProps();return lh(o,e,r!==void 0?r:o.custom,t)}const vd=t=>Array.isArray(t);function tT(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,xo(r))}function nT(t){return vd(t)?t[t.length-1]||0:t}function rT(t,e){const r=yo(t,e);let{transitionEnd:o={},transition:i={},...c}=r||{};c={...c,...o};for(const l in c){const d=nT(c[l]);tT(t,l,d)}}function sT(t){return!!(Vt(t)&&t.add)}function yd(t,e){const r=t.getValue("willChange");if(sT(r))return r.add(e);if(!r&&dr.WillChange){const o=new dr.WillChange("auto");t.addValue("willChange",o),o.add(e)}}function X0(t){return t.props[V0]}const oT=t=>t!==null;function iT(t,{repeat:e,repeatType:r="loop"},o){const i=t.filter(oT),c=e&&r!=="loop"&&e%2===1?0:i.length-1;return i[c]}const aT={type:"spring",stiffness:500,damping:25,restSpeed:10},lT=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),cT={type:"keyframes",duration:.8},uT={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},dT=(t,{keyframes:e})=>e.length>2?cT:Co.has(t)?t.startsWith("scale")?lT(e[1]):aT:uT;function hT({when:t,delay:e,delayChildren:r,staggerChildren:o,staggerDirection:i,repeat:c,repeatType:l,repeatDelay:d,from:h,elapsed:p,...v}){return!!Object.keys(v).length}const dh=(t,e,r,o={},i,c)=>l=>{const d=Qd(o,t)||{},h=d.delay||o.delay||0;let{elapsed:p=0}=o;p=p-Yn(h);const v={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-p,onUpdate:w=>{e.set(w),d.onUpdate&&d.onUpdate(w)},onComplete:()=>{l(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:c?void 0:i};hT(d)||Object.assign(v,dT(t,v)),v.duration&&(v.duration=Yn(v.duration)),v.repeatDelay&&(v.repeatDelay=Yn(v.repeatDelay)),v.from!==void 0&&(v.keyframes[0]=v.from);let g=!1;if((v.type===!1||v.duration===0&&!v.repeatDelay)&&(dd(v),v.delay===0&&(g=!0)),(dr.instantAnimations||dr.skipAnimations)&&(g=!0,dd(v),v.delay=0),v.allowFlatten=!d.type&&!d.ease,g&&!c&&e.get()!==void 0){const w=iT(v.keyframes,d);if(w!==void 0){Je.update(()=>{v.onUpdate(w),v.onComplete()});return}}return d.isSync?new Jd(v):new Lk(v)};function fT({protectedKeys:t,needsAnimating:e},r){const o=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,o}function Q0(t,e,{delay:r=0,transitionOverride:o,type:i}={}){let{transition:c=t.getDefaultTransition(),transitionEnd:l,...d}=e;o&&(c=o);const h=[],p=i&&t.animationState&&t.animationState.getState()[i];for(const v in d){const g=t.getValue(v,t.latestValues[v]??null),w=d[v];if(w===void 0||p&&fT(p,v))continue;const S={delay:r,...Qd(c||{},v)},_=g.get();if(_!==void 0&&!g.isAnimating&&!Array.isArray(w)&&w===_&&!S.velocity)continue;let k=!1;if(window.MotionHandoffAnimation){const P=X0(t);if(P){const I=window.MotionHandoffAnimation(P,v,Je);I!==null&&(S.startTime=I,k=!0)}}yd(t,v),g.start(dh(v,g,w,t.shouldReduceMotion&&y0.has(v)?{type:!1}:S,t,k));const E=g.animation;E&&h.push(E)}return l&&Promise.all(h).then(()=>{Je.update(()=>{l&&rT(t,l)})}),h}function Z0(t,e,r,o=0,i=1){const c=Array.from(t).sort((p,v)=>p.sortNodePosition(v)).indexOf(e),l=t.size,d=(l-1)*o;return typeof r=="function"?r(c,l):i===1?c*o:d-c*o}function wd(t,e,r={}){const o=yo(t,e,r.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=o||{};r.transitionOverride&&(i=r.transitionOverride);const c=o?()=>Promise.all(Q0(t,o,r)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:p=0,staggerChildren:v,staggerDirection:g}=i;return pT(t,e,h,p,v,g,r)}:()=>Promise.resolve(),{when:d}=i;if(d){const[h,p]=d==="beforeChildren"?[c,l]:[l,c];return h().then(()=>p())}else return Promise.all([c(),l(r.delay)])}function pT(t,e,r=0,o=0,i=0,c=1,l){const d=[];for(const h of t.variantChildren)h.notify("AnimationStart",e),d.push(wd(h,e,{...l,delay:r+(typeof o=="function"?0:o)+Z0(t.variantChildren,h,o,i,c)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(d)}function mT(t,e,r={}){t.notify("AnimationStart",e);let o;if(Array.isArray(e)){const i=e.map(c=>wd(t,c,r));o=Promise.all(i)}else if(typeof e=="string")o=wd(t,e,r);else{const i=typeof e=="function"?yo(t,e,r.custom):e;o=Promise.all(Q0(t,i,r))}return o.then(()=>{t.notify("AnimationComplete",e)})}function ey(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let o=0;o<r;o++)if(e[o]!==t[o])return!1;return!0}const gT=sh.length;function ty(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?ty(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<gT;r++){const o=sh[r],i=t.props[o];(ji(i)||i===!1)&&(e[o]=i)}return e}const vT=[...rh].reverse(),yT=rh.length;function wT(t){return e=>Promise.all(e.map(({animation:r,options:o})=>mT(t,r,o)))}function xT(t){let e=wT(t),r=fg(),o=!0;const i=h=>(p,v)=>{const g=yo(t,v,h==="exit"?t.presenceContext?.custom:void 0);if(g){const{transition:w,transitionEnd:S,..._}=g;p={...p,..._,...S}}return p};function c(h){e=h(t)}function l(h){const{props:p}=t,v=ty(t.parent)||{},g=[],w=new Set;let S={},_=1/0;for(let E=0;E<yT;E++){const P=vT[E],I=r[P],A=p[P]!==void 0?p[P]:v[P],W=ji(A),V=P===h?I.isActive:null;V===!1&&(_=E);let O=A===v[P]&&A!==p[P]&&W;if(O&&o&&t.manuallyAnimateOnMount&&(O=!1),I.protectedKeys={...S},!I.isActive&&V===null||!A&&!I.prevProp||kl(A)||typeof A=="boolean")continue;const H=bT(I.prevProp,A);let M=H||P===h&&I.isActive&&!O&&W||E>_&&W,ee=!1;const ie=Array.isArray(A)?A:[A];let Ee=ie.reduce(i(P),{});V===!1&&(Ee={});const{prevResolvedValues:he={}}=I,we={...he,...Ee},_e=U=>{M=!0,w.has(U)&&(ee=!0,w.delete(U)),I.needsAnimating[U]=!0;const C=t.getValue(U);C&&(C.liveStyle=!1)};for(const U in we){const C=Ee[U],re=he[U];if(S.hasOwnProperty(U))continue;let K=!1;vd(C)&&vd(re)?K=!ey(C,re):K=C!==re,K?C!=null?_e(U):w.add(U):C!==void 0&&w.has(U)?_e(U):I.protectedKeys[U]=!0}I.prevProp=A,I.prevResolvedValues=Ee,I.isActive&&(S={...S,...Ee}),o&&t.blockInitialAnimation&&(M=!1);const xe=O&&H;M&&(!xe||ee)&&g.push(...ie.map(U=>{const C={type:P};if(typeof U=="string"&&o&&!xe&&t.manuallyAnimateOnMount&&t.parent){const{parent:re}=t,K=yo(re,U);if(re.enteringChildren&&K){const{delayChildren:R}=K.transition||{};C.delay=Z0(re.enteringChildren,t,R)}}return{animation:U,options:C}}))}if(w.size){const E={};if(typeof p.initial!="boolean"){const P=yo(t,Array.isArray(p.initial)?p.initial[0]:p.initial);P&&P.transition&&(E.transition=P.transition)}w.forEach(P=>{const I=t.getBaseTarget(P),A=t.getValue(P);A&&(A.liveStyle=!0),E[P]=I??null}),g.push({animation:E})}let k=!!g.length;return o&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(k=!1),o=!1,k?e(g):Promise.resolve()}function d(h,p){if(r[h].isActive===p)return Promise.resolve();t.variantChildren?.forEach(g=>g.animationState?.setActive(h,p)),r[h].isActive=p;const v=l(h);for(const g in r)r[g].protectedKeys={};return v}return{animateChanges:l,setActive:d,setAnimateFunction:c,getState:()=>r,reset:()=>{r=fg(),o=!0}}}function bT(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!ey(e,t):!1}function as(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function fg(){return{animate:as(!0),whileInView:as(),whileHover:as(),whileTap:as(),whileDrag:as(),whileFocus:as(),exit:as()}}class Br{constructor(e){this.isMounted=!1,this.node=e}update(){}}class ST extends Br{constructor(e){super(e),e.animationState||(e.animationState=xT(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();kl(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let _T=0;class kT extends Br{constructor(){super(...arguments),this.id=_T++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===o)return;const i=this.node.animationState.setActive("exit",!e);r&&!e&&i.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const ET={animation:{Feature:ST},exit:{Feature:kT}};function Ni(t,e,r,o={passive:!0}){return t.addEventListener(e,r,o),()=>t.removeEventListener(e,r)}function Di(t){return{point:{x:t.pageX,y:t.pageY}}}const TT=t=>e=>th(e)&&t(e,Di(e));function bi(t,e,r,o){return Ni(t,e,TT(r),o)}const ny=1e-4,PT=1-ny,CT=1+ny,ry=.01,jT=0-ry,AT=0+ry;function qt(t){return t.max-t.min}function NT(t,e,r){return Math.abs(t-e)<=r}function pg(t,e,r,o=.5){t.origin=o,t.originPoint=nt(e.min,e.max,t.origin),t.scale=qt(r)/qt(e),t.translate=nt(r.min,r.max,t.origin)-t.originPoint,(t.scale>=PT&&t.scale<=CT||isNaN(t.scale))&&(t.scale=1),(t.translate>=jT&&t.translate<=AT||isNaN(t.translate))&&(t.translate=0)}function Si(t,e,r,o){pg(t.x,e.x,r.x,o?o.originX:void 0),pg(t.y,e.y,r.y,o?o.originY:void 0)}function mg(t,e,r){t.min=r.min+e.min,t.max=t.min+qt(e)}function RT(t,e,r){mg(t.x,e.x,r.x),mg(t.y,e.y,r.y)}function gg(t,e,r){t.min=e.min-r.min,t.max=t.min+qt(e)}function _i(t,e,r){gg(t.x,e.x,r.x),gg(t.y,e.y,r.y)}function Sn(t){return[t("x"),t("y")]}const sy=({current:t})=>t?t.ownerDocument.defaultView:null,vg=(t,e)=>Math.abs(t-e);function LT(t,e){const r=vg(t.x,e.x),o=vg(t.y,e.y);return Math.sqrt(r**2+o**2)}class oy{constructor(e,r,{transformPagePoint:o,contextWindow:i=window,dragSnapToOrigin:c=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Lu(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,_=LT(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!_)return;const{point:k}=w,{timestamp:E}=Lt;this.history.push({...k,timestamp:E});const{onStart:P,onMove:I}=this.handlers;S||(P&&P(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),I&&I(this.lastMoveEvent,w)},this.handlePointerMove=(w,S)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=Ru(S,this.transformPagePoint),Je.update(this.updatePoint,!0)},this.handlePointerUp=(w,S)=>{this.end();const{onEnd:_,onSessionEnd:k,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=Lu(w.type==="pointercancel"?this.lastMoveEventInfo:Ru(S,this.transformPagePoint),this.history);this.startEvent&&_&&_(w,P),k&&k(w,P)},!th(e))return;this.dragSnapToOrigin=c,this.handlers=r,this.transformPagePoint=o,this.distanceThreshold=l,this.contextWindow=i||window;const d=Di(e),h=Ru(d,this.transformPagePoint),{point:p}=h,{timestamp:v}=Lt;this.history=[{...p,timestamp:v}];const{onSessionStart:g}=r;g&&g(e,Lu(h,this.history)),this.removeListeners=Li(bi(this.contextWindow,"pointermove",this.handlePointerMove),bi(this.contextWindow,"pointerup",this.handlePointerUp),bi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Fr(this.updatePoint)}}function Ru(t,e){return e?{point:e(t.point)}:t}function yg(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Lu({point:t},e){return{point:t,delta:yg(t,iy(e)),offset:yg(t,IT(e)),velocity:OT(e,.1)}}function IT(t){return t[0]}function iy(t){return t[t.length-1]}function OT(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,o=null;const i=iy(t);for(;r>=0&&(o=t[r],!(i.timestamp-o.timestamp>Yn(e)));)r--;if(!o)return{x:0,y:0};const c=_n(i.timestamp-o.timestamp);if(c===0)return{x:0,y:0};const l={x:(i.x-o.x)/c,y:(i.y-o.y)/c};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function DT(t,{min:e,max:r},o){return e!==void 0&&t<e?t=o?nt(e,t,o.min):Math.max(t,e):r!==void 0&&t>r&&(t=o?nt(r,t,o.max):Math.min(t,r)),t}function wg(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function MT(t,{top:e,left:r,bottom:o,right:i}){return{x:wg(t.x,r,i),y:wg(t.y,e,o)}}function xg(t,e){let r=e.min-t.min,o=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,o]=[o,r]),{min:r,max:o}}function $T(t,e){return{x:xg(t.x,e.x),y:xg(t.y,e.y)}}function FT(t,e){let r=.5;const o=qt(t),i=qt(e);return i>o?r=Ti(e.min,e.max-o,t.min):o>i&&(r=Ti(t.min,t.max-i,e.min)),ur(0,1,r)}function VT(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const xd=.35;function UT(t=xd){return t===!1?t=0:t===!0&&(t=xd),{x:bg(t,"left","right"),y:bg(t,"top","bottom")}}function bg(t,e,r){return{min:Sg(t,e),max:Sg(t,r)}}function Sg(t,e){return typeof t=="number"?t:t[e]||0}const zT=new WeakMap;class BT{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=dt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:o}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const c=g=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Di(g).point)},l=(g,w)=>{const{drag:S,dragPropagation:_,onDragStart:k}=this.getProps();if(S&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Yk(S),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Sn(P=>{let I=this.getAxisMotionValue(P).get()||0;if(Jn.test(I)){const{projection:A}=this.visualElement;if(A&&A.layout){const W=A.layout.layoutBox[P];W&&(I=qt(W)*(parseFloat(I)/100))}}this.originPoint[P]=I}),k&&Je.postRender(()=>k(g,w)),yd(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},d=(g,w)=>{this.latestPointerEvent=g,this.latestPanInfo=w;const{dragPropagation:S,dragDirectionLock:_,onDirectionLock:k,onDrag:E}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:P}=w;if(_&&this.currentDirection===null){this.currentDirection=HT(P),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",w.point,P),this.updateAxis("y",w.point,P),this.visualElement.render(),E&&E(g,w)},h=(g,w)=>{this.latestPointerEvent=g,this.latestPanInfo=w,this.stop(g,w),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>Sn(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:v}=this.getProps();this.panSession=new oy(e,{onSessionStart:c,onStart:l,onMove:d,onSessionEnd:h,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:v,distanceThreshold:o,contextWindow:sy(this.visualElement)})}stop(e,r){const o=e||this.latestPointerEvent,i=r||this.latestPanInfo,c=this.isDragging;if(this.cancel(),!c||!i||!o)return;const{velocity:l}=i;this.startAnimation(l);const{onDragEnd:d}=this.getProps();d&&Je.postRender(()=>d(o,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,o){const{drag:i}=this.getProps();if(!o||!el(e,i,this.currentDirection))return;const c=this.getAxisMotionValue(e);let l=this.originPoint[e]+o[e];this.constraints&&this.constraints[e]&&(l=DT(l,this.constraints[e],this.elastic[e])),c.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:r}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&fo(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&o?this.constraints=MT(o.layoutBox,e):this.constraints=!1,this.elastic=UT(r),i!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&Sn(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=VT(o.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!fo(e))return!1;const o=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const c=WE(o,i.root,this.visualElement.getTransformPagePoint());let l=$T(i.layout.layoutBox,c);if(r){const d=r(zE(l));this.hasMutatedConstraints=!!d,d&&(l=B0(d))}return l}startAnimation(e){const{drag:r,dragMomentum:o,dragElastic:i,dragTransition:c,dragSnapToOrigin:l,onDragTransitionEnd:d}=this.getProps(),h=this.constraints||{},p=Sn(v=>{if(!el(v,r,this.currentDirection))return;let g=h&&h[v]||{};l&&(g={min:0,max:0});const w=i?200:1e6,S=i?40:1e7,_={type:"inertia",velocity:o?e[v]:0,bounceStiffness:w,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...c,...g};return this.startAxisValueAnimation(v,_)});return Promise.all(p).then(d)}startAxisValueAnimation(e,r){const o=this.getAxisMotionValue(e);return yd(this.visualElement,e),o.start(dh(e,o,0,r,this.visualElement,!1))}stopAnimation(){Sn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Sn(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,o=this.visualElement.getProps(),i=o[r];return i||this.visualElement.getValue(e,(o.initial?o.initial[e]:void 0)||0)}snapToCursor(e){Sn(r=>{const{drag:o}=this.getProps();if(!el(r,o,this.currentDirection))return;const{projection:i}=this.visualElement,c=this.getAxisMotionValue(r);if(i&&i.layout){const{min:l,max:d}=i.layout.layoutBox[r];c.set(e[r]-nt(l,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:o}=this.visualElement;if(!fo(r)||!o||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Sn(l=>{const d=this.getAxisMotionValue(l);if(d&&this.constraints!==!1){const h=d.get();i[l]=FT({min:h,max:h},this.constraints[l])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),Sn(l=>{if(!el(l,e,null))return;const d=this.getAxisMotionValue(l),{min:h,max:p}=this.constraints[l];d.set(nt(h,p,i[l]))})}addListeners(){if(!this.visualElement.current)return;zT.set(this.visualElement,this);const e=this.visualElement.current,r=bi(e,"pointerdown",h=>{const{drag:p,dragListener:v=!0}=this.getProps();p&&v&&this.start(h)}),o=()=>{const{dragConstraints:h}=this.getProps();fo(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,c=i.addEventListener("measure",o);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Je.read(o);const l=Ni(window,"resize",()=>this.scalePositionWithinConstraints()),d=i.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:p})=>{this.isDragging&&p&&(Sn(v=>{const g=this.getAxisMotionValue(v);g&&(this.originPoint[v]+=h[v].translate,g.set(g.get()+h[v].translate))}),this.visualElement.render())}));return()=>{l(),r(),c(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:o=!1,dragPropagation:i=!1,dragConstraints:c=!1,dragElastic:l=xd,dragMomentum:d=!0}=e;return{...e,drag:r,dragDirectionLock:o,dragPropagation:i,dragConstraints:c,dragElastic:l,dragMomentum:d}}}function el(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function HT(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class WT extends Br{constructor(e){super(e),this.removeGroupControls=kn,this.removeListeners=kn,this.controls=new BT(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||kn}unmount(){this.removeGroupControls(),this.removeListeners()}}const _g=t=>(e,r)=>{t&&Je.postRender(()=>t(e,r))};class qT extends Br{constructor(){super(...arguments),this.removePointerDownListener=kn}onPointerDown(e){this.session=new oy(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sy(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:o,onPanEnd:i}=this.node.getProps();return{onSessionStart:_g(e),onStart:_g(r),onMove:o,onEnd:(c,l)=>{delete this.session,i&&Je.postRender(()=>i(c,l))}}}mount(){this.removePointerDownListener=bi(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ll={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kg(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const hi={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ae.test(t))t=parseFloat(t);else return t;const r=kg(t,e.target.x),o=kg(t,e.target.y);return`${r}% ${o}%`}},KT={correct:(t,{treeScale:e,projectionDelta:r})=>{const o=t,i=Vr.parse(t);if(i.length>5)return o;const c=Vr.createTransformer(t),l=typeof i[0]!="number"?1:0,d=r.x.scale*e.x,h=r.y.scale*e.y;i[0+l]/=d,i[1+l]/=h;const p=nt(d,h,.5);return typeof i[2+l]=="number"&&(i[2+l]/=p),typeof i[3+l]=="number"&&(i[3+l]/=p),c(i)}};let Iu=!1;class GT extends b.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:o,layoutId:i}=this.props,{projection:c}=e;gE(YT),c&&(r.group&&r.group.add(c),o&&o.register&&i&&o.register(c),Iu&&c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),ll.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:o,drag:i,isPresent:c}=this.props,{projection:l}=o;return l&&(l.isPresent=c,Iu=!0,i||e.layoutDependency!==r||r===void 0||e.isPresent!==c?l.willUpdate():this.safeToRemove(),e.isPresent!==c&&(c?l.promote():l.relegate()||Je.postRender(()=>{const d=l.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),eh.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:o}=this.props,{projection:i}=e;Iu=!0,i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),o&&o.deregister&&o.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ay(t){const[e,r]=j0(),o=b.useContext(Rd);return m.jsx(GT,{...t,layoutGroup:o,switchLayoutGroup:b.useContext(U0),isPresent:e,safeToRemove:r})}const YT={borderRadius:{...hi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:hi,borderTopRightRadius:hi,borderBottomLeftRadius:hi,borderBottomRightRadius:hi,boxShadow:KT};function JT(t,e,r){const o=Vt(t)?t:xo(t);return o.start(dh("",o,e,r)),o.animation}const XT=(t,e)=>t.depth-e.depth;class QT{constructor(){this.children=[],this.isDirty=!1}add(e){Od(this.children,e),this.isDirty=!0}remove(e){Dd(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(XT),this.isDirty=!1,this.children.forEach(e)}}function ZT(t,e){const r=rn.now(),o=({timestamp:i})=>{const c=i-r;c>=e&&(Fr(o),t(c-e))};return Je.setup(o,!0),()=>Fr(o)}const ly=["TopLeft","TopRight","BottomLeft","BottomRight"],e2=ly.length,Eg=t=>typeof t=="string"?parseFloat(t):t,Tg=t=>typeof t=="number"||Ae.test(t);function t2(t,e,r,o,i,c){i?(t.opacity=nt(0,r.opacity??1,n2(o)),t.opacityExit=nt(e.opacity??1,0,r2(o))):c&&(t.opacity=nt(e.opacity??1,r.opacity??1,o));for(let l=0;l<e2;l++){const d=`border${ly[l]}Radius`;let h=Pg(e,d),p=Pg(r,d);if(h===void 0&&p===void 0)continue;h||(h=0),p||(p=0),h===0||p===0||Tg(h)===Tg(p)?(t[d]=Math.max(nt(Eg(h),Eg(p),o),0),(Jn.test(p)||Jn.test(h))&&(t[d]+="%")):t[d]=p}(e.rotate||r.rotate)&&(t.rotate=nt(e.rotate||0,r.rotate||0,o))}function Pg(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const n2=cy(0,.5,Yv),r2=cy(.5,.95,kn);function cy(t,e,r){return o=>o<t?0:o>e?1:r(Ti(t,e,o))}function Cg(t,e){t.min=e.min,t.max=e.max}function bn(t,e){Cg(t.x,e.x),Cg(t.y,e.y)}function jg(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Ag(t,e,r,o,i){return t-=e,t=vl(t,1/r,o),i!==void 0&&(t=vl(t,1/i,o)),t}function s2(t,e=0,r=1,o=.5,i,c=t,l=t){if(Jn.test(e)&&(e=parseFloat(e),e=nt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let d=nt(c.min,c.max,o);t===c&&(d-=e),t.min=Ag(t.min,e,r,d,i),t.max=Ag(t.max,e,r,d,i)}function Ng(t,e,[r,o,i],c,l){s2(t,e[r],e[o],e[i],e.scale,c,l)}const o2=["x","scaleX","originX"],i2=["y","scaleY","originY"];function Rg(t,e,r,o){Ng(t.x,e,o2,r?r.x:void 0,o?o.x:void 0),Ng(t.y,e,i2,r?r.y:void 0,o?o.y:void 0)}function Lg(t){return t.translate===0&&t.scale===1}function uy(t){return Lg(t.x)&&Lg(t.y)}function Ig(t,e){return t.min===e.min&&t.max===e.max}function a2(t,e){return Ig(t.x,e.x)&&Ig(t.y,e.y)}function Og(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function dy(t,e){return Og(t.x,e.x)&&Og(t.y,e.y)}function Dg(t){return qt(t.x)/qt(t.y)}function Mg(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class l2{constructor(){this.members=[]}add(e){Od(this.members,e),e.scheduleRender()}remove(e){if(Dd(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(i=>e===i);if(r===0)return!1;let o;for(let i=r;i>=0;i--){const c=this.members[i];if(c.isPresent!==!1){o=c;break}}return o?(this.promote(o),!0):!1}promote(e,r){const o=this.lead;if(e!==o&&(this.prevLead=o,this.lead=e,e.show(),o)){o.instance&&o.scheduleRender(),e.scheduleRender(),e.resumeFrom=o,r&&(e.resumeFrom.preserveOpacity=!0),o.snapshot&&(e.snapshot=o.snapshot,e.snapshot.latestValues=o.animationValues||o.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:o}=e;r.onExitComplete&&r.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function c2(t,e,r){let o="";const i=t.x.translate/e.x,c=t.y.translate/e.y,l=r?.z||0;if((i||c||l)&&(o=`translate3d(${i}px, ${c}px, ${l}px) `),(e.x!==1||e.y!==1)&&(o+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:p,rotate:v,rotateX:g,rotateY:w,skewX:S,skewY:_}=r;p&&(o=`perspective(${p}px) ${o}`),v&&(o+=`rotate(${v}deg) `),g&&(o+=`rotateX(${g}deg) `),w&&(o+=`rotateY(${w}deg) `),S&&(o+=`skewX(${S}deg) `),_&&(o+=`skewY(${_}deg) `)}const d=t.x.scale*e.x,h=t.y.scale*e.y;return(d!==1||h!==1)&&(o+=`scale(${d}, ${h})`),o||"none"}const Ou=["","X","Y","Z"],u2=1e3;let d2=0;function Du(t,e,r,o){const{latestValues:i}=e;i[t]&&(r[t]=i[t],e.setStaticValue(t,0),o&&(o[t]=0))}function hy(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=X0(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:c}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",Je,!(i||c))}const{parent:o}=t;o&&!o.hasCheckedOptimisedAppear&&hy(o)}function fy({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:o,resetTransform:i}){return class{constructor(l={},d=e?.()){this.id=d2++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(p2),this.nodes.forEach(y2),this.nodes.forEach(w2),this.nodes.forEach(m2)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new QT)}addEventListener(l,d){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Fd),this.eventHandlers.get(l).add(d)}notifyListeners(l,...d){const h=this.eventHandlers.get(l);h&&h.notify(...d)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=C0(l)&&!tE(l),this.instance=l;const{layoutId:d,layout:h,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||d)&&(this.isLayoutDirty=!0),t){let v,g=0;const w=()=>this.root.updateBlockedByResize=!1;Je.read(()=>{g=window.innerWidth}),t(l,()=>{const S=window.innerWidth;S!==g&&(g=S,this.root.updateBlockedByResize=!0,v&&v(),v=ZT(w,250),ll.hasAnimatedSinceResize&&(ll.hasAnimatedSinceResize=!1,this.nodes.forEach(Vg)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&p&&(d||h)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:g,hasRelativeLayoutChanged:w,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||p.getDefaultTransition()||k2,{onLayoutAnimationStart:k,onLayoutAnimationComplete:E}=p.getProps(),P=!this.targetLayout||!dy(this.targetLayout,S),I=!g&&w;if(this.options.layoutRoot||this.resumeFrom||I||g&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const A={...Qd(_,"layout"),onPlay:k,onComplete:E};(p.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A),this.setAnimationOrigin(v,I)}else g||Vg(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Fr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(x2),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&hy(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const g=this.path[v];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:d,layout:h}=this.options;if(d===void 0&&!h)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($g);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Fg);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(v2),this.nodes.forEach(h2),this.nodes.forEach(f2)):this.nodes.forEach(Fg),this.clearAllSnapshots();const d=rn.now();Lt.delta=ur(0,1e3/60,d-Lt.timestamp),Lt.timestamp=d,Lt.isProcessing=!0,ku.update.process(Lt),ku.preRender.process(Lt),ku.render.process(Lt),Lt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,eh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(g2),this.sharedNodes.forEach(b2)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Je.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Je.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!qt(this.snapshot.measuredBox.x)&&!qt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(d=!1),d&&this.instance){const h=o(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!uy(this.projectionDelta),h=this.getTransformTemplate(),p=h?h(this.latestValues,""):void 0,v=p!==this.prevTransformTemplateValue;l&&this.instance&&(d||hs(this.latestValues)||v)&&(i(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const d=this.measurePageBox();let h=this.removeElementScroll(d);return l&&(h=this.removeTransform(h)),E2(h),{animationId:this.root.animationId,measuredBox:d,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return dt();const d=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(T2))){const{scroll:p}=this.root;p&&(po(d.x,p.offset.x),po(d.y,p.offset.y))}return d}removeElementScroll(l){const d=dt();if(bn(d,l),this.scroll?.wasRoot)return d;for(let h=0;h<this.path.length;h++){const p=this.path[h],{scroll:v,options:g}=p;p!==this.root&&v&&g.layoutScroll&&(v.wasRoot&&bn(d,l),po(d.x,v.offset.x),po(d.y,v.offset.y))}return d}applyTransform(l,d=!1){const h=dt();bn(h,l);for(let p=0;p<this.path.length;p++){const v=this.path[p];!d&&v.options.layoutScroll&&v.scroll&&v!==v.root&&mo(h,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),hs(v.latestValues)&&mo(h,v.latestValues)}return hs(this.latestValues)&&mo(h,this.latestValues),h}removeTransform(l){const d=dt();bn(d,l);for(let h=0;h<this.path.length;h++){const p=this.path[h];if(!p.instance||!hs(p.latestValues))continue;pd(p.latestValues)&&p.updateSnapshot();const v=dt(),g=p.measurePageBox();bn(v,g),Rg(d,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,v)}return hs(this.latestValues)&&Rg(d,this.latestValues),d}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Lt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:g}=this.options;if(!(!this.layout||!(v||g))){if(this.resolvedRelativeTargetAt=Lt.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),_i(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),bn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=dt(),this.targetWithTransforms=dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),RT(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):bn(this.target,this.layout.layoutBox),W0(this.target,this.targetDelta)):bn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),_i(this.relativeTargetOrigin,this.target,w.target),bn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||pd(this.parent.latestValues)||H0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),d=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Lt.timestamp&&(h=!1),h)return;const{layout:p,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||v))return;bn(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,w=this.treeScale.y;HE(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=dt());const{target:S}=l;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(jg(this.prevProjectionDelta.x,this.projectionDelta.x),jg(this.prevProjectionDelta.y,this.projectionDelta.y)),Si(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==w||!Mg(this.projectionDelta.x,this.prevProjectionDelta.x)||!Mg(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=go(),this.projectionDelta=go(),this.projectionDeltaWithTransform=go()}setAnimationOrigin(l,d=!1){const h=this.snapshot,p=h?h.latestValues:{},v={...this.latestValues},g=go();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const w=dt(),S=h?h.source:void 0,_=this.layout?this.layout.source:void 0,k=S!==_,E=this.getStack(),P=!E||E.members.length<=1,I=!!(k&&!P&&this.options.crossfade===!0&&!this.path.some(_2));this.animationProgress=0;let A;this.mixTargetDelta=W=>{const V=W/1e3;Ug(g.x,l.x,V),Ug(g.y,l.y,V),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_i(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),S2(this.relativeTarget,this.relativeTargetOrigin,w,V),A&&a2(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=dt()),bn(A,this.relativeTarget)),k&&(this.animationValues=v,t2(v,p,this.latestValues,V,I,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Fr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Je.update(()=>{ll.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=xo(0)),this.currentAnimation=JT(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),l.onUpdate&&l.onUpdate(d)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(u2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:d,target:h,layout:p,latestValues:v}=l;if(!(!d||!h||!p)){if(this!==l&&this.layout&&p&&py(this.options.animationType,this.layout.layoutBox,p.layoutBox)){h=this.target||dt();const g=qt(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+g;const w=qt(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+w}bn(d,h),mo(d,v),Si(this.projectionDeltaWithTransform,this.layoutCorrected,d,v)}}registerSharedNode(l,d){this.sharedNodes.has(l)||this.sharedNodes.set(l,new l2),this.sharedNodes.get(l).add(d);const p=d.options.initialPromotionConfig;d.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(d):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:d,preserveFollowOpacity:h}={}){const p=this.getStack();p&&p.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let d=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(d=!0),!d)return;const p={};h.z&&Du("z",l,p,this.animationValues);for(let v=0;v<Ou.length;v++)Du(`rotate${Ou[v]}`,l,p,this.animationValues),Du(`skew${Ou[v]}`,l,p,this.animationValues);l.render();for(const v in p)l.setStaticValue(v,p[v]),this.animationValues&&(this.animationValues[v]=p[v]);l.scheduleRender()}applyProjectionStyles(l,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=al(d?.pointerEvents)||"",l.transform=h?h(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=al(d?.pointerEvents)||""),this.hasProjected&&!hs(this.latestValues)&&(l.transform=h?h({},""):"none",this.hasProjected=!1);return}l.visibility="";const v=p.animationValues||p.latestValues;this.applyTransformsToTarget();let g=c2(this.projectionDeltaWithTransform,this.treeScale,v);h&&(g=h(v,g)),l.transform=g;const{x:w,y:S}=this.projectionDelta;l.transformOrigin=`${w.origin*100}% ${S.origin*100}% 0`,p.animationValues?l.opacity=p===this?v.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:l.opacity=p===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const _ in Ai){if(v[_]===void 0)continue;const{correct:k,applyTo:E,isCSSVariable:P}=Ai[_],I=g==="none"?v[_]:k(v[_],p);if(E){const A=E.length;for(let W=0;W<A;W++)l[E[W]]=I}else P?this.options.visualElement.renderState.vars[_]=I:l[_]=I}this.options.layoutId&&(l.pointerEvents=p===this?al(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach($g),this.root.sharedNodes.clear()}}}function h2(t){t.updateLayout()}function f2(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=t.layout,{animationType:i}=t.options,c=e.source!==t.layout.source;i==="size"?Sn(v=>{const g=c?e.measuredBox[v]:e.layoutBox[v],w=qt(g);g.min=r[v].min,g.max=g.min+w}):py(i,e.layoutBox,r)&&Sn(v=>{const g=c?e.measuredBox[v]:e.layoutBox[v],w=qt(r[v]);g.max=g.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[v].max=t.relativeTarget[v].min+w)});const l=go();Si(l,r,e.layoutBox);const d=go();c?Si(d,t.applyTransform(o,!0),e.measuredBox):Si(d,r,e.layoutBox);const h=!uy(l);let p=!1;if(!t.resumeFrom){const v=t.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:g,layout:w}=v;if(g&&w){const S=dt();_i(S,e.layoutBox,g.layoutBox);const _=dt();_i(_,r,w.layoutBox),dy(S,_)||(p=!0),v.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=S,t.relativeParent=v)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:d,layoutDelta:l,hasLayoutChanged:h,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function p2(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function m2(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function g2(t){t.clearSnapshot()}function $g(t){t.clearMeasurements()}function Fg(t){t.isLayoutDirty=!1}function v2(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Vg(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function y2(t){t.resolveTargetDelta()}function w2(t){t.calcProjection()}function x2(t){t.resetSkewAndRotation()}function b2(t){t.removeLeadSnapshot()}function Ug(t,e,r){t.translate=nt(e.translate,0,r),t.scale=nt(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function zg(t,e,r,o){t.min=nt(e.min,r.min,o),t.max=nt(e.max,r.max,o)}function S2(t,e,r,o){zg(t.x,e.x,r.x,o),zg(t.y,e.y,r.y,o)}function _2(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const k2={duration:.45,ease:[.4,0,.1,1]},Bg=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Hg=Bg("applewebkit/")&&!Bg("chrome/")?Math.round:kn;function Wg(t){t.min=Hg(t.min),t.max=Hg(t.max)}function E2(t){Wg(t.x),Wg(t.y)}function py(t,e,r){return t==="position"||t==="preserve-aspect"&&!NT(Dg(e),Dg(r),.2)}function T2(t){return t!==t.root&&t.scroll?.wasRoot}const P2=fy({attachResizeListener:(t,e)=>Ni(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Mu={current:void 0},my=fy({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Mu.current){const t=new P2({});t.mount(window),t.setOptions({layoutScroll:!0}),Mu.current=t}return Mu.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),C2={pan:{Feature:qT},drag:{Feature:WT,ProjectionNode:my,MeasureLayout:ay}};function qg(t,e,r){const{props:o}=t;t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",r==="Start");const i="onHover"+r,c=o[i];c&&Je.postRender(()=>c(e,Di(e)))}class j2 extends Br{mount(){const{current:e}=this.node;e&&(this.unmount=Jk(e,(r,o)=>(qg(this.node,o,"Start"),i=>qg(this.node,i,"End"))))}unmount(){}}class A2 extends Br{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Li(Ni(this.node.current,"focus",()=>this.onFocus()),Ni(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Kg(t,e,r){const{props:o}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&o.whileTap&&t.animationState.setActive("whileTap",r==="Start");const i="onTap"+(r==="End"?"":r),c=o[i];c&&Je.postRender(()=>c(e,Di(e)))}class N2 extends Br{mount(){const{current:e}=this.node;e&&(this.unmount=eE(e,(r,o)=>(Kg(this.node,o,"Start"),(i,{success:c})=>Kg(this.node,i,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const bd=new WeakMap,$u=new WeakMap,R2=t=>{const e=bd.get(t.target);e&&e(t)},L2=t=>{t.forEach(R2)};function I2({root:t,...e}){const r=t||document;$u.has(r)||$u.set(r,{});const o=$u.get(r),i=JSON.stringify(e);return o[i]||(o[i]=new IntersectionObserver(L2,{root:t,...e})),o[i]}function O2(t,e,r){const o=I2(e);return bd.set(t,r),o.observe(t),()=>{bd.delete(t),o.unobserve(t)}}const D2={some:0,all:1};class M2 extends Br{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:o,amount:i="some",once:c}=e,l={root:r?r.current:void 0,rootMargin:o,threshold:typeof i=="number"?i:D2[i]},d=h=>{const{isIntersecting:p}=h;if(this.isInView===p||(this.isInView=p,c&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:v,onViewportLeave:g}=this.node.getProps(),w=p?v:g;w&&w(h)};return O2(this.node.current,l,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some($2(e,r))&&this.startObserver()}unmount(){}}function $2({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const F2={inView:{Feature:M2},tap:{Feature:N2},focus:{Feature:A2},hover:{Feature:j2}},V2={layout:{ProjectionNode:my,MeasureLayout:ay}},U2={...ET,...F2,...C2,...V2},Wt=UE(U2,eT);var gy=lv();const z2=Td(gy);function B2(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}const H2=t=>{switch(t){case"success":return K2;case"info":return Y2;case"warning":return G2;case"error":return J2;default:return null}},W2=Array(12).fill(0),q2=({visible:t,className:e})=>ce.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},ce.createElement("div",{className:"sonner-spinner"},W2.map((r,o)=>ce.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${o}`})))),K2=ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ce.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),G2=ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ce.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Y2=ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ce.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),J2=ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ce.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),X2=ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ce.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ce.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Q2=()=>{const[t,e]=ce.useState(document.hidden);return ce.useEffect(()=>{const r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t};let Sd=1;class Z2{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const r=this.subscribers.indexOf(e);this.subscribers.splice(r,1)}),this.publish=e=>{this.subscribers.forEach(r=>r(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var r;const{message:o,...i}=e,c=typeof e?.id=="number"||((r=e.id)==null?void 0:r.length)>0?e.id:Sd++,l=this.toasts.find(h=>h.id===c),d=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),l?this.toasts=this.toasts.map(h=>h.id===c?(this.publish({...h,...e,id:c,title:o}),{...h,...e,id:c,dismissible:d,title:o}):h):this.addToast({title:o,...i,dismissible:d,id:c}),c},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:e,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(o=>o({id:r.id,dismiss:!0}))}),e),this.message=(e,r)=>this.create({...r,message:e}),this.error=(e,r)=>this.create({...r,message:e,type:"error"}),this.success=(e,r)=>this.create({...r,type:"success",message:e}),this.info=(e,r)=>this.create({...r,type:"info",message:e}),this.warning=(e,r)=>this.create({...r,type:"warning",message:e}),this.loading=(e,r)=>this.create({...r,type:"loading",message:e}),this.promise=(e,r)=>{if(!r)return;let o;r.loading!==void 0&&(o=this.create({...r,promise:e,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let c=o!==void 0,l;const d=i.then(async p=>{if(l=["resolve",p],ce.isValidElement(p))c=!1,this.create({id:o,type:"default",message:p});else if(tP(p)&&!p.ok){c=!1;const g=typeof r.error=="function"?await r.error(`HTTP error! status: ${p.status}`):r.error,w=typeof r.description=="function"?await r.description(`HTTP error! status: ${p.status}`):r.description,_=typeof g=="object"&&!ce.isValidElement(g)?g:{message:g};this.create({id:o,type:"error",description:w,..._})}else if(p instanceof Error){c=!1;const g=typeof r.error=="function"?await r.error(p):r.error,w=typeof r.description=="function"?await r.description(p):r.description,_=typeof g=="object"&&!ce.isValidElement(g)?g:{message:g};this.create({id:o,type:"error",description:w,..._})}else if(r.success!==void 0){c=!1;const g=typeof r.success=="function"?await r.success(p):r.success,w=typeof r.description=="function"?await r.description(p):r.description,_=typeof g=="object"&&!ce.isValidElement(g)?g:{message:g};this.create({id:o,type:"success",description:w,..._})}}).catch(async p=>{if(l=["reject",p],r.error!==void 0){c=!1;const v=typeof r.error=="function"?await r.error(p):r.error,g=typeof r.description=="function"?await r.description(p):r.description,S=typeof v=="object"&&!ce.isValidElement(v)?v:{message:v};this.create({id:o,type:"error",description:g,...S})}}).finally(()=>{c&&(this.dismiss(o),o=void 0),r.finally==null||r.finally.call(r)}),h=()=>new Promise((p,v)=>d.then(()=>l[0]==="reject"?v(l[1]):p(l[1])).catch(v));return typeof o!="string"&&typeof o!="number"?{unwrap:h}:Object.assign(o,{unwrap:h})},this.custom=(e,r)=>{const o=r?.id||Sd++;return this.create({jsx:e(o),id:o,...r}),o},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const nn=new Z2,eP=(t,e)=>{const r=e?.id||Sd++;return nn.addToast({title:t,...e,id:r}),r},tP=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",nP=eP,rP=()=>nn.toasts,sP=()=>nn.getActiveToasts(),ot=Object.assign(nP,{success:nn.success,info:nn.info,warning:nn.warning,error:nn.error,custom:nn.custom,message:nn.message,promise:nn.promise,dismiss:nn.dismiss,loading:nn.loading},{getHistory:rP,getToasts:sP});B2("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function tl(t){return t.label!==void 0}const oP=3,iP="24px",aP="16px",Gg=4e3,lP=356,cP=14,uP=45,dP=200;function Kn(...t){return t.filter(Boolean).join(" ")}function hP(t){const[e,r]=t.split("-"),o=[];return e&&o.push(e),r&&o.push(r),o}const fP=t=>{var e,r,o,i,c,l,d,h,p;const{invert:v,toast:g,unstyled:w,interacting:S,setHeights:_,visibleToasts:k,heights:E,index:P,toasts:I,expanded:A,removeToast:W,defaultRichColors:V,closeButton:O,style:H,cancelButtonStyle:M,actionButtonStyle:ee,className:ie="",descriptionClassName:Ee="",duration:he,position:we,gap:_e,expandByDefault:xe,classNames:ue,icons:U,closeButtonAriaLabel:C="Close toast"}=t,[re,K]=ce.useState(null),[R,G]=ce.useState(null),[N,$]=ce.useState(!1),[X,ae]=ce.useState(!1),[le,B]=ce.useState(!1),[de,be]=ce.useState(!1),[Oe,Ie]=ce.useState(!1),[He,Xe]=ce.useState(0),[At,Ut]=ce.useState(0),It=ce.useRef(g.duration||he||Gg),sn=ce.useRef(null),yt=ce.useRef(null),Kt=P===0,on=P+1<=k,Qe=g.type,kt=g.dismissible!==!1,fn=g.className||"",Tn=g.descriptionClassName||"",wt=ce.useMemo(()=>E.findIndex(Y=>Y.toastId===g.id)||0,[E,g.id]),at=ce.useMemo(()=>{var Y;return(Y=g.closeButton)!=null?Y:O},[g.closeButton,O]),se=ce.useMemo(()=>g.duration||he||Gg,[g.duration,he]),Me=ce.useRef(0),Fe=ce.useRef(0),ht=ce.useRef(0),an=ce.useRef(null),[Ts,Ps]=we.split("-"),Cs=ce.useMemo(()=>E.reduce((Y,J,ne)=>ne>=wt?Y:Y+J.height,0),[E,wt]),fr=Q2(),Hr=g.invert||v,Zn=Qe==="loading";Fe.current=ce.useMemo(()=>wt*_e+Cs,[wt,Cs]),ce.useEffect(()=>{It.current=se},[se]),ce.useEffect(()=>{$(!0)},[]),ce.useEffect(()=>{const Y=yt.current;if(Y){const J=Y.getBoundingClientRect().height;return Ut(J),_(ne=>[{toastId:g.id,height:J,position:g.position},...ne]),()=>_(ne=>ne.filter(Re=>Re.toastId!==g.id))}},[_,g.id]),ce.useLayoutEffect(()=>{if(!N)return;const Y=yt.current,J=Y.style.height;Y.style.height="auto";const ne=Y.getBoundingClientRect().height;Y.style.height=J,Ut(ne),_(Re=>Re.find(ze=>ze.toastId===g.id)?Re.map(ze=>ze.toastId===g.id?{...ze,height:ne}:ze):[{toastId:g.id,height:ne,position:g.position},...Re])},[N,g.title,g.description,_,g.id,g.jsx,g.action,g.cancel]);const Gt=ce.useCallback(()=>{ae(!0),Xe(Fe.current),_(Y=>Y.filter(J=>J.toastId!==g.id)),setTimeout(()=>{W(g)},dP)},[g,W,_,Fe]);ce.useEffect(()=>{if(g.promise&&Qe==="loading"||g.duration===1/0||g.type==="loading")return;let Y;return A||S||fr?(()=>{if(ht.current<Me.current){const Re=new Date().getTime()-Me.current;It.current=It.current-Re}ht.current=new Date().getTime()})():(()=>{It.current!==1/0&&(Me.current=new Date().getTime(),Y=setTimeout(()=>{g.onAutoClose==null||g.onAutoClose.call(g,g),Gt()},It.current))})(),()=>clearTimeout(Y)},[A,S,g,Qe,fr,Gt]),ce.useEffect(()=>{g.delete&&(Gt(),g.onDismiss==null||g.onDismiss.call(g,g))},[Gt,g.delete]);function Wr(){var Y;if(U?.loading){var J;return ce.createElement("div",{className:Kn(ue?.loader,g==null||(J=g.classNames)==null?void 0:J.loader,"sonner-loader"),"data-visible":Qe==="loading"},U.loading)}return ce.createElement(q2,{className:Kn(ue?.loader,g==null||(Y=g.classNames)==null?void 0:Y.loader),visible:Qe==="loading"})}const Vn=g.icon||U?.[Qe]||H2(Qe);var q,fe;return ce.createElement("li",{tabIndex:0,ref:yt,className:Kn(ie,fn,ue?.toast,g==null||(e=g.classNames)==null?void 0:e.toast,ue?.default,ue?.[Qe],g==null||(r=g.classNames)==null?void 0:r[Qe]),"data-sonner-toast":"","data-rich-colors":(q=g.richColors)!=null?q:V,"data-styled":!(g.jsx||g.unstyled||w),"data-mounted":N,"data-promise":!!g.promise,"data-swiped":Oe,"data-removed":X,"data-visible":on,"data-y-position":Ts,"data-x-position":Ps,"data-index":P,"data-front":Kt,"data-swiping":le,"data-dismissible":kt,"data-type":Qe,"data-invert":Hr,"data-swipe-out":de,"data-swipe-direction":R,"data-expanded":!!(A||xe&&N),"data-testid":g.testId,style:{"--index":P,"--toasts-before":P,"--z-index":I.length-P,"--offset":`${X?He:Fe.current}px`,"--initial-height":xe?"auto":`${At}px`,...H,...g.style},onDragEnd:()=>{B(!1),K(null),an.current=null},onPointerDown:Y=>{Y.button!==2&&(Zn||!kt||(sn.current=new Date,Xe(Fe.current),Y.target.setPointerCapture(Y.pointerId),Y.target.tagName!=="BUTTON"&&(B(!0),an.current={x:Y.clientX,y:Y.clientY})))},onPointerUp:()=>{var Y,J,ne;if(de||!kt)return;an.current=null;const Re=Number(((Y=yt.current)==null?void 0:Y.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),lt=Number(((J=yt.current)==null?void 0:J.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ze=new Date().getTime()-((ne=sn.current)==null?void 0:ne.getTime()),Te=re==="x"?Re:lt,Ze=Math.abs(Te)/ze;if(Math.abs(Te)>=uP||Ze>.11){Xe(Fe.current),g.onDismiss==null||g.onDismiss.call(g,g),G(re==="x"?Re>0?"right":"left":lt>0?"down":"up"),Gt(),be(!0);return}else{var ft,Ot;(ft=yt.current)==null||ft.style.setProperty("--swipe-amount-x","0px"),(Ot=yt.current)==null||Ot.style.setProperty("--swipe-amount-y","0px")}Ie(!1),B(!1),K(null)},onPointerMove:Y=>{var J,ne,Re;if(!an.current||!kt||((J=window.getSelection())==null?void 0:J.toString().length)>0)return;const ze=Y.clientY-an.current.y,Te=Y.clientX-an.current.x;var Ze;const ft=(Ze=t.swipeDirections)!=null?Ze:hP(we);!re&&(Math.abs(Te)>1||Math.abs(ze)>1)&&K(Math.abs(Te)>Math.abs(ze)?"x":"y");let Ot={x:0,y:0};const Un=pn=>1/(1.5+Math.abs(pn)/20);if(re==="y"){if(ft.includes("top")||ft.includes("bottom"))if(ft.includes("top")&&ze<0||ft.includes("bottom")&&ze>0)Ot.y=ze;else{const pn=ze*Un(ze);Ot.y=Math.abs(pn)<Math.abs(ze)?pn:ze}}else if(re==="x"&&(ft.includes("left")||ft.includes("right")))if(ft.includes("left")&&Te<0||ft.includes("right")&&Te>0)Ot.x=Te;else{const pn=Te*Un(Te);Ot.x=Math.abs(pn)<Math.abs(Te)?pn:Te}(Math.abs(Ot.x)>0||Math.abs(Ot.y)>0)&&Ie(!0),(ne=yt.current)==null||ne.style.setProperty("--swipe-amount-x",`${Ot.x}px`),(Re=yt.current)==null||Re.style.setProperty("--swipe-amount-y",`${Ot.y}px`)}},at&&!g.jsx&&Qe!=="loading"?ce.createElement("button",{"aria-label":C,"data-disabled":Zn,"data-close-button":!0,onClick:Zn||!kt?()=>{}:()=>{Gt(),g.onDismiss==null||g.onDismiss.call(g,g)},className:Kn(ue?.closeButton,g==null||(o=g.classNames)==null?void 0:o.closeButton)},(fe=U?.close)!=null?fe:X2):null,(Qe||g.icon||g.promise)&&g.icon!==null&&(U?.[Qe]!==null||g.icon)?ce.createElement("div",{"data-icon":"",className:Kn(ue?.icon,g==null||(i=g.classNames)==null?void 0:i.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||Wr():null,g.type!=="loading"?Vn:null):null,ce.createElement("div",{"data-content":"",className:Kn(ue?.content,g==null||(c=g.classNames)==null?void 0:c.content)},ce.createElement("div",{"data-title":"",className:Kn(ue?.title,g==null||(l=g.classNames)==null?void 0:l.title)},g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title),g.description?ce.createElement("div",{"data-description":"",className:Kn(Ee,Tn,ue?.description,g==null||(d=g.classNames)==null?void 0:d.description)},typeof g.description=="function"?g.description():g.description):null),ce.isValidElement(g.cancel)?g.cancel:g.cancel&&tl(g.cancel)?ce.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||M,onClick:Y=>{tl(g.cancel)&&kt&&(g.cancel.onClick==null||g.cancel.onClick.call(g.cancel,Y),Gt())},className:Kn(ue?.cancelButton,g==null||(h=g.classNames)==null?void 0:h.cancelButton)},g.cancel.label):null,ce.isValidElement(g.action)?g.action:g.action&&tl(g.action)?ce.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||ee,onClick:Y=>{tl(g.action)&&(g.action.onClick==null||g.action.onClick.call(g.action,Y),!Y.defaultPrevented&&Gt())},className:Kn(ue?.actionButton,g==null||(p=g.classNames)==null?void 0:p.actionButton)},g.action.label):null)};function Yg(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function pP(t,e){const r={};return[t,e].forEach((o,i)=>{const c=i===1,l=c?"--mobile-offset":"--offset",d=c?aP:iP;function h(p){["top","right","bottom","left"].forEach(v=>{r[`${l}-${v}`]=typeof p=="number"?`${p}px`:p})}typeof o=="number"||typeof o=="string"?h(o):typeof o=="object"?["top","right","bottom","left"].forEach(p=>{o[p]===void 0?r[`${l}-${p}`]=d:r[`${l}-${p}`]=typeof o[p]=="number"?`${o[p]}px`:o[p]}):h(d)}),r}const mP=ce.forwardRef(function(e,r){const{id:o,invert:i,position:c="bottom-right",hotkey:l=["altKey","KeyT"],expand:d,closeButton:h,className:p,offset:v,mobileOffset:g,theme:w="light",richColors:S,duration:_,style:k,visibleToasts:E=oP,toastOptions:P,dir:I=Yg(),gap:A=cP,icons:W,containerAriaLabel:V="Notifications"}=e,[O,H]=ce.useState([]),M=ce.useMemo(()=>o?O.filter(N=>N.toasterId===o):O.filter(N=>!N.toasterId),[O,o]),ee=ce.useMemo(()=>Array.from(new Set([c].concat(M.filter(N=>N.position).map(N=>N.position)))),[M,c]),[ie,Ee]=ce.useState([]),[he,we]=ce.useState(!1),[_e,xe]=ce.useState(!1),[ue,U]=ce.useState(w!=="system"?w:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),C=ce.useRef(null),re=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),K=ce.useRef(null),R=ce.useRef(!1),G=ce.useCallback(N=>{H($=>{var X;return(X=$.find(ae=>ae.id===N.id))!=null&&X.delete||nn.dismiss(N.id),$.filter(({id:ae})=>ae!==N.id)})},[]);return ce.useEffect(()=>nn.subscribe(N=>{if(N.dismiss){requestAnimationFrame(()=>{H($=>$.map(X=>X.id===N.id?{...X,delete:!0}:X))});return}setTimeout(()=>{z2.flushSync(()=>{H($=>{const X=$.findIndex(ae=>ae.id===N.id);return X!==-1?[...$.slice(0,X),{...$[X],...N},...$.slice(X+1)]:[N,...$]})})})}),[O]),ce.useEffect(()=>{if(w!=="system"){U(w);return}if(w==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;const N=window.matchMedia("(prefers-color-scheme: dark)");try{N.addEventListener("change",({matches:$})=>{U($?"dark":"light")})}catch{N.addListener(({matches:X})=>{try{U(X?"dark":"light")}catch(ae){console.error(ae)}})}},[w]),ce.useEffect(()=>{O.length<=1&&we(!1)},[O]),ce.useEffect(()=>{const N=$=>{var X;if(l.every(B=>$[B]||$.code===B)){var le;we(!0),(le=C.current)==null||le.focus()}$.code==="Escape"&&(document.activeElement===C.current||(X=C.current)!=null&&X.contains(document.activeElement))&&we(!1)};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[l]),ce.useEffect(()=>{if(C.current)return()=>{K.current&&(K.current.focus({preventScroll:!0}),K.current=null,R.current=!1)}},[C.current]),ce.createElement("section",{ref:r,"aria-label":`${V} ${re}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},ee.map((N,$)=>{var X;const[ae,le]=N.split("-");return M.length?ce.createElement("ol",{key:N,dir:I==="auto"?Yg():I,tabIndex:-1,ref:C,className:p,"data-sonner-toaster":!0,"data-sonner-theme":ue,"data-y-position":ae,"data-x-position":le,style:{"--front-toast-height":`${((X=ie[0])==null?void 0:X.height)||0}px`,"--width":`${lP}px`,"--gap":`${A}px`,...k,...pP(v,g)},onBlur:B=>{R.current&&!B.currentTarget.contains(B.relatedTarget)&&(R.current=!1,K.current&&(K.current.focus({preventScroll:!0}),K.current=null))},onFocus:B=>{B.target instanceof HTMLElement&&B.target.dataset.dismissible==="false"||R.current||(R.current=!0,K.current=B.relatedTarget)},onMouseEnter:()=>we(!0),onMouseMove:()=>we(!0),onMouseLeave:()=>{_e||we(!1)},onDragEnd:()=>we(!1),onPointerDown:B=>{B.target instanceof HTMLElement&&B.target.dataset.dismissible==="false"||xe(!0)},onPointerUp:()=>xe(!1)},M.filter(B=>!B.position&&$===0||B.position===N).map((B,de)=>{var be,Oe;return ce.createElement(fP,{key:B.id,icons:W,index:de,toast:B,defaultRichColors:S,duration:(be=P?.duration)!=null?be:_,className:P?.className,descriptionClassName:P?.descriptionClassName,invert:i,visibleToasts:E,closeButton:(Oe=P?.closeButton)!=null?Oe:h,interacting:_e,position:N,style:P?.style,unstyled:P?.unstyled,classNames:P?.classNames,cancelButtonStyle:P?.cancelButtonStyle,actionButtonStyle:P?.actionButtonStyle,closeButtonAriaLabel:P?.closeButtonAriaLabel,removeToast:G,toasts:M.filter(Ie=>Ie.position==B.position),heights:ie.filter(Ie=>Ie.position==B.position),setHeights:Ee,expandByDefault:d,gap:A,expanded:he,swipeDirections:e.swipeDirections})})):null}))});function gP({poem:t,onAuthRequired:e}){const{user:r}=Eo(),[o,i]=b.useState(!1),[c,l]=b.useState(!1);b.useEffect(()=>{if(!r||!t?.id)return;(async()=>{try{const{projectId:p}=await it(async()=>{const{projectId:w}=await Promise.resolve().then(()=>Xn);return{projectId:w}},void 0),{data:{session:v}}=await(await it(async()=>{const{createClient:w}=await Promise.resolve().then(()=>_s);return{createClient:w}},void 0)).createClient().auth.getSession();if(!v?.access_token)return;const g=await fetch(`https://${p}.supabase.co/functions/v1/make-server-c192d0ee/favorites/${t.id}/status`,{headers:{Authorization:`Bearer ${v.access_token}`}});if(g.ok){const w=await g.json();i(w.isFavorited)}}catch(p){console.error("Failed to check favorite status:",p)}})()},[r,t?.id]);const d=async()=>{if(!r){e();return}if(!t||!t.id){ot.error("    ");return}l(!0);try{const{projectId:h}=await it(async()=>{const{projectId:v}=await Promise.resolve().then(()=>Xn);return{projectId:v}},void 0),{data:{session:p}}=await(await it(async()=>{const{createClient:v}=await Promise.resolve().then(()=>_s);return{createClient:v}},void 0)).createClient().auth.getSession();if(!p?.access_token){ot.error("   "),e();return}if(o){const v=await fetch(`https://${h}.supabase.co/functions/v1/make-server-c192d0ee/favorites/${t.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${p.access_token}`}});if(v.ok)i(!1),ot.success("    ");else{const g=await v.json();throw new Error(g.error||"Failed to remove favorite")}}else{const v=await fetch(`https://${h}.supabase.co/functions/v1/make-server-c192d0ee/favorites`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p.access_token}`},body:JSON.stringify({poem:{id:t.id,title:t.title,text:t.text,htmlText:t.htmlText,poet:t.poet}})});if(v.ok)i(!0),ot.success("    ",{description:` ${t.poet.name}`,duration:3e3});else{const g=await v.json();if(v.status===409)ot.warning("       "),i(!0);else throw new Error(g.error||"Failed to add favorite")}}}catch(h){console.error("Failed to toggle favorite:",h),ot.error("   ")}finally{l(!1)}};return m.jsx(Wt.button,{onClick:d,disabled:c,className:`
        w-10 h-10 rounded-full
        backdrop-blur-2xl
        border
        shadow-lg
        transition-all duration-300
        ${o?"bg-red-500/30 text-red-500 border-red-500/50 hover:bg-red-500/40":"bg-muted/30 text-foreground/70 hover:bg-muted/50 hover:text-foreground border-border"}
        ${c?"opacity-50":""}
        active:scale-95
        flex items-center justify-center
      `,style:{backdropFilter:"blur(20px) saturate(180%)",boxShadow:o?"0 4px 16px rgba(239, 68, 68, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"0 4px 16px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)"},whileTap:{scale:.9},whileHover:{scale:1.05},children:c?m.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):m.jsx(Nd,{size:16,className:`transition-all duration-300 ${o?"fill-current":""}`})})}const vP={p14775700:"M7.59615 0.673077C7.42308 0.682693 7.26923 0.75 7.15385 0.884616L0.788463 7.98077C0.656251 8.13221 0.329328 8.6851 0.173078 9.40385C0.0649054 9.70673 1.43051e-06 10.0577 1.43051e-06 10.4615C1.43051e-06 12.3702 1.59616 13.1346 1.59616 13.1346C1.62019 13.149 1.64664 13.1611 1.67308 13.1731L9.05769 15.3654C9.29808 15.4351 9.55769 15.351 9.71154 15.1538L15.7308 7.90385C15.8798 7.71875 15.9111 7.46394 15.8077 7.25C15.8077 7.25 15.5745 6.71154 15.8269 6.09615C15.9111 5.89183 15.8798 5.65865 15.7452 5.48317C15.6106 5.30769 15.3918 5.21875 15.1731 5.25C14.9567 5.28365 14.7716 5.43029 14.6923 5.63462C14.3774 6.40625 14.4688 6.99279 14.5769 7.36538L9.01923 14.0577L2.05769 12L2.01923 11.9808C1.90385 11.9375 1.23077 11.6346 1.23077 10.4615C1.23077 10 1.32933 9.75481 1.42308 9.61538C1.51683 9.47596 1.61539 9.40865 1.75 9.36538C1.88462 9.32212 2.03846 9.32212 2.15385 9.32692H2.17308L8.59615 11.1731C8.65144 11.1875 8.71394 11.1923 8.76923 11.1923C8.96154 11.1923 9.14664 11.0938 9.26923 10.9423L15.7885 3.42308C15.9303 3.25 15.9784 3.01923 15.9038 2.80769C15.8317 2.59375 15.6418 2.43269 15.4231 2.38462L7.76923 0.673077C7.71154 0.661058 7.65385 0.670673 7.59615 0.673077ZM7.42308 3.11538C7.49039 3.11298 7.55289 3.12019 7.61539 3.13462L12.1923 4.25C12.4423 4.3101 12.5385 4.47356 12.4038 4.63462L11.9038 5.23077C11.7668 5.39183 11.4447 5.46394 11.1923 5.40385L6.63462 4.28846C6.38221 4.22837 6.28846 4.04327 6.42308 3.88462L6.90385 3.30769C7.00481 3.1875 7.22115 3.12019 7.42308 3.11538Z"};function yP(){return m.jsx("div",{className:"relative size-full","data-name":"Book",children:m.jsxs("svg",{className:"block size-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 16 16",children:[m.jsx("g",{clipPath:"url(#clip0_50_1739)",id:"Book",children:m.jsx("path",{d:vP.p14775700,fill:"var(--fill-0, #0A0A0A)",id:"Vector"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"clip0_50_1739",children:m.jsx("rect",{fill:"white",height:"16",width:"16"})})})]})})}function wP({onOpen:t}){return m.jsxs("button",{onClick:t,className:"relative w-10 h-10 rounded-full shadow-2xl backdrop-blur-xl border border-white/20 transition-all duration-300 hover:scale-105 active:scale-95 flex items-center justify-center overflow-hidden",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05))",boxShadow:`
          0 8px 32px rgba(0, 0, 0, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.2),
          inset 0 -1px 0 rgba(0, 0, 0, 0.1)
        `},"aria-label":"More options",children:[m.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-[#77ff85] opacity-0 animate-pulse hover:opacity-60 transition-opacity duration-500"}),m.jsx("div",{className:"absolute inset-0 rounded-full shadow-[0px_4px_16px_0px_rgba(119,255,133,0.3)] opacity-0 hover:opacity-100 transition-opacity duration-500"}),m.jsx("div",{className:"w-[18px] h-[18px] text-foreground/80",children:m.jsx("div",{className:"[&_path]:fill-[#0A0A0A] dark:[&_path]:fill-[#FAFAFA]",children:m.jsx(yP,{})})})]})}const xP={p2988f100:"M8 1.6C6.41675 1.6 4.96151 2.17783 3.84375 3.13333C3.78773 3.17794 3.74125 3.23336 3.70711 3.29631C3.67296 3.35926 3.65184 3.42844 3.64501 3.49972C3.63817 3.57101 3.64576 3.64294 3.66732 3.71123C3.68888 3.77951 3.72397 3.84276 3.7705 3.8972C3.81703 3.95163 3.87405 3.99614 3.93815 4.02807C4.00225 4.06 4.07212 4.07869 4.1436 4.08304C4.21508 4.08738 4.2867 4.07729 4.3542 4.05336C4.4217 4.02943 4.48368 3.99215 4.53646 3.94375C5.46884 3.14672 6.67552 2.66667 8 2.66667C10.7715 2.66667 13.0405 4.76689 13.3073 7.46667H11.7333L13.8667 10.6667L16 7.46667H14.3729C14.1002 4.18755 11.3482 1.6 8 1.6ZM2.13333 5.33333L1.19209e-06 8.53333H1.62708C1.89977 11.8124 4.65182 14.4 8 14.4C9.58326 14.4 11.0385 13.8222 12.1563 12.8667C12.2123 12.8221 12.2587 12.7666 12.2929 12.7037C12.327 12.6407 12.3482 12.5716 12.355 12.5003C12.3618 12.429 12.3542 12.3571 12.3327 12.2888C12.3111 12.2205 12.276 12.1572 12.2295 12.1028C12.183 12.0484 12.126 12.0039 12.0619 11.9719C11.9978 11.94 11.9279 11.9213 11.8564 11.917C11.7849 11.9126 11.7133 11.9227 11.6458 11.9466C11.5783 11.9706 11.5163 12.0078 11.4635 12.0563C10.5312 12.8533 9.32448 13.3333 8 13.3333C5.2285 13.3333 2.95947 11.2331 2.69271 8.53333H4.26667L2.13333 5.33333Z"};function bP(){return m.jsx("div",{className:"relative shrink-0 size-[16px]","data-name":"Refresh",children:m.jsxs("svg",{className:"block size-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 16 16",children:[m.jsx("g",{clipPath:"url(#clip0_52_1098)",id:"Refresh",children:m.jsx("path",{d:xP.p2988f100,fill:"var(--fill-0, #FAFAFA)",id:"Vector"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"clip0_52_1098",children:m.jsx("rect",{fill:"white",height:"16",width:"16"})})})]})})}function SP(){return m.jsxs("div",{className:"bg-[rgba(38,38,38,0.3)] relative rounded-[1.75098e+07px] size-full","data-name":"Button",children:[m.jsx("div",{"aria-hidden":"true",className:"absolute border-[0.522px] border-neutral-800 border-solid inset-0 pointer-events-none rounded-[1.75098e+07px] shadow-[0px_4px_16px_0px_rgba(0,0,0,0.15)]"}),m.jsx("div",{className:"flex flex-row items-center justify-center size-full",children:m.jsx("div",{className:"box-border content-stretch flex items-center justify-center pl-[0.53px] pr-[0.522px] py-[0.522px] relative size-full",children:m.jsx(bP,{})})}),m.jsx("div",{className:"absolute inset-0 pointer-events-none shadow-[0px_1px_0px_0px_inset_rgba(255,255,255,0.1)]"})]})}function _P({onRefresh:t}){const[e,r]=b.useState(!1),{t:o}=$n(),i=async()=>{if(!e){r(!0);try{await t()}catch(c){console.error("Error refreshing poems:",c)}finally{r(!1)}}};return m.jsxs("button",{onClick:i,disabled:e,className:"w-10 h-10 rounded-full shadow-2xl backdrop-blur-xl border border-white/20 transition-all duration-300 hover:scale-105 active:scale-95 flex items-center justify-center group relative overflow-hidden",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05))",boxShadow:`
          0 8px 32px rgba(0, 0, 0, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.2),
          inset 0 -1px 0 rgba(0, 0, 0, 0.1)
        `},"aria-label":e?"  ...":"  ",title:e?"  ...":"  ",children:[m.jsx("div",{className:`absolute inset-0 rounded-full border-2 border-blue-400 transition-opacity duration-500 ${e?"opacity-60 animate-pulse":"opacity-0"}`}),m.jsx("div",{className:`w-4 h-4 transition-transform duration-500 ${e?"animate-spin":"group-hover:rotate-180"}`,children:m.jsx(SP,{})}),m.jsx("div",{className:"absolute inset-0 rounded-full shadow-[0px_4px_16px_0px_rgba(59,130,246,0.3)] opacity-0 hover:opacity-100 transition-opacity duration-500"})]})}function kP({isOpen:t,onClose:e,currentLanguage:r,onLanguageChange:o,position:i}){const c=b.useRef(null);return b.useEffect(()=>{const l=h=>{c.current&&!c.current.contains(h.target)&&e()},d=h=>{h.key==="Escape"&&e()};return t&&(document.addEventListener("mousedown",l),document.addEventListener("keydown",d)),()=>{document.removeEventListener("mousedown",l),document.removeEventListener("keydown",d)}},[t,e]),t?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 z-40 bg-black/20 backdrop-blur-sm language-menu-backdrop",onClick:e}),m.jsx("div",{ref:c,className:"fixed z-50 w-32 language-menu-popup",style:{top:i.top-120,right:Math.max(16,i.right-16),minWidth:"120px",...window.innerWidth>743&&{right:Math.min(i.right-16,(window.innerWidth-743)/2+743-136)}},children:m.jsxs("div",{className:"bg-[rgba(38,38,38,0.95)] backdrop-blur-xl rounded-[34px] border border-white/20 shadow-2xl overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0 rounded-[34px]",children:[m.jsx("div",{className:"absolute inset-0 bg-[rgba(204,204,204,0.67)] mix-blend-color-burn rounded-[34px]"}),m.jsx("div",{className:"absolute inset-0 rounded-[34px]",style:{backgroundImage:"linear-gradient(90deg, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0.03) 100%), linear-gradient(90deg, rgba(0, 0, 0, 0.33) 0%, rgba(0, 0, 0, 0.33) 100%)"}})]}),m.jsxs("div",{className:"relative z-10 py-2",children:[m.jsxs("button",{onClick:()=>{o("fa"),e()},className:"w-full px-4 py-2 flex items-center gap-2 hover:bg-white/10 transition-colors duration-200",children:[m.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:r==="fa"&&m.jsx("div",{className:"text-white text-lg font-semibold",children:""})}),m.jsx("div",{className:"flex-1 text-left",children:m.jsx("div",{className:"text-white text-sm font-normal tracking-wide",children:""})})]}),m.jsxs("button",{onClick:()=>{o("en"),e()},className:"w-full px-4 py-2 flex items-center gap-2 hover:bg-white/10 transition-colors duration-200",children:[m.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:r==="en"&&m.jsx("div",{className:"text-white text-lg font-semibold",children:""})}),m.jsx("div",{className:"flex-1 text-left",children:m.jsx("div",{className:"text-white text-sm font-normal tracking-wide",children:"English"})})]})]})]})})]}):null}function EP(){const{theme:t}=zr(),e=t==="light"?"#0A0A0A":"#FAFAFA";return m.jsx("div",{className:"relative shrink-0 size-[16px]","data-name":"Globe",children:m.jsx("svg",{className:"block size-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 16 16",children:m.jsx("g",{id:"Globe",children:m.jsx("path",{d:"M8 1.33333C7.148 1.33333 6.22996 2.64067 5.72396 4.66667H10.276C9.77004 2.64067 8.852 1.33333 8 1.33333ZM5.3737 1.8737C4.05103 2.44303 2.95301 3.43067 2.23568 4.66667H4.34115C4.57848 3.57467 4.93103 2.6257 5.3737 1.8737ZM10.6263 1.8737C11.0683 2.6257 11.4215 3.57467 11.6589 4.66667H13.7643C13.047 3.43067 11.949 2.44303 10.6263 1.8737ZM1.64063 6C1.44196 6.632 1.33333 7.30333 1.33333 8C1.33333 8.69667 1.44196 9.368 1.64063 10H4.12109C4.04509 9.36333 4 8.69733 4 8C4 7.30267 4.04509 6.63667 4.12109 6H1.64063ZM5.46745 6C5.38145 6.626 5.33333 7.29667 5.33333 8C5.33333 8.70333 5.38145 9.374 5.46745 10H10.5326C10.6179 9.374 10.6667 8.70333 10.6667 8C10.6667 7.29667 10.6186 6.626 10.5326 6H5.46745ZM11.8789 6C11.9549 6.63667 12 7.30267 12 8C12 8.69733 11.9549 9.36333 11.8789 10H14.3594C14.5587 9.368 14.6667 8.69667 14.6667 8C14.6667 7.30333 14.5587 6.632 14.3594 6H11.8789ZM2.23568 11.3333C2.95301 12.5693 4.05103 13.557 5.3737 14.1263C4.9317 13.3743 4.57848 12.4253 4.34115 11.3333H2.23568ZM5.72396 11.3333C6.22996 13.3593 7.148 14.6667 8 14.6667C8.852 14.6667 9.77004 13.3593 10.276 11.3333H5.72396ZM11.6589 11.3333C11.4215 12.4253 11.069 13.3743 10.6263 14.1263C11.949 13.557 13.047 12.5693 13.7643 11.3333H11.6589Z",fill:e,id:"Vector"})})})})}function TP(){return m.jsxs("div",{className:"bg-[rgba(38,38,38,0.3)] relative rounded-[1.75098e+07px] size-full","data-name":"Button",children:[m.jsx("div",{"aria-hidden":"true",className:"absolute border-[0.522px] border-neutral-800 border-solid inset-0 pointer-events-none rounded-[1.75098e+07px] shadow-[0px_4px_16px_0px_rgba(0,0,0,0.15)]"}),m.jsx("div",{className:"flex flex-row items-center justify-center size-full",children:m.jsx("div",{className:"box-border content-stretch flex items-center justify-center pl-[0.53px] pr-[0.522px] py-[0.522px] relative size-full",children:m.jsx(EP,{})})}),m.jsx("div",{className:"absolute inset-0 pointer-events-none shadow-[0px_1px_0px_0px_inset_rgba(255,255,255,0.1)]"})]})}function PP({onLanguageChange:t}){const{language:e,setLanguage:r,t:o}=$n(),[i,c]=b.useState(!1),[l,d]=b.useState({top:0,right:0}),h=b.useRef(null),p=()=>{if(h.current){const g=h.current.getBoundingClientRect();d({top:g.top,right:window.innerWidth-g.right})}c(!0)},v=async g=>{g!==e&&(r(g),t&&t(g))};return m.jsxs(m.Fragment,{children:[m.jsxs("button",{ref:h,onClick:p,className:"w-10 h-10 rounded-full shadow-2xl backdrop-blur-xl border border-white/20 transition-all duration-300 hover:scale-105 active:scale-95 flex items-center justify-center group relative overflow-hidden",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05))",boxShadow:`
            0 8px 32px rgba(0, 0, 0, 0.3),
            inset 0 1px 0 rgba(255, 255, 255, 0.2),
            inset 0 -1px 0 rgba(0, 0, 0, 0.1)
          `},"aria-label":e==="fa"?" ":"Change Language",title:e==="fa"?" ":"Change Language",children:[m.jsx("div",{className:"w-4 h-4",children:m.jsx(TP,{})}),m.jsx("div",{className:"absolute inset-0 rounded-full shadow-[0px_4px_16px_0px_rgba(59,130,246,0.3)] opacity-0 hover:opacity-100 transition-opacity duration-500"})]}),typeof document<"u"&&gy.createPortal(m.jsx(kP,{isOpen:i,onClose:()=>c(!1),currentLanguage:e,onLanguageChange:v,position:l}),document.body)]})}const CP={p29890330:"M3.2 1.6C3.05855 1.6 2.9229 1.65619 2.82288 1.75621C2.72286 1.85623 2.66667 1.99188 2.66667 2.13333C2.66667 2.13403 2.66667 2.13472 2.66667 2.13542V8V13.8646C2.66667 13.8653 2.66667 13.866 2.66667 13.8667C2.66667 14.0081 2.72286 14.1438 2.82288 14.2438C2.9229 14.3438 3.05855 14.4 3.2 14.4C3.31102 14.3997 3.41917 14.3647 3.50937 14.3L3.51042 14.301L14.0885 8.48438C14.1814 8.44191 14.2601 8.3737 14.3153 8.28784C14.3705 8.20198 14.3999 8.10208 14.4 8C14.4001 7.89506 14.3691 7.79244 14.3111 7.70498C14.2532 7.61753 14.1706 7.54912 14.074 7.50833L3.51042 1.69896H3.50937C3.41905 1.63461 3.31091 1.60002 3.2 1.6Z"},jP={p15b16e00:"M4.26667 2.13333C3.67733 2.13333 3.2 2.61067 3.2 3.2V12.8C3.2 13.3893 3.67733 13.8667 4.26667 13.8667H5.33333C5.92267 13.8667 6.4 13.3893 6.4 12.8V3.2C6.4 2.61067 5.92267 2.13333 5.33333 2.13333H4.26667ZM10.6667 2.13333C10.0773 2.13333 9.6 2.61067 9.6 3.2V12.8C9.6 13.3893 10.0773 13.8667 10.6667 13.8667H11.7333C12.3227 13.8667 12.8 13.3893 12.8 12.8V3.2C12.8 2.61067 12.3227 2.13333 11.7333 2.13333H10.6667Z"};function AP({poem:t}){const[e,r]=b.useState(!1),[o,i]=b.useState(!1),[c,l]=b.useState(null),d=b.useRef(null),h=b.useRef(null),{language:p}=$n(),{theme:v}=zr();if(b.useEffect(()=>{t&&h.current!==t.id&&(d.current&&(d.current.pause(),d.current=null),r(!1),i(!1),l(null),h.current=t.id)},[t?.id]),b.useEffect(()=>()=>{d.current&&(d.current.pause(),d.current=null)},[]),p!=="en"||!t)return null;const g=async()=>{if(t)try{if(e&&d.current){d.current.pause(),r(!1);return}if(d.current&&!e){d.current.play(),r(!0);return}i(!0),l(null);const{projectId:w,publicAnonKey:S}=await it(async()=>{const{projectId:I,publicAnonKey:A}=await Promise.resolve().then(()=>Xn);return{projectId:I,publicAnonKey:A}},void 0),_=await fetch(`https://${w}.supabase.co/functions/v1/make-server-c192d0ee/text-to-speech`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify({text:t?.text||"",voice:"alloy"})});if(!_.ok){const I=await _.json();throw new Error(I.error||"Failed to generate speech")}const k=await _.blob(),E=URL.createObjectURL(k),P=new Audio(E);d.current=P,P.onended=()=>{r(!1),URL.revokeObjectURL(E)},P.onerror=()=>{l("Failed to play audio"),r(!1),i(!1)},P.oncanplaythrough=()=>{i(!1),P.play(),r(!0)},P.load()}catch(w){console.error("Error playing poem:",w),l(w.message||"Failed to play poem"),i(!1),r(!1)}};return m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:g,disabled:o,className:"w-10 h-10 rounded-full shadow-2xl backdrop-blur-xl border border-white/20 transition-all duration-300 hover:scale-105 active:scale-95 flex items-center justify-center group relative overflow-hidden disabled:opacity-50",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05))",boxShadow:`
            0 8px 32px rgba(0, 0, 0, 0.3),
            inset 0 1px 0 rgba(255, 255, 255, 0.2),
            inset 0 -1px 0 rgba(0, 0, 0, 0.1)
          `},"aria-label":e?"Pause poem":"Play poem",title:e?"Pause poem":"Play poem",children:[m.jsx("div",{className:"w-4 h-4",children:o?m.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e?m.jsx("div",{className:"relative shrink-0 size-[16px]","data-name":"Pause",children:m.jsx("svg",{className:"block size-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 16 16",children:m.jsx("g",{id:"Pause",children:m.jsx("path",{d:jP.p15b16e00,fill:"var(--fill-0, #FAFAFA)",id:"Vector"})})})}):m.jsx("div",{className:"relative shrink-0 size-[16px]","data-name":"Play",children:m.jsx("svg",{className:"block size-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 16 16",children:m.jsx("g",{id:"Play",children:m.jsx("path",{d:CP.p29890330,fill:"var(--fill-0, #FAFAFA)",id:"Vector"})})})})}),m.jsx("div",{className:"absolute inset-0 rounded-full shadow-[0px_4px_16px_0px_rgba(59,130,246,0.3)] opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),c&&m.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-red-500/90 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:c})]})}function Jg(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function vy(...t){return e=>{let r=!1;const o=t.map(i=>{const c=Jg(i,e);return!r&&typeof c=="function"&&(r=!0),c});if(r)return()=>{for(let i=0;i<o.length;i++){const c=o[i];typeof c=="function"?c():Jg(t[i],null)}}}}function Es(...t){return b.useCallback(vy(...t),t)}function yy(t){const e=RP(t),r=b.forwardRef((o,i)=>{const{children:c,...l}=o,d=b.Children.toArray(c),h=d.find(IP);if(h){const p=h.props.children,v=d.map(g=>g===h?b.Children.count(p)>1?b.Children.only(null):b.isValidElement(p)?p.props.children:null:g);return m.jsx(e,{...l,ref:i,children:b.isValidElement(p)?b.cloneElement(p,void 0,v):null})}return m.jsx(e,{...l,ref:i,children:c})});return r.displayName=`${t}.Slot`,r}var NP=yy("Slot");function RP(t){const e=b.forwardRef((r,o)=>{const{children:i,...c}=r;if(b.isValidElement(i)){const l=DP(i),d=OP(c,i.props);return i.type!==b.Fragment&&(d.ref=o?vy(o,l):l),b.cloneElement(i,d)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var LP=Symbol("radix.slottable");function IP(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===LP}function OP(t,e){const r={...e};for(const o in e){const i=t[o],c=e[o];/^on[A-Z]/.test(o)?i&&c?r[o]=(...d)=>{const h=c(...d);return i(...d),h}:i&&(r[o]=i):o==="style"?r[o]={...i,...c}:o==="className"&&(r[o]=[i,c].filter(Boolean).join(" "))}return{...t,...r}}function DP(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function wy(t){var e,r,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=wy(t[e]))&&(o&&(o+=" "),o+=r)}else for(r in t)t[r]&&(o&&(o+=" "),o+=r);return o}function xy(){for(var t,e,r=0,o="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=wy(t))&&(o&&(o+=" "),o+=e);return o}const Xg=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Qg=xy,MP=(t,e)=>r=>{var o;if(e?.variants==null)return Qg(t,r?.class,r?.className);const{variants:i,defaultVariants:c}=e,l=Object.keys(i).map(p=>{const v=r?.[p],g=c?.[p];if(v===null)return null;const w=Xg(v)||Xg(g);return i[p][w]}),d=r&&Object.entries(r).reduce((p,v)=>{let[g,w]=v;return w===void 0||(p[g]=w),p},{}),h=e==null||(o=e.compoundVariants)===null||o===void 0?void 0:o.reduce((p,v)=>{let{class:g,className:w,...S}=v;return Object.entries(S).every(_=>{let[k,E]=_;return Array.isArray(E)?E.includes({...c,...d}[k]):{...c,...d}[k]===E})?[...p,g,w]:p},[]);return Qg(t,l,h,r?.class,r?.className)},hh="-",$P=t=>{const e=VP(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:o}=t;return{getClassGroupId:l=>{const d=l.split(hh);return d[0]===""&&d.length!==1&&d.shift(),by(d,e)||FP(l)},getConflictingClassGroupIds:(l,d)=>{const h=r[l]||[];return d&&o[l]?[...h,...o[l]]:h}}},by=(t,e)=>{if(t.length===0)return e.classGroupId;const r=t[0],o=e.nextPart.get(r),i=o?by(t.slice(1),o):void 0;if(i)return i;if(e.validators.length===0)return;const c=t.join(hh);return e.validators.find(({validator:l})=>l(c))?.classGroupId},Zg=/^\[(.+)\]$/,FP=t=>{if(Zg.test(t)){const e=Zg.exec(t)[1],r=e?.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},VP=t=>{const{theme:e,classGroups:r}=t,o={nextPart:new Map,validators:[]};for(const i in r)_d(r[i],o,i,e);return o},_d=(t,e,r,o)=>{t.forEach(i=>{if(typeof i=="string"){const c=i===""?e:ev(e,i);c.classGroupId=r;return}if(typeof i=="function"){if(UP(i)){_d(i(o),e,r,o);return}e.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([c,l])=>{_d(l,ev(e,c),r,o)})})},ev=(t,e)=>{let r=t;return e.split(hh).forEach(o=>{r.nextPart.has(o)||r.nextPart.set(o,{nextPart:new Map,validators:[]}),r=r.nextPart.get(o)}),r},UP=t=>t.isThemeGetter,zP=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,o=new Map;const i=(c,l)=>{r.set(c,l),e++,e>t&&(e=0,o=r,r=new Map)};return{get(c){let l=r.get(c);if(l!==void 0)return l;if((l=o.get(c))!==void 0)return i(c,l),l},set(c,l){r.has(c)?r.set(c,l):i(c,l)}}},kd="!",Ed=":",BP=Ed.length,HP=t=>{const{prefix:e,experimentalParseClassName:r}=t;let o=i=>{const c=[];let l=0,d=0,h=0,p;for(let _=0;_<i.length;_++){let k=i[_];if(l===0&&d===0){if(k===Ed){c.push(i.slice(h,_)),h=_+BP;continue}if(k==="/"){p=_;continue}}k==="["?l++:k==="]"?l--:k==="("?d++:k===")"&&d--}const v=c.length===0?i:i.substring(h),g=WP(v),w=g!==v,S=p&&p>h?p-h:void 0;return{modifiers:c,hasImportantModifier:w,baseClassName:g,maybePostfixModifierPosition:S}};if(e){const i=e+Ed,c=o;o=l=>l.startsWith(i)?c(l.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(r){const i=o;o=c=>r({className:c,parseClassName:i})}return o},WP=t=>t.endsWith(kd)?t.substring(0,t.length-1):t.startsWith(kd)?t.substring(1):t,qP=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(o=>[o,!0]));return o=>{if(o.length<=1)return o;const i=[];let c=[];return o.forEach(l=>{l[0]==="["||e[l]?(i.push(...c.sort(),l),c=[]):c.push(l)}),i.push(...c.sort()),i}},KP=t=>({cache:zP(t.cacheSize),parseClassName:HP(t),sortModifiers:qP(t),...$P(t)}),GP=/\s+/,YP=(t,e)=>{const{parseClassName:r,getClassGroupId:o,getConflictingClassGroupIds:i,sortModifiers:c}=e,l=[],d=t.trim().split(GP);let h="";for(let p=d.length-1;p>=0;p-=1){const v=d[p],{isExternal:g,modifiers:w,hasImportantModifier:S,baseClassName:_,maybePostfixModifierPosition:k}=r(v);if(g){h=v+(h.length>0?" "+h:h);continue}let E=!!k,P=o(E?_.substring(0,k):_);if(!P){if(!E){h=v+(h.length>0?" "+h:h);continue}if(P=o(_),!P){h=v+(h.length>0?" "+h:h);continue}E=!1}const I=c(w).join(":"),A=S?I+kd:I,W=A+P;if(l.includes(W))continue;l.push(W);const V=i(P,E);for(let O=0;O<V.length;++O){const H=V[O];l.push(A+H)}h=v+(h.length>0?" "+h:h)}return h};function JP(){let t=0,e,r,o="";for(;t<arguments.length;)(e=arguments[t++])&&(r=Sy(e))&&(o&&(o+=" "),o+=r);return o}const Sy=t=>{if(typeof t=="string")return t;let e,r="";for(let o=0;o<t.length;o++)t[o]&&(e=Sy(t[o]))&&(r&&(r+=" "),r+=e);return r};function XP(t,...e){let r,o,i,c=l;function l(h){const p=e.reduce((v,g)=>g(v),t());return r=KP(p),o=r.cache.get,i=r.cache.set,c=d,d(h)}function d(h){const p=o(h);if(p)return p;const v=YP(h,r);return i(h,v),v}return function(){return c(JP.apply(null,arguments))}}const St=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},_y=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ky=/^\((?:(\w[\w-]*):)?(.+)\)$/i,QP=/^\d+\/\d+$/,ZP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,nC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,rC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,lo=t=>QP.test(t),De=t=>!!t&&!Number.isNaN(Number(t)),Ir=t=>!!t&&Number.isInteger(Number(t)),Fu=t=>t.endsWith("%")&&De(t.slice(0,-1)),lr=t=>ZP.test(t),sC=()=>!0,oC=t=>eC.test(t)&&!tC.test(t),Ey=()=>!1,iC=t=>nC.test(t),aC=t=>rC.test(t),lC=t=>!ve(t)&&!ye(t),cC=t=>jo(t,Cy,Ey),ve=t=>_y.test(t),ls=t=>jo(t,jy,oC),Vu=t=>jo(t,pC,De),tv=t=>jo(t,Ty,Ey),uC=t=>jo(t,Py,aC),nl=t=>jo(t,Ay,iC),ye=t=>ky.test(t),fi=t=>Ao(t,jy),dC=t=>Ao(t,mC),nv=t=>Ao(t,Ty),hC=t=>Ao(t,Cy),fC=t=>Ao(t,Py),rl=t=>Ao(t,Ay,!0),jo=(t,e,r)=>{const o=_y.exec(t);return o?o[1]?e(o[1]):r(o[2]):!1},Ao=(t,e,r=!1)=>{const o=ky.exec(t);return o?o[1]?e(o[1]):r:!1},Ty=t=>t==="position"||t==="percentage",Py=t=>t==="image"||t==="url",Cy=t=>t==="length"||t==="size"||t==="bg-size",jy=t=>t==="length",pC=t=>t==="number",mC=t=>t==="family-name",Ay=t=>t==="shadow",gC=()=>{const t=St("color"),e=St("font"),r=St("text"),o=St("font-weight"),i=St("tracking"),c=St("leading"),l=St("breakpoint"),d=St("container"),h=St("spacing"),p=St("radius"),v=St("shadow"),g=St("inset-shadow"),w=St("text-shadow"),S=St("drop-shadow"),_=St("blur"),k=St("perspective"),E=St("aspect"),P=St("ease"),I=St("animate"),A=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],V=()=>[...W(),ye,ve],O=()=>["auto","hidden","clip","visible","scroll"],H=()=>["auto","contain","none"],M=()=>[ye,ve,h],ee=()=>[lo,"full","auto",...M()],ie=()=>[Ir,"none","subgrid",ye,ve],Ee=()=>["auto",{span:["full",Ir,ye,ve]},Ir,ye,ve],he=()=>[Ir,"auto",ye,ve],we=()=>["auto","min","max","fr",ye,ve],_e=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],xe=()=>["start","end","center","stretch","center-safe","end-safe"],ue=()=>["auto",...M()],U=()=>[lo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...M()],C=()=>[t,ye,ve],re=()=>[...W(),nv,tv,{position:[ye,ve]}],K=()=>["no-repeat",{repeat:["","x","y","space","round"]}],R=()=>["auto","cover","contain",hC,cC,{size:[ye,ve]}],G=()=>[Fu,fi,ls],N=()=>["","none","full",p,ye,ve],$=()=>["",De,fi,ls],X=()=>["solid","dashed","dotted","double"],ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],le=()=>[De,Fu,nv,tv],B=()=>["","none",_,ye,ve],de=()=>["none",De,ye,ve],be=()=>["none",De,ye,ve],Oe=()=>[De,ye,ve],Ie=()=>[lo,"full",...M()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[lr],breakpoint:[lr],color:[sC],container:[lr],"drop-shadow":[lr],ease:["in","out","in-out"],font:[lC],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[lr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[lr],shadow:[lr],spacing:["px",De],text:[lr],"text-shadow":[lr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",lo,ve,ye,E]}],container:["container"],columns:[{columns:[De,ve,ye,d]}],"break-after":[{"break-after":A()}],"break-before":[{"break-before":A()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:V()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:H()}],"overscroll-x":[{"overscroll-x":H()}],"overscroll-y":[{"overscroll-y":H()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ee()}],"inset-x":[{"inset-x":ee()}],"inset-y":[{"inset-y":ee()}],start:[{start:ee()}],end:[{end:ee()}],top:[{top:ee()}],right:[{right:ee()}],bottom:[{bottom:ee()}],left:[{left:ee()}],visibility:["visible","invisible","collapse"],z:[{z:[Ir,"auto",ye,ve]}],basis:[{basis:[lo,"full","auto",d,...M()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[De,lo,"auto","initial","none",ve]}],grow:[{grow:["",De,ye,ve]}],shrink:[{shrink:["",De,ye,ve]}],order:[{order:[Ir,"first","last","none",ye,ve]}],"grid-cols":[{"grid-cols":ie()}],"col-start-end":[{col:Ee()}],"col-start":[{"col-start":he()}],"col-end":[{"col-end":he()}],"grid-rows":[{"grid-rows":ie()}],"row-start-end":[{row:Ee()}],"row-start":[{"row-start":he()}],"row-end":[{"row-end":he()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":we()}],"auto-rows":[{"auto-rows":we()}],gap:[{gap:M()}],"gap-x":[{"gap-x":M()}],"gap-y":[{"gap-y":M()}],"justify-content":[{justify:[..._e(),"normal"]}],"justify-items":[{"justify-items":[...xe(),"normal"]}],"justify-self":[{"justify-self":["auto",...xe()]}],"align-content":[{content:["normal",..._e()]}],"align-items":[{items:[...xe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...xe(),{baseline:["","last"]}]}],"place-content":[{"place-content":_e()}],"place-items":[{"place-items":[...xe(),"baseline"]}],"place-self":[{"place-self":["auto",...xe()]}],p:[{p:M()}],px:[{px:M()}],py:[{py:M()}],ps:[{ps:M()}],pe:[{pe:M()}],pt:[{pt:M()}],pr:[{pr:M()}],pb:[{pb:M()}],pl:[{pl:M()}],m:[{m:ue()}],mx:[{mx:ue()}],my:[{my:ue()}],ms:[{ms:ue()}],me:[{me:ue()}],mt:[{mt:ue()}],mr:[{mr:ue()}],mb:[{mb:ue()}],ml:[{ml:ue()}],"space-x":[{"space-x":M()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":M()}],"space-y-reverse":["space-y-reverse"],size:[{size:U()}],w:[{w:[d,"screen",...U()]}],"min-w":[{"min-w":[d,"screen","none",...U()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[l]},...U()]}],h:[{h:["screen","lh",...U()]}],"min-h":[{"min-h":["screen","lh","none",...U()]}],"max-h":[{"max-h":["screen","lh",...U()]}],"font-size":[{text:["base",r,fi,ls]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,ye,Vu]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Fu,ve]}],"font-family":[{font:[dC,ve,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,ye,ve]}],"line-clamp":[{"line-clamp":[De,"none",ye,Vu]}],leading:[{leading:[c,...M()]}],"list-image":[{"list-image":["none",ye,ve]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ye,ve]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:C()}],"text-color":[{text:C()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:[De,"from-font","auto",ye,ls]}],"text-decoration-color":[{decoration:C()}],"underline-offset":[{"underline-offset":[De,"auto",ye,ve]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye,ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye,ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:re()}],"bg-repeat":[{bg:K()}],"bg-size":[{bg:R()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ir,ye,ve],radial:["",ye,ve],conic:[Ir,ye,ve]},fC,uC]}],"bg-color":[{bg:C()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:C()}],"gradient-via":[{via:C()}],"gradient-to":[{to:C()}],rounded:[{rounded:N()}],"rounded-s":[{"rounded-s":N()}],"rounded-e":[{"rounded-e":N()}],"rounded-t":[{"rounded-t":N()}],"rounded-r":[{"rounded-r":N()}],"rounded-b":[{"rounded-b":N()}],"rounded-l":[{"rounded-l":N()}],"rounded-ss":[{"rounded-ss":N()}],"rounded-se":[{"rounded-se":N()}],"rounded-ee":[{"rounded-ee":N()}],"rounded-es":[{"rounded-es":N()}],"rounded-tl":[{"rounded-tl":N()}],"rounded-tr":[{"rounded-tr":N()}],"rounded-br":[{"rounded-br":N()}],"rounded-bl":[{"rounded-bl":N()}],"border-w":[{border:$()}],"border-w-x":[{"border-x":$()}],"border-w-y":[{"border-y":$()}],"border-w-s":[{"border-s":$()}],"border-w-e":[{"border-e":$()}],"border-w-t":[{"border-t":$()}],"border-w-r":[{"border-r":$()}],"border-w-b":[{"border-b":$()}],"border-w-l":[{"border-l":$()}],"divide-x":[{"divide-x":$()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":$()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...X(),"hidden","none"]}],"divide-style":[{divide:[...X(),"hidden","none"]}],"border-color":[{border:C()}],"border-color-x":[{"border-x":C()}],"border-color-y":[{"border-y":C()}],"border-color-s":[{"border-s":C()}],"border-color-e":[{"border-e":C()}],"border-color-t":[{"border-t":C()}],"border-color-r":[{"border-r":C()}],"border-color-b":[{"border-b":C()}],"border-color-l":[{"border-l":C()}],"divide-color":[{divide:C()}],"outline-style":[{outline:[...X(),"none","hidden"]}],"outline-offset":[{"outline-offset":[De,ye,ve]}],"outline-w":[{outline:["",De,fi,ls]}],"outline-color":[{outline:C()}],shadow:[{shadow:["","none",v,rl,nl]}],"shadow-color":[{shadow:C()}],"inset-shadow":[{"inset-shadow":["none",g,rl,nl]}],"inset-shadow-color":[{"inset-shadow":C()}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:C()}],"ring-offset-w":[{"ring-offset":[De,ls]}],"ring-offset-color":[{"ring-offset":C()}],"inset-ring-w":[{"inset-ring":$()}],"inset-ring-color":[{"inset-ring":C()}],"text-shadow":[{"text-shadow":["none",w,rl,nl]}],"text-shadow-color":[{"text-shadow":C()}],opacity:[{opacity:[De,ye,ve]}],"mix-blend":[{"mix-blend":[...ae(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ae()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[De]}],"mask-image-linear-from-pos":[{"mask-linear-from":le()}],"mask-image-linear-to-pos":[{"mask-linear-to":le()}],"mask-image-linear-from-color":[{"mask-linear-from":C()}],"mask-image-linear-to-color":[{"mask-linear-to":C()}],"mask-image-t-from-pos":[{"mask-t-from":le()}],"mask-image-t-to-pos":[{"mask-t-to":le()}],"mask-image-t-from-color":[{"mask-t-from":C()}],"mask-image-t-to-color":[{"mask-t-to":C()}],"mask-image-r-from-pos":[{"mask-r-from":le()}],"mask-image-r-to-pos":[{"mask-r-to":le()}],"mask-image-r-from-color":[{"mask-r-from":C()}],"mask-image-r-to-color":[{"mask-r-to":C()}],"mask-image-b-from-pos":[{"mask-b-from":le()}],"mask-image-b-to-pos":[{"mask-b-to":le()}],"mask-image-b-from-color":[{"mask-b-from":C()}],"mask-image-b-to-color":[{"mask-b-to":C()}],"mask-image-l-from-pos":[{"mask-l-from":le()}],"mask-image-l-to-pos":[{"mask-l-to":le()}],"mask-image-l-from-color":[{"mask-l-from":C()}],"mask-image-l-to-color":[{"mask-l-to":C()}],"mask-image-x-from-pos":[{"mask-x-from":le()}],"mask-image-x-to-pos":[{"mask-x-to":le()}],"mask-image-x-from-color":[{"mask-x-from":C()}],"mask-image-x-to-color":[{"mask-x-to":C()}],"mask-image-y-from-pos":[{"mask-y-from":le()}],"mask-image-y-to-pos":[{"mask-y-to":le()}],"mask-image-y-from-color":[{"mask-y-from":C()}],"mask-image-y-to-color":[{"mask-y-to":C()}],"mask-image-radial":[{"mask-radial":[ye,ve]}],"mask-image-radial-from-pos":[{"mask-radial-from":le()}],"mask-image-radial-to-pos":[{"mask-radial-to":le()}],"mask-image-radial-from-color":[{"mask-radial-from":C()}],"mask-image-radial-to-color":[{"mask-radial-to":C()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":W()}],"mask-image-conic-pos":[{"mask-conic":[De]}],"mask-image-conic-from-pos":[{"mask-conic-from":le()}],"mask-image-conic-to-pos":[{"mask-conic-to":le()}],"mask-image-conic-from-color":[{"mask-conic-from":C()}],"mask-image-conic-to-color":[{"mask-conic-to":C()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:re()}],"mask-repeat":[{mask:K()}],"mask-size":[{mask:R()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ye,ve]}],filter:[{filter:["","none",ye,ve]}],blur:[{blur:B()}],brightness:[{brightness:[De,ye,ve]}],contrast:[{contrast:[De,ye,ve]}],"drop-shadow":[{"drop-shadow":["","none",S,rl,nl]}],"drop-shadow-color":[{"drop-shadow":C()}],grayscale:[{grayscale:["",De,ye,ve]}],"hue-rotate":[{"hue-rotate":[De,ye,ve]}],invert:[{invert:["",De,ye,ve]}],saturate:[{saturate:[De,ye,ve]}],sepia:[{sepia:["",De,ye,ve]}],"backdrop-filter":[{"backdrop-filter":["","none",ye,ve]}],"backdrop-blur":[{"backdrop-blur":B()}],"backdrop-brightness":[{"backdrop-brightness":[De,ye,ve]}],"backdrop-contrast":[{"backdrop-contrast":[De,ye,ve]}],"backdrop-grayscale":[{"backdrop-grayscale":["",De,ye,ve]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[De,ye,ve]}],"backdrop-invert":[{"backdrop-invert":["",De,ye,ve]}],"backdrop-opacity":[{"backdrop-opacity":[De,ye,ve]}],"backdrop-saturate":[{"backdrop-saturate":[De,ye,ve]}],"backdrop-sepia":[{"backdrop-sepia":["",De,ye,ve]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":M()}],"border-spacing-x":[{"border-spacing-x":M()}],"border-spacing-y":[{"border-spacing-y":M()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ye,ve]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[De,"initial",ye,ve]}],ease:[{ease:["linear","initial",P,ye,ve]}],delay:[{delay:[De,ye,ve]}],animate:[{animate:["none",I,ye,ve]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[k,ye,ve]}],"perspective-origin":[{"perspective-origin":V()}],rotate:[{rotate:de()}],"rotate-x":[{"rotate-x":de()}],"rotate-y":[{"rotate-y":de()}],"rotate-z":[{"rotate-z":de()}],scale:[{scale:be()}],"scale-x":[{"scale-x":be()}],"scale-y":[{"scale-y":be()}],"scale-z":[{"scale-z":be()}],"scale-3d":["scale-3d"],skew:[{skew:Oe()}],"skew-x":[{"skew-x":Oe()}],"skew-y":[{"skew-y":Oe()}],transform:[{transform:[ye,ve,"","none","gpu","cpu"]}],"transform-origin":[{origin:V()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ie()}],"translate-x":[{"translate-x":Ie()}],"translate-y":[{"translate-y":Ie()}],"translate-z":[{"translate-z":Ie()}],"translate-none":["translate-none"],accent:[{accent:C()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:C()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye,ve]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye,ve]}],fill:[{fill:["none",...C()]}],"stroke-w":[{stroke:[De,fi,ls,Vu]}],stroke:[{stroke:["none",...C()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},vC=XP(gC);function Fn(...t){return vC(xy(t))}const yC=MP("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function Ht({className:t,variant:e,size:r,asChild:o=!1,...i}){const c=o?NP:"button";return m.jsx(c,{"data-slot":"button",className:Fn(yC({variant:e,size:r,className:t})),...i})}function wC({isMuted:t,onToggleMute:e}){return m.jsx(Ht,{onClick:e,size:"icon",variant:"ghost",className:"w-10 h-10 rounded-full shadow-2xl backdrop-blur-xl border border-white/20 transition-all duration-300 hover:scale-105 active:scale-95 flex items-center justify-center group relative overflow-hidden",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05))",boxShadow:`
          0 8px 32px rgba(0, 0, 0, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.2),
          inset 0 -1px 0 rgba(0, 0, 0, 0.1)
        `},"aria-label":t?"Unmute video":"Mute video",children:t?m.jsx(a_,{className:"w-5 h-5 text-foreground"}):m.jsx(o_,{className:"w-5 h-5 text-foreground"})})}function xC({poem:t,onAuthRequired:e,onMoreOpen:r,onRefresh:o,onLanguageChange:i,isMuted:c=!1,onToggleMute:l}){return m.jsxs("div",{className:"fixed bottom-16 right-8 z-30 flex flex-col gap-2",children:[l&&m.jsx(wC,{isMuted:c,onToggleMute:l}),m.jsx(AP,{poem:t}),m.jsx(PP,{onLanguageChange:i}),m.jsx(_P,{onRefresh:o}),m.jsx(wP,{onOpen:r}),t&&m.jsx(gP,{poem:t,onAuthRequired:e})]})}function Ny(t,e=[]){let r=[];function o(c,l){const d=b.createContext(l),h=r.length;r=[...r,l];const p=g=>{const{scope:w,children:S,..._}=g,k=w?.[t]?.[h]||d,E=b.useMemo(()=>_,Object.values(_));return m.jsx(k.Provider,{value:E,children:S})};p.displayName=c+"Provider";function v(g,w){const S=w?.[t]?.[h]||d,_=b.useContext(S);if(_)return _;if(l!==void 0)return l;throw new Error(`\`${g}\` must be used within \`${c}\``)}return[p,v]}const i=()=>{const c=r.map(l=>b.createContext(l));return function(d){const h=d?.[t]||c;return b.useMemo(()=>({[`__scope${t}`]:{...d,[t]:h}}),[d,h])}};return i.scopeName=t,[o,bC(i,...e)]}function bC(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const o=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(c){const l=o.reduce((d,{useScope:h,scopeName:p})=>{const g=h(c)[`__scope${p}`];return{...d,...g}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return r.scopeName=e.scopeName,r}function $r(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...r)=>e.current?.(...r),[])}var So=globalThis?.document?b.useLayoutEffect:()=>{},SC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],hr=SC.reduce((t,e)=>{const r=yy(`Primitive.${e}`),o=b.forwardRef((i,c)=>{const{asChild:l,...d}=i,h=l?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(h,{...d,ref:c})});return o.displayName=`Primitive.${e}`,{...t,[e]:o}},{}),Uu={exports:{}},zu={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv;function _C(){if(rv)return zu;rv=1;var t=xl();function e(g,w){return g===w&&(g!==0||1/g===1/w)||g!==g&&w!==w}var r=typeof Object.is=="function"?Object.is:e,o=t.useState,i=t.useEffect,c=t.useLayoutEffect,l=t.useDebugValue;function d(g,w){var S=w(),_=o({inst:{value:S,getSnapshot:w}}),k=_[0].inst,E=_[1];return c(function(){k.value=S,k.getSnapshot=w,h(k)&&E({inst:k})},[g,S,w]),i(function(){return h(k)&&E({inst:k}),g(function(){h(k)&&E({inst:k})})},[g]),l(S),S}function h(g){var w=g.getSnapshot;g=g.value;try{var S=w();return!r(g,S)}catch{return!0}}function p(g,w){return w()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return zu.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:v,zu}var sv;function kC(){return sv||(sv=1,Uu.exports=_C()),Uu.exports}var EC=kC();function TC(){return EC.useSyncExternalStore(PC,()=>!0,()=>!1)}function PC(){return()=>{}}var fh="Avatar",[CC]=Ny(fh),[jC,Ry]=CC(fh),Ly=b.forwardRef((t,e)=>{const{__scopeAvatar:r,...o}=t,[i,c]=b.useState("idle");return m.jsx(jC,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:c,children:m.jsx(hr.span,{...o,ref:e})})});Ly.displayName=fh;var Iy="AvatarImage",Oy=b.forwardRef((t,e)=>{const{__scopeAvatar:r,src:o,onLoadingStatusChange:i=()=>{},...c}=t,l=Ry(Iy,r),d=AC(o,c),h=$r(p=>{i(p),l.onImageLoadingStatusChange(p)});return So(()=>{d!=="idle"&&h(d)},[d,h]),d==="loaded"?m.jsx(hr.img,{...c,ref:e,src:o}):null});Oy.displayName=Iy;var Dy="AvatarFallback",My=b.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:o,...i}=t,c=Ry(Dy,r),[l,d]=b.useState(o===void 0);return b.useEffect(()=>{if(o!==void 0){const h=window.setTimeout(()=>d(!0),o);return()=>window.clearTimeout(h)}},[o]),l&&c.imageLoadingStatus!=="loaded"?m.jsx(hr.span,{...i,ref:e}):null});My.displayName=Dy;function ov(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function AC(t,{referrerPolicy:e,crossOrigin:r}){const o=TC(),i=b.useRef(null),c=o?(i.current||(i.current=new window.Image),i.current):null,[l,d]=b.useState(()=>ov(c,t));return So(()=>{d(ov(c,t))},[c,t]),So(()=>{const h=g=>()=>{d(g)};if(!c)return;const p=h("loaded"),v=h("error");return c.addEventListener("load",p),c.addEventListener("error",v),e&&(c.referrerPolicy=e),typeof r=="string"&&(c.crossOrigin=r),()=>{c.removeEventListener("load",p),c.removeEventListener("error",v)}},[c,r,e]),l}var NC=Ly,RC=Oy,LC=My;function $y({className:t,...e}){return m.jsx(NC,{"data-slot":"avatar",className:Fn("relative flex size-10 shrink-0 overflow-hidden rounded-full",t),...e})}function Fy({className:t,...e}){return m.jsx(RC,{"data-slot":"avatar-image",className:Fn("aspect-square size-full",t),...e})}function Vy({className:t,...e}){return m.jsx(LC,{"data-slot":"avatar-fallback",className:Fn("bg-muted flex size-full items-center justify-center rounded-full",t),...e})}function IC({onOpen:t}){const{user:e}=Eo(),{profileImage:r,setProfileImage:o}=Ov();b.useEffect(()=>{e&&!r&&i()},[e]);const i=async()=>{if(e)try{const{projectId:l}=await it(async()=>{const{projectId:p}=await Promise.resolve().then(()=>Xn);return{projectId:p}},void 0),{data:{session:d}}=await(await it(async()=>{const{createClient:p}=await Promise.resolve().then(()=>_s);return{createClient:p}},void 0)).createClient().auth.getSession();if(!d?.access_token)return;const h=await fetch(`https://${l}.supabase.co/functions/v1/make-server-c192d0ee/profile`,{headers:{Authorization:`Bearer ${d.access_token}`}});if(h.ok){const p=await h.json();p.profile?.profileImage&&o(p.profile.profileImage)}}catch(l){console.error("Failed to load profile image:",l)}},c=()=>e?.user_metadata?.name?e.user_metadata.name.charAt(0).toUpperCase():e?.email?e.email.charAt(0).toUpperCase():"U";return m.jsx(Wt.button,{onClick:t,className:`
        fixed top-8 right-8 z-30
        w-10 h-10 rounded-full
        backdrop-blur-2xl
        bg-white/5 border border-white/10
        text-white/70 hover:text-white
        shadow-lg
        transition-all duration-300
        hover:bg-white/10
        active:scale-95
        flex items-center justify-center
        overflow-hidden
      `,style:{backdropFilter:"blur(20px) saturate(180%)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)",boxShadow:`
          0 4px 16px rgba(0, 0, 0, 0.2),
          inset 0 1px 0 rgba(255, 255, 255, 0.1)
        `},whileTap:{scale:.9},whileHover:{scale:1.05},children:e?m.jsxs($y,{className:"w-8 h-8",children:[m.jsx(Fy,{src:r}),m.jsx(Vy,{className:"bg-transparent text-white text-xs",children:c()})]}):m.jsx(Mv,{size:16})})}function cs({className:t,type:e,...r}){return m.jsx("input",{type:e,"data-slot":"input",className:Fn("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}var OC="Label",Uy=b.forwardRef((t,e)=>m.jsx(hr.label,{...t,ref:e,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(t.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Uy.displayName=OC;var DC=Uy;function us({className:t,...e}){return m.jsx(DC,{"data-slot":"label",className:Fn("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}function MC(t,e){return b.useReducer((r,o)=>e[r][o]??r,t)}var Mi=t=>{const{present:e,children:r}=t,o=$C(e),i=typeof r=="function"?r({present:o.isPresent}):b.Children.only(r),c=Es(o.ref,FC(i));return typeof r=="function"||o.isPresent?b.cloneElement(i,{ref:c}):null};Mi.displayName="Presence";function $C(t){const[e,r]=b.useState(),o=b.useRef(null),i=b.useRef(t),c=b.useRef("none"),l=t?"mounted":"unmounted",[d,h]=MC(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const p=sl(o.current);c.current=d==="mounted"?p:"none"},[d]),So(()=>{const p=o.current,v=i.current;if(v!==t){const w=c.current,S=sl(p);t?h("MOUNT"):S==="none"||p?.display==="none"?h("UNMOUNT"):h(v&&w!==S?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,h]),So(()=>{if(e){let p;const v=e.ownerDocument.defaultView??window,g=S=>{const k=sl(o.current).includes(CSS.escape(S.animationName));if(S.target===e&&k&&(h("ANIMATION_END"),!i.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",p=v.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},w=S=>{S.target===e&&(c.current=sl(o.current))};return e.addEventListener("animationstart",w),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{v.clearTimeout(p),e.removeEventListener("animationstart",w),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:b.useCallback(p=>{o.current=p?getComputedStyle(p):null,r(p)},[])}}function sl(t){return t?.animationName||"none"}function FC(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var VC=b.createContext(void 0);function UC(t){const e=b.useContext(VC);return t||e||"ltr"}function zC(t,[e,r]){return Math.min(r,Math.max(e,t))}function Ss(t,e,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t?.(i),r===!1||!i.defaultPrevented)return e?.(i)}}function BC(t,e){return b.useReducer((r,o)=>e[r][o]??r,t)}var ph="ScrollArea",[zy]=Ny(ph),[HC,En]=zy(ph),By=b.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:o="hover",dir:i,scrollHideDelay:c=600,...l}=t,[d,h]=b.useState(null),[p,v]=b.useState(null),[g,w]=b.useState(null),[S,_]=b.useState(null),[k,E]=b.useState(null),[P,I]=b.useState(0),[A,W]=b.useState(0),[V,O]=b.useState(!1),[H,M]=b.useState(!1),ee=Es(e,Ee=>h(Ee)),ie=UC(i);return m.jsx(HC,{scope:r,type:o,dir:ie,scrollHideDelay:c,scrollArea:d,viewport:p,onViewportChange:v,content:g,onContentChange:w,scrollbarX:S,onScrollbarXChange:_,scrollbarXEnabled:V,onScrollbarXEnabledChange:O,scrollbarY:k,onScrollbarYChange:E,scrollbarYEnabled:H,onScrollbarYEnabledChange:M,onCornerWidthChange:I,onCornerHeightChange:W,children:m.jsx(hr.div,{dir:ie,...l,ref:ee,style:{position:"relative","--radix-scroll-area-corner-width":P+"px","--radix-scroll-area-corner-height":A+"px",...t.style}})})});By.displayName=ph;var Hy="ScrollAreaViewport",Wy=b.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:o,nonce:i,...c}=t,l=En(Hy,r),d=b.useRef(null),h=Es(e,d,l.onViewportChange);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),m.jsx(hr.div,{"data-radix-scroll-area-viewport":"",...c,ref:h,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:m.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:o})})]})});Wy.displayName=Hy;var Qn="ScrollAreaScrollbar",qy=b.forwardRef((t,e)=>{const{forceMount:r,...o}=t,i=En(Qn,t.__scopeScrollArea),{onScrollbarXEnabledChange:c,onScrollbarYEnabledChange:l}=i,d=t.orientation==="horizontal";return b.useEffect(()=>(d?c(!0):l(!0),()=>{d?c(!1):l(!1)}),[d,c,l]),i.type==="hover"?m.jsx(WC,{...o,ref:e,forceMount:r}):i.type==="scroll"?m.jsx(qC,{...o,ref:e,forceMount:r}):i.type==="auto"?m.jsx(Ky,{...o,ref:e,forceMount:r}):i.type==="always"?m.jsx(mh,{...o,ref:e}):null});qy.displayName=Qn;var WC=b.forwardRef((t,e)=>{const{forceMount:r,...o}=t,i=En(Qn,t.__scopeScrollArea),[c,l]=b.useState(!1);return b.useEffect(()=>{const d=i.scrollArea;let h=0;if(d){const p=()=>{window.clearTimeout(h),l(!0)},v=()=>{h=window.setTimeout(()=>l(!1),i.scrollHideDelay)};return d.addEventListener("pointerenter",p),d.addEventListener("pointerleave",v),()=>{window.clearTimeout(h),d.removeEventListener("pointerenter",p),d.removeEventListener("pointerleave",v)}}},[i.scrollArea,i.scrollHideDelay]),m.jsx(Mi,{present:r||c,children:m.jsx(Ky,{"data-state":c?"visible":"hidden",...o,ref:e})})}),qC=b.forwardRef((t,e)=>{const{forceMount:r,...o}=t,i=En(Qn,t.__scopeScrollArea),c=t.orientation==="horizontal",l=Pl(()=>h("SCROLL_END"),100),[d,h]=BC("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(d==="idle"){const p=window.setTimeout(()=>h("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(p)}},[d,i.scrollHideDelay,h]),b.useEffect(()=>{const p=i.viewport,v=c?"scrollLeft":"scrollTop";if(p){let g=p[v];const w=()=>{const S=p[v];g!==S&&(h("SCROLL"),l()),g=S};return p.addEventListener("scroll",w),()=>p.removeEventListener("scroll",w)}},[i.viewport,c,h,l]),m.jsx(Mi,{present:r||d!=="hidden",children:m.jsx(mh,{"data-state":d==="hidden"?"hidden":"visible",...o,ref:e,onPointerEnter:Ss(t.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:Ss(t.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),Ky=b.forwardRef((t,e)=>{const r=En(Qn,t.__scopeScrollArea),{forceMount:o,...i}=t,[c,l]=b.useState(!1),d=t.orientation==="horizontal",h=Pl(()=>{if(r.viewport){const p=r.viewport.offsetWidth<r.viewport.scrollWidth,v=r.viewport.offsetHeight<r.viewport.scrollHeight;l(d?p:v)}},10);return _o(r.viewport,h),_o(r.content,h),m.jsx(Mi,{present:o||c,children:m.jsx(mh,{"data-state":c?"visible":"hidden",...i,ref:e})})}),mh=b.forwardRef((t,e)=>{const{orientation:r="vertical",...o}=t,i=En(Qn,t.__scopeScrollArea),c=b.useRef(null),l=b.useRef(0),[d,h]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=Qy(d.viewport,d.content),v={...o,sizes:d,onSizesChange:h,hasThumb:p>0&&p<1,onThumbChange:w=>c.current=w,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:w=>l.current=w};function g(w,S){return QC(w,l.current,d,S)}return r==="horizontal"?m.jsx(KC,{...v,ref:e,onThumbPositionChange:()=>{if(i.viewport&&c.current){const w=i.viewport.scrollLeft,S=iv(w,d,i.dir);c.current.style.transform=`translate3d(${S}px, 0, 0)`}},onWheelScroll:w=>{i.viewport&&(i.viewport.scrollLeft=w)},onDragScroll:w=>{i.viewport&&(i.viewport.scrollLeft=g(w,i.dir))}}):r==="vertical"?m.jsx(GC,{...v,ref:e,onThumbPositionChange:()=>{if(i.viewport&&c.current){const w=i.viewport.scrollTop,S=iv(w,d);c.current.style.transform=`translate3d(0, ${S}px, 0)`}},onWheelScroll:w=>{i.viewport&&(i.viewport.scrollTop=w)},onDragScroll:w=>{i.viewport&&(i.viewport.scrollTop=g(w))}}):null}),KC=b.forwardRef((t,e)=>{const{sizes:r,onSizesChange:o,...i}=t,c=En(Qn,t.__scopeScrollArea),[l,d]=b.useState(),h=b.useRef(null),p=Es(e,h,c.onScrollbarXChange);return b.useEffect(()=>{h.current&&d(getComputedStyle(h.current))},[h]),m.jsx(Yy,{"data-orientation":"horizontal",...i,ref:p,sizes:r,style:{bottom:0,left:c.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:c.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Tl(r)+"px",...t.style},onThumbPointerDown:v=>t.onThumbPointerDown(v.x),onDragScroll:v=>t.onDragScroll(v.x),onWheelScroll:(v,g)=>{if(c.viewport){const w=c.viewport.scrollLeft+v.deltaX;t.onWheelScroll(w),ew(w,g)&&v.preventDefault()}},onResize:()=>{h.current&&c.viewport&&l&&o({content:c.viewport.scrollWidth,viewport:c.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:wl(l.paddingLeft),paddingEnd:wl(l.paddingRight)}})}})}),GC=b.forwardRef((t,e)=>{const{sizes:r,onSizesChange:o,...i}=t,c=En(Qn,t.__scopeScrollArea),[l,d]=b.useState(),h=b.useRef(null),p=Es(e,h,c.onScrollbarYChange);return b.useEffect(()=>{h.current&&d(getComputedStyle(h.current))},[h]),m.jsx(Yy,{"data-orientation":"vertical",...i,ref:p,sizes:r,style:{top:0,right:c.dir==="ltr"?0:void 0,left:c.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Tl(r)+"px",...t.style},onThumbPointerDown:v=>t.onThumbPointerDown(v.y),onDragScroll:v=>t.onDragScroll(v.y),onWheelScroll:(v,g)=>{if(c.viewport){const w=c.viewport.scrollTop+v.deltaY;t.onWheelScroll(w),ew(w,g)&&v.preventDefault()}},onResize:()=>{h.current&&c.viewport&&l&&o({content:c.viewport.scrollHeight,viewport:c.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:wl(l.paddingTop),paddingEnd:wl(l.paddingBottom)}})}})}),[YC,Gy]=zy(Qn),Yy=b.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:o,hasThumb:i,onThumbChange:c,onThumbPointerUp:l,onThumbPointerDown:d,onThumbPositionChange:h,onDragScroll:p,onWheelScroll:v,onResize:g,...w}=t,S=En(Qn,r),[_,k]=b.useState(null),E=Es(e,ee=>k(ee)),P=b.useRef(null),I=b.useRef(""),A=S.viewport,W=o.content-o.viewport,V=$r(v),O=$r(h),H=Pl(g,10);function M(ee){if(P.current){const ie=ee.clientX-P.current.left,Ee=ee.clientY-P.current.top;p({x:ie,y:Ee})}}return b.useEffect(()=>{const ee=ie=>{const Ee=ie.target;_?.contains(Ee)&&V(ie,W)};return document.addEventListener("wheel",ee,{passive:!1}),()=>document.removeEventListener("wheel",ee,{passive:!1})},[A,_,W,V]),b.useEffect(O,[o,O]),_o(_,H),_o(S.content,H),m.jsx(YC,{scope:r,scrollbar:_,hasThumb:i,onThumbChange:$r(c),onThumbPointerUp:$r(l),onThumbPositionChange:O,onThumbPointerDown:$r(d),children:m.jsx(hr.div,{...w,ref:E,style:{position:"absolute",...w.style},onPointerDown:Ss(t.onPointerDown,ee=>{ee.button===0&&(ee.target.setPointerCapture(ee.pointerId),P.current=_.getBoundingClientRect(),I.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S.viewport&&(S.viewport.style.scrollBehavior="auto"),M(ee))}),onPointerMove:Ss(t.onPointerMove,M),onPointerUp:Ss(t.onPointerUp,ee=>{const ie=ee.target;ie.hasPointerCapture(ee.pointerId)&&ie.releasePointerCapture(ee.pointerId),document.body.style.webkitUserSelect=I.current,S.viewport&&(S.viewport.style.scrollBehavior=""),P.current=null})})})}),yl="ScrollAreaThumb",Jy=b.forwardRef((t,e)=>{const{forceMount:r,...o}=t,i=Gy(yl,t.__scopeScrollArea);return m.jsx(Mi,{present:r||i.hasThumb,children:m.jsx(JC,{ref:e,...o})})}),JC=b.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:o,...i}=t,c=En(yl,r),l=Gy(yl,r),{onThumbPositionChange:d}=l,h=Es(e,g=>l.onThumbChange(g)),p=b.useRef(void 0),v=Pl(()=>{p.current&&(p.current(),p.current=void 0)},100);return b.useEffect(()=>{const g=c.viewport;if(g){const w=()=>{if(v(),!p.current){const S=ZC(g,d);p.current=S,d()}};return d(),g.addEventListener("scroll",w),()=>g.removeEventListener("scroll",w)}},[c.viewport,v,d]),m.jsx(hr.div,{"data-state":l.hasThumb?"visible":"hidden",...i,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:Ss(t.onPointerDownCapture,g=>{const S=g.target.getBoundingClientRect(),_=g.clientX-S.left,k=g.clientY-S.top;l.onThumbPointerDown({x:_,y:k})}),onPointerUp:Ss(t.onPointerUp,l.onThumbPointerUp)})});Jy.displayName=yl;var gh="ScrollAreaCorner",Xy=b.forwardRef((t,e)=>{const r=En(gh,t.__scopeScrollArea),o=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&o?m.jsx(XC,{...t,ref:e}):null});Xy.displayName=gh;var XC=b.forwardRef((t,e)=>{const{__scopeScrollArea:r,...o}=t,i=En(gh,r),[c,l]=b.useState(0),[d,h]=b.useState(0),p=!!(c&&d);return _o(i.scrollbarX,()=>{const v=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(v),h(v)}),_o(i.scrollbarY,()=>{const v=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(v),l(v)}),p?m.jsx(hr.div,{...o,ref:e,style:{width:c,height:d,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function wl(t){return t?parseInt(t,10):0}function Qy(t,e){const r=t/e;return isNaN(r)?0:r}function Tl(t){const e=Qy(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=(t.scrollbar.size-r)*e;return Math.max(o,18)}function QC(t,e,r,o="ltr"){const i=Tl(r),c=i/2,l=e||c,d=i-l,h=r.scrollbar.paddingStart+l,p=r.scrollbar.size-r.scrollbar.paddingEnd-d,v=r.content-r.viewport,g=o==="ltr"?[0,v]:[v*-1,0];return Zy([h,p],g)(t)}function iv(t,e,r="ltr"){const o=Tl(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,c=e.scrollbar.size-i,l=e.content-e.viewport,d=c-o,h=r==="ltr"?[0,l]:[l*-1,0],p=zC(t,h);return Zy([0,l],[0,d])(p)}function Zy(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const o=(e[1]-e[0])/(t[1]-t[0]);return e[0]+o*(r-t[0])}}function ew(t,e){return t>0&&t<e}var ZC=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},o=0;return(function i(){const c={left:t.scrollLeft,top:t.scrollTop},l=r.left!==c.left,d=r.top!==c.top;(l||d)&&e(),r=c,o=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(o)};function Pl(t,e){const r=$r(t),o=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(o.current),[]),b.useCallback(()=>{window.clearTimeout(o.current),o.current=window.setTimeout(r,e)},[r,e])}function _o(t,e){const r=$r(e);So(()=>{let o=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(o),o=window.requestAnimationFrame(r)});return i.observe(t),()=>{window.cancelAnimationFrame(o),i.unobserve(t)}}},[t,r])}var ej=By,tj=Wy,nj=Xy;function Cl({className:t,children:e,...r}){return m.jsxs(ej,{"data-slot":"scroll-area",className:Fn("relative",t),...r,children:[m.jsx(tj,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),m.jsx(rj,{}),m.jsx(nj,{})]})}function rj({className:t,orientation:e="vertical",...r}){return m.jsx(qy,{"data-slot":"scroll-area-scrollbar",orientation:e,className:Fn("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...r,children:m.jsx(Jy,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const sj=({shouldPulse:t=!1})=>m.jsx("div",{className:"flex flex-col items-center py-1 px-0 relative",children:m.jsx("div",{className:`bg-muted-foreground h-[6px] rounded-full shrink-0 w-[40px] shadow-lg border border-muted-foreground/20 ${t?"animate-pulse":""}`})});function oj({open:t,onOpenChange:e}){const[r,o]=b.useState("signin"),[i,c]=b.useState(""),[l,d]=b.useState(""),[h,p]=b.useState(""),[v,g]=b.useState(""),[w,S]=b.useState(!1),[_,k]=b.useState(!1),[E,P]=b.useState(!1),[I,A]=b.useState(""),[W,V]=b.useState(""),[O,H]=b.useState(!1),[M,ee]=b.useState(""),[ie,Ee]=b.useState(!1),{signIn:he,signInWithGoogle:we,signUp:_e,resetPassword:xe,updatePassword:ue}=Eo(),{t:U,isRTL:C}=$n(),{theme:re}=zr(),[K,R]=b.useState(!1),[G,N]=b.useState(0),[$,X]=b.useState(85),[ae,le]=b.useState(85),[B,de]=b.useState(!0),be=b.useRef(null),Oe=[60,75,85],Ie=20,[He,Xe]=b.useState(!1);b.useEffect(()=>{if(t){le(85),X(85),de(!0);const se=setTimeout(()=>{de(!1)},3e3);return()=>clearTimeout(se)}else de(!1)},[t]),b.useEffect(()=>{const se=()=>{Xe(window.innerWidth>743)};return se(),window.addEventListener("resize",se),()=>window.removeEventListener("resize",se)},[]),b.useEffect(()=>{const se=new URLSearchParams(window.location.search),Me=new URLSearchParams(window.location.hash.substring(1)),Fe=se.get("reset")==="true",ht=Me.get("access_token")||se.get("access_token");Fe&&ht&&t&&(o("resetPassword"),d(""),p(""),window.history.replaceState({},document.title,window.location.pathname))},[t]),b.useEffect(()=>{if(!O||!M)return;const se=setInterval(async()=>{try{(await he(M,l)).error||(H(!1),e(!1),wt(),clearInterval(se))}catch{}},3e3),Me=setTimeout(()=>{clearInterval(se)},6e5);return()=>{clearInterval(se),clearTimeout(Me)}},[O,M,l,he,e]);const At=b.useCallback(se=>{console.log("Drag start at:",se),R(!0),N(se),X(ae),document.body.style.overflow="hidden",document.body.style.touchAction="none"},[ae]),Ut=b.useCallback(se=>{if(!K)return;const Me=se-G,Fe=window.innerHeight,ht=Me/Fe*100;console.log("Drag move - deltaY:",Me,"heightChange:",ht);const an=Math.max(10,Math.min(95,$-ht));console.log("New height:",an),be.current&&(be.current.style.height=`${an}vh`,be.current.style.transition="none")},[K,G,$]),It=b.useCallback(()=>{if(!K)return;console.log("Drag end");const se=be.current?parseFloat(be.current.style.height):ae;if(R(!1),document.body.style.overflow="",document.body.style.touchAction="",se<Ie){console.log("Closing sheet - height below threshold:",se),e(!1);return}const Me=Oe.reduce((Fe,ht)=>Math.abs(ht-se)<Math.abs(Fe-se)?ht:Fe);console.log("Snapping to:",Me),le(Me),be.current&&(be.current.style.transition="height 0.3s cubic-bezier(0.4, 0, 0.2, 1)",be.current.style.height=`${Me}vh`,setTimeout(()=>{be.current&&(be.current.style.transition="")},300))},[K,ae,e]),sn=b.useCallback(se=>{se.preventDefault(),se.stopPropagation(),console.log("Mouse down at:",se.clientY),At(se.clientY)},[At]),yt=b.useCallback(se=>{K&&(se.preventDefault(),se.stopPropagation(),Ut(se.clientY))},[Ut,K]),Kt=b.useCallback(se=>{K&&(se.preventDefault(),se.stopPropagation(),It())},[It,K]),on=b.useCallback(se=>{se.preventDefault(),se.stopPropagation(),console.log("Touch start at:",se.touches[0].clientY),At(se.touches[0].clientY)},[At]),Qe=b.useCallback(se=>{K&&se.touches.length>0&&(se.preventDefault(),se.stopPropagation(),Ut(se.touches[0].clientY))},[Ut,K]),kt=b.useCallback(se=>{K&&(se.preventDefault(),se.stopPropagation(),It())},[It,K]);b.useEffect(()=>{if(K){const se={passive:!1,capture:!0};return document.addEventListener("mousemove",yt,se),document.addEventListener("mouseup",Kt,se),document.addEventListener("touchmove",Qe,se),document.addEventListener("touchend",kt,se),document.addEventListener("touchcancel",kt,se),()=>{document.removeEventListener("mousemove",yt,{capture:!0}),document.removeEventListener("mouseup",Kt,{capture:!0}),document.removeEventListener("touchmove",Qe,{capture:!0}),document.removeEventListener("touchend",kt,{capture:!0}),document.removeEventListener("touchcancel",kt,{capture:!0})}}},[K,yt,Kt,Qe,kt]);const fn=se=>se.length<8?U.passwordMinLength:/[A-Z]/.test(se)?/[a-z]/.test(se)?/[0-9]/.test(se)?/[!@#$%^&*(),.?\\\":{}|<>]/.test(se)?null:"Password must contain at least one special character":"Password must contain at least one number":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter",Tn=async se=>{se.preventDefault(),P(!0),A(""),V("");try{let Me;if(r==="signin")Me=await he(i,l);else if(r==="signup"){if(!v.trim()){A(U.nameRequired),P(!1);return}const Fe=fn(l);if(Fe){A(Fe),P(!1);return}if(l!==h){A(U.passwordMismatch),P(!1);return}if(Me=await _e(i,l,v),!Me.error&&Me.needsVerification){H(!0),ee(i),P(!1);return}}else if(r==="reset"){const Fe=`${window.location.origin}?reset=true`;if(Me=await xe(i,Fe),!Me.error){V(U.resetLinkSent||"Password reset link sent to your email"),P(!1);return}}else if(r==="resetPassword"){const Fe=fn(l);if(Fe){A(Fe),P(!1);return}if(l!==h){A(U.passwordMismatch),P(!1);return}if(Me=await ue(l),!Me.error){V(U.passwordUpdated||"Password updated successfully!"),setTimeout(()=>{e(!1),o("signin"),wt()},2e3),P(!1);return}}Me?.error?Me.error.includes("email address has already been registered")||Me.error.includes("email_exists")?(A(U.emailAlreadyExists),setTimeout(()=>{r==="signup"&&(o("signin"),A(""),c(i),d(""),p(""))},3e3)):Me.error.includes("Invalid login credentials")?A(U.invalidCredentials):Me.error.includes("Email not confirmed")?A(U.emailNotConfirmed):Me.error.includes("Too many requests")?A(U.tooManyRequests):A(Me.error):r!=="reset"&&r!=="resetPassword"&&(e(!1),c(""),d(""),p(""),g(""))}catch{A(U.unexpectedError)}finally{P(!1)}},wt=()=>{c(""),d(""),p(""),g(""),A(""),V(""),H(!1),ee(""),Ee(!1)},at=se=>{o(se),wt()};return t?m.jsxs(m.Fragment,{children:[m.jsx(Wt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:()=>e(!1)}),m.jsxs(Wt.div,{ref:be,initial:{y:"100%",height:"85vh"},animate:{y:0,height:`${ae}vh`},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:`fixed bottom-0 z-50 bg-background/95 border-t border-border backdrop-blur-xl rounded-t-xl overflow-hidden flex flex-col ${K?"shadow-2xl":""}`,style:{height:`${ae}vh`,maxHeight:"95vh",minHeight:"20vh",left:He?"50%":0,right:He?"auto":0,width:He?"743px":"100vw",transform:He?`translateX(-50%) ${K?"scale(1.02)":"scale(1)"}`:K?"scale(1.02)":"scale(1)",transition:K?"none":"transform 0.3s ease"},"data-sheet-content":!0,children:[m.jsxs("div",{className:`flex-shrink-0 py-5 px-6 select-none transition-all duration-200 min-h-[56px] flex flex-col items-center justify-center border-b border-border/50 ${K?"cursor-grabbing bg-accent/40":"cursor-grab hover:bg-accent/20 active:bg-accent/30"}`,onMouseDown:sn,onTouchStart:on,style:{touchAction:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[m.jsx("div",{className:`transition-all duration-200 ${K?"opacity-70 scale-110":"opacity-100 hover:scale-105"}`,children:m.jsx(sj,{shouldPulse:B&&!K})}),m.jsx("div",{className:"text-muted-foreground/50 text-xs mt-2",dir:C?"rtl":"ltr",children:K?U.dragging:U.dragToResize})]}),m.jsx("div",{className:"flex-shrink-0 px-6 py-4 border-b border-border/50",children:m.jsxs("div",{className:C?"text-right":"text-left",dir:C?"rtl":"ltr",children:[m.jsxs("h2",{className:"text-foreground",children:[r==="signin"&&U.signInToAccount,r==="signup"&&U.createNewAccount,r==="reset"&&U.resetPassword,r==="resetPassword"&&(C?"   ":"Set New Password")]}),m.jsxs("p",{className:"text-muted-foreground text-sm mt-1",children:[r==="signin"&&U.accessToFavorites,r==="signup"&&U.createNewUserAccount,r==="reset"&&U.enterYourEmail,r==="resetPassword"&&(C?"       ":"Please enter your new password")]})]})}),m.jsx("div",{className:"flex-1 overflow-hidden relative",style:{touchAction:K?"none":"auto",pointerEvents:K?"none":"auto"},children:m.jsx(Cl,{className:"h-full",children:m.jsx("div",{className:"p-6",dir:C?"rtl":"ltr",children:O?m.jsxs("div",{className:"space-y-6 text-center",children:[m.jsx("div",{className:"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center",children:m.jsx(_u,{className:"text-primary",size:32})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("h3",{className:"text-foreground",children:C?"    ":"Check Your Email"}),m.jsx("p",{className:"text-muted-foreground text-sm",children:C?`    ${M}  .`:`A verification email has been sent to ${M}.`}),m.jsx("p",{className:"text-muted-foreground text-sm",children:C?"             .":"Please click the link in the email to verify your account."})]}),m.jsxs("div",{className:"flex items-center justify-center space-x-2 py-4",children:[m.jsx("div",{className:"w-3 h-3 bg-primary rounded-full animate-bounce",style:{animationDelay:"0ms"}}),m.jsx("div",{className:"w-3 h-3 bg-primary rounded-full animate-bounce",style:{animationDelay:"150ms"}}),m.jsx("div",{className:"w-3 h-3 bg-primary rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),m.jsx("p",{className:"text-muted-foreground text-xs",children:C?"    ...":"Waiting for email verification..."}),m.jsxs("div",{className:"pt-4 space-y-3",children:[m.jsx("p",{className:"text-muted-foreground text-sm",children:C?"   ":"Didn't receive the email?"}),m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsx(Ht,{type:"button",variant:"outline",onClick:()=>{H(!1),o("signup")},className:"w-full",children:C?" ":"Try Again"}),m.jsx(Ht,{type:"button",variant:"ghost",onClick:()=>{H(!1),o("signin"),wt()},className:"w-full",children:C?"  ":"Back to Sign In"})]})]})]}):m.jsxs("div",{className:"space-y-6",children:[(r==="signin"||r==="signup")&&m.jsxs("div",{className:"space-y-6",children:[m.jsxs(Ht,{type:"button",variant:"outline",disabled:E,onClick:async()=>{P(!0),A("");const se=await we();se.error&&(A(se.error),P(!1))},className:`w-full flex items-center justify-center gap-3 h-12 ${re==="dark"?"bg-[#1f1f1f] hover:bg-[#2a2a2a] text-white border-border":"bg-white hover:bg-gray-50 text-gray-900 border-gray-300"}`,children:[m.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[m.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),m.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),m.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),m.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),m.jsx("span",{className:re==="dark"?"text-white":"text-gray-900",children:U.continueWithGoogle})]}),I&&!ie&&m.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3",children:m.jsx("p",{className:`text-red-400 text-sm ${C?"text-right":"text-left"}`,children:I})}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("div",{className:"w-full border-t border-border"})}),m.jsx("div",{className:"relative flex justify-center text-xs",children:m.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:U.orContinueWith})})]}),m.jsx("button",{type:"button",onClick:()=>Ee(!ie),className:"w-full text-muted-foreground hover:text-foreground text-sm transition-colors text-center py-2",children:ie?C?"":"Back":U.useEmailInstead}),m.jsx(fd,{children:ie&&m.jsx(Wt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},style:{overflow:"hidden"},children:m.jsxs("form",{onSubmit:Tn,className:"space-y-6 pt-2",children:[r==="signup"&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(us,{htmlFor:"name",className:`text-foreground ${C?"text-right":"text-left"}`,children:U.name}),m.jsxs("div",{className:"relative",children:[m.jsx(Mv,{className:`absolute ${C?"right-3":"left-3"} top-1/2 transform -translate-y-1/2 text-muted-foreground`,size:16}),m.jsx(cs,{id:"name",type:"text",value:v,onChange:se=>g(se.target.value),className:`bg-input border-border text-foreground ${C?"pl-3 pr-10 text-right":"pr-3 pl-10 text-left"}`,placeholder:U.enterName,required:!0})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(us,{htmlFor:"email",className:`text-foreground ${C?"text-right":"text-left"}`,children:U.email}),m.jsxs("div",{className:"relative",children:[m.jsx(_u,{className:`absolute ${C?"right-3":"left-3"} top-1/2 transform -translate-y-1/2 text-muted-foreground`,size:16}),m.jsx(cs,{id:"email",type:"email",value:i,onChange:se=>c(se.target.value),className:`bg-input border-border text-foreground ${C?"pl-3 pr-10 text-right":"pr-3 pl-10 text-left"}`,placeholder:U.enterEmail,required:!0})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(us,{htmlFor:"password",className:`text-foreground ${C?"text-right":"text-left"}`,children:U.password}),m.jsxs("div",{className:"relative",children:[m.jsx(Ja,{className:`absolute ${C?"right-3":"left-3"} top-1/2 transform -translate-y-1/2 text-muted-foreground`,size:16}),m.jsx(cs,{id:"password",type:w?"text":"password",value:l,onChange:se=>d(se.target.value),className:`bg-input border-border text-foreground ${C?"pl-10 pr-10 text-right":"pr-10 pl-10 text-left"}`,placeholder:U.enterPassword,required:!0}),m.jsx("button",{type:"button",onClick:()=>S(!w),className:`absolute ${C?"left-3":"right-3"} top-1/2 transform -translate-y-1/2 text-muted-foreground`,children:w?m.jsx(Ga,{size:16}):m.jsx(Ya,{size:16})})]}),r==="signup"&&m.jsxs("div",{className:`text-xs text-muted-foreground space-y-1 ${C?"text-right":"text-left"}`,children:[m.jsx("p",{children:U.passwordRequirements}),m.jsxs("ul",{className:`space-y-0.5 ${C?"mr-4":"ml-4"}`,children:[m.jsx("li",{className:l.length>=8?"text-green-400":"text-white/60",children:U.minCharacters}),m.jsx("li",{className:/[A-Z]/.test(l)?"text-green-400":"text-white/60",children:U.upperCase}),m.jsx("li",{className:/[a-z]/.test(l)?"text-green-400":"text-white/60",children:U.lowerCase}),m.jsx("li",{className:/[0-9]/.test(l)?"text-green-400":"text-white/60",children:U.oneNumber}),m.jsx("li",{className:/[!@#$%^&*(),.?\\\":{}|<>]/.test(l)?"text-green-400":"text-white/60",children:U.specialCharacter})]})]})]}),r==="signup"&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(us,{htmlFor:"confirmPassword",className:`text-foreground ${C?"text-right":"text-left"}`,children:U.confirmPassword}),m.jsxs("div",{className:"relative",children:[m.jsx(Ja,{className:`absolute ${C?"right-3":"left-3"} top-1/2 transform -translate-y-1/2 text-muted-foreground`,size:16}),m.jsx(cs,{id:"confirmPassword",type:_?"text":"password",value:h,onChange:se=>p(se.target.value),className:`bg-input border-border text-foreground ${C?"pl-10 pr-10 text-right":"pr-10 pl-10 text-left"}`,placeholder:U.enterPasswordAgain,required:!0}),m.jsx("button",{type:"button",onClick:()=>k(!_),className:`absolute ${C?"left-3":"right-3"} top-1/2 transform -translate-y-1/2 text-muted-foreground`,children:_?m.jsx(Ga,{size:16}):m.jsx(Ya,{size:16})})]}),h&&m.jsx("div",{className:`text-xs ${C?"text-right":"text-left"}`,children:l===h?m.jsx("p",{className:"text-green-400",children:U.passwordsMatch}):m.jsx("p",{className:"text-red-400",children:U.passwordsDontMatch})})]}),I&&m.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3",children:[m.jsx("p",{className:`text-red-400 text-sm ${C?"text-right":"text-left"}`,children:I}),I.includes(C?"     ":"already registered")&&m.jsx("button",{type:"button",onClick:()=>{o("signin"),A(""),d(""),p("")},className:"mt-2 text-blue-400 hover:text-blue-300 text-sm underline transition-colors",children:U.signInNow})]}),W&&m.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-3",children:m.jsx("p",{className:`text-green-400 text-sm ${C?"text-right":"text-left"}`,children:W})}),m.jsx(Ht,{type:"submit",disabled:E,className:"w-full bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:E?U.processing:r==="signin"?U.signIn:r==="signup"?U.createAccount:U.sendResetLink}),m.jsxs("div",{className:"flex flex-col space-y-2 text-center",children:[r==="signin"&&m.jsxs(m.Fragment,{children:[m.jsxs("button",{type:"button",onClick:()=>at("signup"),className:"text-muted-foreground hover:text-foreground text-sm transition-colors text-right",children:[U.dontHaveAccount," ",U.createAccountLink]}),m.jsx("button",{type:"button",onClick:()=>at("reset"),className:"text-muted-foreground hover:text-foreground text-sm transition-colors text-right",children:U.forgotPassword})]}),r==="signup"&&m.jsxs("button",{type:"button",onClick:()=>at("signin"),className:"text-muted-foreground hover:text-foreground text-sm transition-colors",children:[U.haveAccount," ",U.signInLink]})]})]})})}),!ie&&m.jsxs("div",{className:"flex flex-col space-y-2 text-center",children:[r==="signin"&&m.jsxs("button",{type:"button",onClick:()=>at("signup"),className:"text-muted-foreground hover:text-foreground text-sm transition-colors text-right",children:[U.dontHaveAccount," ",U.createAccountLink]}),r==="signup"&&m.jsxs("button",{type:"button",onClick:()=>at("signin"),className:"text-muted-foreground hover:text-foreground text-sm transition-colors text-right",children:[U.haveAccount," ",U.signInLink]})]})]}),(r==="reset"||r==="resetPassword")&&m.jsxs("form",{onSubmit:Tn,className:"space-y-6",children:[r==="reset"&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(us,{htmlFor:"email",className:`text-foreground ${C?"text-right":"text-left"}`,children:U.email}),m.jsxs("div",{className:"relative",children:[m.jsx(_u,{className:`absolute ${C?"right-3":"left-3"} top-1/2 transform -translate-y-1/2 text-muted-foreground`,size:16}),m.jsx(cs,{id:"email",type:"email",value:i,onChange:se=>c(se.target.value),className:`bg-input border-border text-foreground ${C?"pl-3 pr-10 text-right":"pr-3 pl-10 text-left"}`,placeholder:U.enterEmail,required:!0})]})]}),r==="resetPassword"&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(us,{htmlFor:"password",className:`text-foreground ${C?"text-right":"text-left"}`,children:C?"  ":"New Password"}),m.jsxs("div",{className:"relative",children:[m.jsx(Ja,{className:`absolute ${C?"right-3":"left-3"} top-1/2 transform -translate-y-1/2 text-muted-foreground`,size:16}),m.jsx(cs,{id:"password",type:w?"text":"password",value:l,onChange:se=>d(se.target.value),className:`bg-input border-border text-foreground ${C?"pl-10 pr-10 text-right":"pr-10 pl-10 text-left"}`,placeholder:U.enterPassword,required:!0}),m.jsx("button",{type:"button",onClick:()=>S(!w),className:`absolute ${C?"left-3":"right-3"} top-1/2 transform -translate-y-1/2 text-muted-foreground`,children:w?m.jsx(Ga,{size:16}):m.jsx(Ya,{size:16})})]}),m.jsxs("div",{className:`text-xs text-muted-foreground space-y-1 ${C?"text-right":"text-left"}`,children:[m.jsx("p",{children:U.passwordRequirements}),m.jsxs("ul",{className:`space-y-0.5 ${C?"mr-4":"ml-4"}`,children:[m.jsx("li",{className:l.length>=8?"text-green-400":"text-white/60",children:U.minCharacters}),m.jsx("li",{className:/[A-Z]/.test(l)?"text-green-400":"text-white/60",children:U.upperCase}),m.jsx("li",{className:/[a-z]/.test(l)?"text-green-400":"text-white/60",children:U.lowerCase}),m.jsx("li",{className:/[0-9]/.test(l)?"text-green-400":"text-white/60",children:U.oneNumber}),m.jsx("li",{className:/[!@#$%^&*(),.?\\\":{}|<>]/.test(l)?"text-green-400":"text-white/60",children:U.specialCharacter})]})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(us,{htmlFor:"confirmPassword",className:`text-foreground ${C?"text-right":"text-left"}`,children:U.confirmPassword}),m.jsxs("div",{className:"relative",children:[m.jsx(Ja,{className:`absolute ${C?"right-3":"left-3"} top-1/2 transform -translate-y-1/2 text-muted-foreground`,size:16}),m.jsx(cs,{id:"confirmPassword",type:_?"text":"password",value:h,onChange:se=>p(se.target.value),className:`bg-input border-border text-foreground ${C?"pl-10 pr-10 text-right":"pr-10 pl-10 text-left"}`,placeholder:U.enterPasswordAgain,required:!0}),m.jsx("button",{type:"button",onClick:()=>k(!_),className:`absolute ${C?"left-3":"right-3"} top-1/2 transform -translate-y-1/2 text-muted-foreground`,children:_?m.jsx(Ga,{size:16}):m.jsx(Ya,{size:16})})]}),h&&m.jsx("div",{className:`text-xs ${C?"text-right":"text-left"}`,children:l===h?m.jsx("p",{className:"text-green-400",children:U.passwordsMatch}):m.jsx("p",{className:"text-red-400",children:U.passwordsDontMatch})})]})]}),I&&m.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3",children:m.jsx("p",{className:`text-red-400 text-sm ${C?"text-right":"text-left"}`,children:I})}),W&&m.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-3",children:m.jsx("p",{className:`text-green-400 text-sm ${C?"text-right":"text-left"}`,children:W})}),m.jsx(Ht,{type:"submit",disabled:E,className:"w-full bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:E?U.processing:r==="reset"?U.sendResetLink:C?"  ":"Update Password"}),m.jsx("div",{className:"flex flex-col space-y-2 text-center",children:m.jsx("button",{type:"button",onClick:()=>at("signin"),className:"text-muted-foreground hover:text-foreground text-sm transition-colors",children:U.backToSignIn})})]})]})})})})]})]}):null}const ij=({shouldPulse:t=!1})=>m.jsx("div",{className:"flex flex-col items-center py-1 px-0 relative",children:m.jsx("div",{className:`bg-muted-foreground h-[6px] rounded-full shrink-0 w-[40px] shadow-lg border border-muted-foreground/20 ${t?"animate-pulse":""}`})});function aj({open:t,onOpenChange:e,onShowFavorites:r}){const{user:o,signOut:i,refreshSession:c}=Eo(),{theme:l,toggleTheme:d}=zr(),{profileImage:h,setProfileImage:p}=Ov(),{t:v,isRTL:g}=$n(),[w,S]=b.useState(!1),[_,k]=b.useState(!1),[E,P]=b.useState(0),[I,A]=b.useState(90),[W,V]=b.useState(90),[O,H]=b.useState(!0),M=b.useRef(null),ee=[40,70,90],ie=20;b.useEffect(()=>{if(t&&o){Ee(),V(90),A(90),H(!0);const $=setTimeout(()=>{H(!1)},3e3);return()=>clearTimeout($)}else H(!1)},[t,o]);const Ee=async()=>{if(o)try{const{projectId:$}=await it(async()=>{const{projectId:le}=await Promise.resolve().then(()=>Xn);return{projectId:le}},void 0),{data:{session:X}}=await(await it(async()=>{const{createClient:le}=await Promise.resolve().then(()=>_s);return{createClient:le}},void 0)).createClient().auth.getSession();if(!X?.access_token){if(console.log("No access token in profile load, attempting refresh"),(await c()).error){console.error("Session refresh failed in profile load");return}setTimeout(()=>Ee(),1e3);return}const ae=await fetch(`https://${$}.supabase.co/functions/v1/make-server-c192d0ee/profile`,{headers:{Authorization:`Bearer ${X.access_token}`}});if(ae.ok){const le=await ae.json();le.profile?.profileImage&&p(le.profile.profileImage)}}catch($){console.error("Failed to load profile:",$)}},he=b.useCallback($=>{console.log("Drag start at:",$),k(!0),P($),A(W),document.body.style.overflow="hidden",document.body.style.touchAction="none"},[W]),we=b.useCallback($=>{if(!_)return;const X=$-E,ae=window.innerHeight,le=X/ae*100;console.log("Drag move - deltaY:",X,"heightChange:",le);const B=Math.max(10,Math.min(95,I-le));console.log("New height:",B),M.current&&(M.current.style.height=`${B}vh`,M.current.style.transition="none")},[_,E,I]),_e=b.useCallback(()=>{if(!_)return;console.log("Drag end");const $=M.current?parseFloat(M.current.style.height):W;if(k(!1),document.body.style.overflow="",document.body.style.touchAction="",$<ie){console.log("Closing sheet - height below threshold:",$),e(!1);return}const X=ee.reduce((ae,le)=>Math.abs(le-$)<Math.abs(ae-$)?le:ae);console.log("Snapping to:",X),V(X),M.current&&(M.current.style.transition="height 0.3s cubic-bezier(0.4, 0, 0.2, 1)",M.current.style.height=`${X}vh`,setTimeout(()=>{M.current&&(M.current.style.transition="")},300))},[_,W,e]),xe=b.useCallback($=>{$.preventDefault(),$.stopPropagation(),console.log("Mouse down at:",$.clientY),he($.clientY)},[he]),ue=b.useCallback($=>{_&&($.preventDefault(),$.stopPropagation(),we($.clientY))},[we,_]),U=b.useCallback($=>{_&&($.preventDefault(),$.stopPropagation(),_e())},[_e,_]),C=b.useCallback($=>{$.preventDefault(),$.stopPropagation(),console.log("Touch start at:",$.touches[0].clientY),he($.touches[0].clientY)},[he]),re=b.useCallback($=>{_&&$.touches.length>0&&($.preventDefault(),$.stopPropagation(),we($.touches[0].clientY))},[we,_]),K=b.useCallback($=>{_&&($.preventDefault(),$.stopPropagation(),_e())},[_e,_]);b.useEffect(()=>{if(_){const $={passive:!1,capture:!0};return document.addEventListener("mousemove",ue,$),document.addEventListener("mouseup",U,$),document.addEventListener("touchmove",re,$),document.addEventListener("touchend",K,$),document.addEventListener("touchcancel",K,$),()=>{document.removeEventListener("mousemove",ue,{capture:!0}),document.removeEventListener("mouseup",U,{capture:!0}),document.removeEventListener("touchmove",re,{capture:!0}),document.removeEventListener("touchend",K,{capture:!0}),document.removeEventListener("touchcancel",K,{capture:!0})}}},[_,ue,U,re,K]);const R=async()=>{await i(),e(!1)},G=async $=>{const X=$.target.files?.[0];if(!(!X||!o)){if(X.size>5*1024*1024){ot.error(v.fileSizeError);return}if(!X.type.startsWith("image/")){ot.error(v.fileTypeError);return}S(!0);try{const ae=new FileReader;ae.onload=async le=>{const B=le.target?.result;try{const{projectId:de}=await it(async()=>{const{projectId:Ie}=await Promise.resolve().then(()=>Xn);return{projectId:Ie}},void 0),{data:{session:be}}=await(await it(async()=>{const{createClient:Ie}=await Promise.resolve().then(()=>_s);return{createClient:Ie}},void 0)).createClient().auth.getSession();if(!be?.access_token){if(console.log("No access token in image upload, attempting refresh"),(await c()).error){ot.error(v.pleaseLoginAgain);return}setTimeout(()=>G($),1e3);return}const Oe=await fetch(`https://${de}.supabase.co/functions/v1/make-server-c192d0ee/profile`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${be.access_token}`},body:JSON.stringify({name:o.user_metadata?.name||"",profileImage:B})});if(Oe.ok)p(B),ot.success(v.profileImageUpdated);else{const Ie=await Oe.json();throw new Error(Ie.error||"Failed to update profile")}}catch(de){console.error("Failed to update profile image:",de),ot.error(v.profileImageError)}finally{S(!1)}},ae.readAsDataURL(X)}catch(ae){console.error("Failed to process image:",ae),ot.error(v.imageProcessingError),S(!1)}}},N=()=>o?.user_metadata?.name?o.user_metadata.name.charAt(0).toUpperCase():o?.email?o.email.charAt(0).toUpperCase():"U";return t?m.jsxs(m.Fragment,{children:[m.jsx(Wt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:()=>e(!1)}),m.jsxs(Wt.div,{ref:M,initial:{y:"100%",height:"90vh"},animate:{y:0,height:`${W}vh`},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:`fixed bottom-0 left-0 right-0 z-50 bg-background/95 border-t border-border backdrop-blur-xl rounded-t-xl overflow-hidden flex flex-col ${_?"shadow-2xl":""}`,style:{height:`${W}vh`,maxHeight:"95vh",minHeight:"20vh",transform:_?"scale(1.02)":"scale(1)",transition:_?"none":"transform 0.3s ease"},children:[m.jsxs("div",{className:`flex-shrink-0 py-5 px-6 select-none transition-all duration-200 min-h-[56px] flex flex-col items-center justify-center border-b border-border/50 ${_?"cursor-grabbing bg-accent/40":"cursor-grab hover:bg-accent/20 active:bg-accent/30"}`,onMouseDown:xe,onTouchStart:C,style:{touchAction:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[m.jsx("div",{className:`transition-all duration-200 ${_?"opacity-70 scale-110":"opacity-100 hover:scale-105"}`,children:m.jsx(ij,{shouldPulse:O&&!_})}),m.jsx("div",{className:"text-muted-foreground/50 text-xs mt-2",dir:g?"rtl":"ltr",children:_?v.dragging:v.dragToResize})]}),m.jsx("div",{className:"flex-shrink-0 px-6 py-4 border-b border-border/50",children:m.jsxs("div",{className:g?"text-right":"text-left",dir:g?"rtl":"ltr",children:[m.jsx("h2",{className:"text-foreground text-xl font-medium",children:v.userProfile}),m.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:v.manageAccountSettings})]})}),m.jsx("div",{className:"flex-1 overflow-hidden relative",style:{touchAction:_?"none":"auto",pointerEvents:_?"none":"auto"},children:m.jsx(Cl,{className:"h-full",children:m.jsxs("div",{className:"space-y-6 p-6",dir:g?"rtl":"ltr",children:[m.jsxs("div",{className:`flex items-center ${g?"space-x-4 space-x-reverse":"space-x-4"}`,children:[m.jsxs("div",{className:"relative",children:[m.jsxs($y,{className:"h-16 w-16 border-2 border-border",children:[m.jsx(Fy,{src:h}),m.jsx(Vy,{className:"bg-muted text-foreground text-xl",children:N()})]}),m.jsxs("label",{htmlFor:"profile-image",className:`absolute -bottom-1 -right-1 bg-muted hover:bg-accent rounded-full p-1.5 cursor-pointer transition-colors ${w?"opacity-50 cursor-not-allowed":""}`,children:[w?m.jsx("div",{className:"w-3 h-3 border border-foreground border-t-transparent rounded-full animate-spin"}):m.jsx($S,{size:12,className:"text-foreground"}),m.jsx("input",{id:"profile-image",type:"file",accept:"image/*",onChange:G,className:"hidden",disabled:w})]})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"text-foreground font-medium",children:o?.user_metadata?.name||(g?"":"User")}),m.jsx("p",{className:"text-muted-foreground text-sm",children:o?.email})]})]}),m.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-border",children:[m.jsxs("div",{className:`flex items-center ${g?"space-x-3 space-x-reverse":"space-x-3"}`,children:[l==="dark"?m.jsx(ZS,{size:20,className:"text-muted-foreground"}):m.jsx(t_,{size:20,className:"text-muted-foreground"}),m.jsx("span",{className:"text-foreground",children:v.darkMode})]}),m.jsx("div",{className:"w-16 h-8 cursor-pointer",onClick:d,children:m.jsx("div",{className:`relative w-full h-full rounded-full transition-all duration-300 ${l==="dark"?"bg-[#34c759]":"bg-gray-300"}`,children:m.jsx("div",{className:`absolute top-[4px] w-7 h-6 bg-white rounded-full transition-all duration-300 ${l==="dark"?"right-[2px]":"right-[30px]"}`})})})]}),m.jsxs(Ht,{onClick:r,variant:"ghost",className:`w-full ${g?"justify-start text-right":"justify-start text-left"} bg-muted/50 hover:bg-muted text-foreground border border-border`,children:[m.jsx(Nd,{size:20,className:g?"ml-3":"mr-3"}),v.favoritePoems]}),m.jsxs(Ht,{onClick:R,variant:"ghost",className:`w-full ${g?"justify-start text-right":"justify-start text-left"} bg-destructive/10 hover:bg-destructive/20 text-destructive border border-destructive/20`,children:[m.jsx(JS,{size:20,className:g?"ml-3":"mr-3"}),v.signOutFromAccount]})]})})})]})]}):null}function lj({className:t,...e}){return m.jsx("div",{"data-slot":"card",className:Fn("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...e})}function cj({className:t,...e}){return m.jsx("div",{"data-slot":"card-header",className:Fn("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...e})}function uj({className:t,...e}){return m.jsx("div",{"data-slot":"card-content",className:Fn("px-6 [&:last-child]:pb-6",t),...e})}const Dn=t=>{const e=["","","","","","","","","",""];return t.toString().split("").map(r=>e[parseInt(r)]).join("")},dj=({shouldPulse:t=!1})=>m.jsx("div",{className:"flex flex-col items-center py-1 px-0 relative",children:m.jsx("div",{className:`bg-muted-foreground h-[6px] rounded-full shrink-0 w-[40px] shadow-lg border border-muted-foreground/20 ${t?"animate-pulse":""}`})}),hj=[40,70,90],fj=20;function pj({open:t,onOpenChange:e}){const[r,o]=b.useState([]),[i,c]=b.useState(!1),[l,d]=b.useState(0),[h,p]=b.useState(null),[v,g]=b.useState("sheet"),{user:w,refreshSession:S}=Eo(),{t:_,isRTL:k}=$n();b.useRef(null);const E=b.useRef(null),[P,I]=b.useState(!1),[A,W]=b.useState(0),[V,O]=b.useState(90),[H,M]=b.useState(90),[ee,ie]=b.useState(!0),[Ee,he]=b.useState(null);b.useEffect(()=>{if(t&&w){we(),M(90),O(90),ie(!0);const B=setTimeout(()=>{ie(!1)},3e3);return()=>clearTimeout(B)}else ie(!1)},[t,w]);const we=async()=>{if(!w){console.log("No user found, cannot load favorites");return}c(!0);try{console.log("=== DEBUG: Loading favorites ==="),console.log("User object:",{id:w.id,email:w.email,metadata:w.user_metadata});const{projectId:B}=await it(async()=>{const{projectId:Xe}=await Promise.resolve().then(()=>Xn);return{projectId:Xe}},void 0);console.log("Project ID:",B);const de=(await it(async()=>{const{createClient:Xe}=await Promise.resolve().then(()=>_s);return{createClient:Xe}},void 0)).createClient(),{data:{session:be},error:Oe}=await de.auth.getSession();if(console.log("Session data:",{hasSession:!!be,hasAccessToken:!!be?.access_token,tokenPreview:be?.access_token?be.access_token.substring(0,20)+"...":"none",error:Oe}),Oe){if(console.error("Session error:",Oe),Oe.message.includes("refresh_token_not_found")||Oe.message.includes("Invalid Refresh Token")){if(console.log("Invalid refresh token detected, attempting session refresh"),(await S()).error){ot.error("Session expired. Please sign in again."),e(!1);return}ot.success("Session refreshed successfully"),setTimeout(()=>we(),1e3);return}ot.error(_.pleaseLoginAgain);return}if(!be?.access_token){if(console.error("No access token found in session"),console.log("No access token, attempting session refresh"),(await S()).error){ot.error("Session expired. Please sign in again."),e(!1);return}setTimeout(()=>we(),1e3);return}const Ie=`https://${B}.supabase.co/functions/v1/make-server-c192d0ee/favorites`;console.log("Making request to:",Ie);const He=await fetch(Ie,{headers:{Authorization:`Bearer ${be.access_token}`,"Content-Type":"application/json"}});if(console.log("Response status:",He.status),console.log("Response headers:",Object.fromEntries(He.headers.entries())),He.ok){const Xe=await He.json();console.log("Favorites loaded successfully:",Xe.favorites?.length||0,"items"),o(Xe.favorites||[])}else{const Xe=await He.text();console.error("Failed to load favorites - Response:",He.status,Xe),He.status===401?(console.error("Authorization failed - attempting session refresh"),(await S()).error?(ot.error("Session expired. Please sign in again."),e(!1)):setTimeout(()=>we(),1e3)):ot.error(`Error loading favorites: ${He.status}`)}}catch(B){console.error("Failed to load favorites - Network/Other error:",B),ot.error(`Network error loading favorites: ${B.message}`)}finally{c(!1)}},_e=async B=>{if(w)try{const{projectId:de}=await it(async()=>{const{projectId:Ie}=await Promise.resolve().then(()=>Xn);return{projectId:Ie}},void 0),{data:{session:be}}=await(await it(async()=>{const{createClient:Ie}=await Promise.resolve().then(()=>_s);return{createClient:Ie}},void 0)).createClient().auth.getSession();if(!be?.access_token){ot.error(_.pleaseLoginAgain);return}const Oe=await fetch(`https://${de}.supabase.co/functions/v1/make-server-c192d0ee/favorites/${B}`,{method:"DELETE",headers:{Authorization:`Bearer ${be.access_token}`}});if(Oe.ok)o(Ie=>Ie.filter(He=>He.id!==B)),ot.success(_.removedFromFavorites),l>=r.length-1&&d(Math.max(0,r.length-2));else{const Ie=await Oe.json();throw new Error(Ie.error||"Failed to remove favorite")}}catch(de){console.error("Failed to remove favorite:",de),ot.error(_.removedFromFavorites.replace("Removed","Error removing"))}finally{p(null)}},xe=b.useCallback(B=>{B>=0&&B<r.length&&d(B)},[r.length]),ue=b.useCallback(B=>{if(v!=="sheet"||P)return;const de=B.touches[0];he({y:de.clientY,time:Date.now()})},[v,P]),U=b.useCallback(B=>{if(!Ee||v!=="sheet"||P)return;const de=B.changedTouches[0],be=Ee.y-de.clientY,Oe=Date.now()-Ee.time,Ie=Math.abs(be)/Oe;if(Math.abs(be)>30||Ie>.3)if(be>0){const At=Math.min(l+1,r.length-1);xe(At)}else{const At=Math.max(l-1,0);xe(At)}he(null)},[Ee,l,r.length,xe,v,P]),C=b.useCallback(B=>{console.log("Drag start at:",B),I(!0),W(B),O(H),document.body.style.overflow="hidden",document.body.style.touchAction="none"},[H]),re=b.useCallback(B=>{if(!P)return;const de=B-A,be=window.innerHeight,Oe=de/be*100;console.log("Drag move - deltaY:",de,"heightChange:",Oe);const Ie=Math.max(10,Math.min(95,V-Oe));console.log("New height:",Ie),E.current&&(E.current.style.height=`${Ie}vh`,E.current.style.transition="none")},[P,A,V]),K=b.useCallback(()=>{if(!P)return;console.log("Drag end");const B=E.current?parseFloat(E.current.style.height):H;if(I(!1),document.body.style.overflow="",document.body.style.touchAction="",B<fj){console.log("Closing sheet - height below threshold:",B),e(!1);return}const de=hj.reduce((be,Oe)=>Math.abs(Oe-B)<Math.abs(be-B)?Oe:be);console.log("Snapping to:",de),M(de),E.current&&(E.current.style.transition="height 0.3s cubic-bezier(0.4, 0, 0.2, 1)",E.current.style.height=`${de}vh`,setTimeout(()=>{E.current&&(E.current.style.transition="")},300))},[P,H,e]),R=b.useCallback(B=>{B.preventDefault(),B.stopPropagation(),console.log("Mouse down at:",B.clientY),C(B.clientY)},[C]),G=b.useCallback(B=>{P&&(B.preventDefault(),B.stopPropagation(),re(B.clientY))},[re,P]),N=b.useCallback(B=>{P&&(B.preventDefault(),B.stopPropagation(),K())},[K,P]),$=b.useCallback(B=>{B.preventDefault(),B.stopPropagation(),console.log("Touch start at:",B.touches[0].clientY),C(B.touches[0].clientY)},[C]),X=b.useCallback(B=>{P&&B.touches.length>0&&(B.preventDefault(),B.stopPropagation(),re(B.touches[0].clientY))},[re,P]),ae=b.useCallback(B=>{P&&(B.preventDefault(),B.stopPropagation(),K())},[K,P]);b.useEffect(()=>{if(P){const B={passive:!1,capture:!0};return document.addEventListener("mousemove",G,B),document.addEventListener("mouseup",N,B),document.addEventListener("touchmove",X,B),document.addEventListener("touchend",ae,B),document.addEventListener("touchcancel",ae,B),()=>{document.removeEventListener("mousemove",G,{capture:!0}),document.removeEventListener("mouseup",N,{capture:!0}),document.removeEventListener("touchmove",X,{capture:!0}),document.removeEventListener("touchend",ae,{capture:!0}),document.removeEventListener("touchcancel",ae,{capture:!0})}}},[P,G,N,X,ae]);const le=({poem:B,onDelete:de})=>m.jsxs(lj,{className:"bg-card border-border hover:bg-accent/50 transition-colors",children:[m.jsx(cj,{className:"pb-3",children:m.jsxs("div",{className:"flex items-start justify-between",dir:k?"rtl":"ltr",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h4",{className:`text-foreground font-medium mb-1 ${k?"text-right":"text-left"}`,children:B.poet.name}),m.jsx("p",{className:`text-muted-foreground text-sm ${k?"text-right":"text-left"}`,children:B.title})]}),m.jsx(Ht,{onClick:de,variant:"ghost",size:"sm",className:"text-red-400 hover:text-red-300 hover:bg-red-500/10 ml-2",children:m.jsx(Im,{size:16})})]})}),m.jsxs(uj,{className:"pt-0",children:[m.jsx("div",{className:"text-muted-foreground text-sm line-clamp-3 leading-relaxed text-right",dir:"rtl",dangerouslySetInnerHTML:{__html:B.htmlText||B.text.replace(/\n/g,"<br/>")}}),m.jsx("div",{className:"mt-3 pt-3 border-t border-border text-right",children:m.jsxs("span",{className:"text-muted-foreground text-xs text-right",dir:"rtl",children:["  "," ",new Date(B.favoritedAt).toLocaleDateString("fa-IR")]})})]})]});return t?m.jsxs(m.Fragment,{children:[m.jsx(Wt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:()=>e(!1)}),m.jsxs(Wt.div,{ref:E,initial:{y:"100%",height:"90vh"},animate:{y:0,height:`${H}vh`},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:`fixed bottom-0 left-0 right-0 z-50 bg-background/95 border-t border-border backdrop-blur-xl rounded-t-xl overflow-hidden flex flex-col ${P?"shadow-2xl":""}`,style:{height:`${H}vh`,maxHeight:"95vh",minHeight:"20vh",transform:P?"scale(1.02)":"scale(1)",transition:P?"none":"transform 0.3s ease"},children:[m.jsxs("div",{className:`flex-shrink-0 py-5 px-6 select-none transition-all duration-200 min-h-[56px] flex flex-col items-center justify-center border-b border-border/50 ${P?"cursor-grabbing bg-accent/40":"cursor-grab hover:bg-accent/20 active:bg-accent/30"}`,onMouseDown:R,onTouchStart:$,style:{touchAction:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[m.jsx("div",{className:`transition-all duration-200 ${P?"opacity-70 scale-110":"opacity-100 hover:scale-105"}`,children:m.jsx(dj,{shouldPulse:ee&&!P})}),m.jsx("div",{className:"text-muted-foreground/50 text-xs mt-2",dir:k?"rtl":"ltr",children:P?_.dragging:_.dragToResize})]}),i&&m.jsx("div",{className:"flex-1 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-12 h-12 border-4 border-border border-t-foreground rounded-full animate-spin mx-auto mb-4"}),m.jsx("p",{className:"text-muted-foreground",dir:k?"rtl":"ltr",children:_.loadingFavorites})]})}),!i&&r.length===0&&m.jsx("div",{className:"flex-1 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx(Nd,{size:64,className:"text-muted-foreground/30 mx-auto mb-6"}),m.jsx("h3",{className:"text-foreground text-xl mb-2",dir:k?"rtl":"ltr",children:_.noFavoritesYet}),m.jsx("p",{className:"text-muted-foreground mb-8",dir:k?"rtl":"ltr",children:_.addFavoritesPrompt}),m.jsxs(Ht,{onClick:()=>e(!1),variant:"ghost",className:"text-muted-foreground hover:text-foreground hover:bg-accent",children:[m.jsx(DS,{size:16,className:k?"ml-2":"mr-2"}),_.goBack]})]})}),!i&&r.length>0&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"flex-shrink-0 p-6 pb-4 border-b border-border/50",children:m.jsxs("div",{className:"flex items-center justify-between",dir:k?"rtl":"ltr",children:[m.jsx("div",{className:`flex items-center ${k?"space-x-3 space-x-reverse":"space-x-3"}`,children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-foreground text-xl",children:_.favoritePoems}),m.jsx("p",{className:`text-muted-foreground text-sm ${k?"text-right":"text-left"}`,children:v==="sheet"?`${k?Dn(l+1):l+1} ${k?"":"of"} ${k?Dn(r.length):r.length}`:`${k?Dn(r.length):r.length} ${k?"":"poems"}`})]})}),m.jsx("div",{className:`flex items-center ${k?"space-x-3 space-x-reverse":"space-x-3"}`,children:m.jsxs("div",{className:`flex items-center ${k?"space-x-2 space-x-reverse":"space-x-2"} bg-muted/30 rounded-lg p-1`,children:[m.jsx("button",{onClick:()=>g("list"),className:`p-1.5 rounded transition-all duration-200 ${v==="list"?"bg-accent text-foreground":"text-muted-foreground hover:text-foreground"}`,title:k?" ":"List View",children:m.jsx(KS,{size:16})}),m.jsx("button",{onClick:()=>g("sheet"),className:`p-1.5 rounded transition-all duration-200 ${v==="sheet"?"bg-accent text-foreground":"text-muted-foreground hover:text-foreground"}`,title:k?" ":"Card View",children:m.jsx(WS,{size:16})})]})})]})}),m.jsx("div",{className:"flex-1 overflow-hidden relative",onTouchStart:ue,onTouchEnd:U,style:{touchAction:P?"none":"auto",pointerEvents:P?"none":"auto"},children:v==="sheet"?m.jsxs(m.Fragment,{children:[m.jsx(fd,{mode:"wait",children:r[l]&&m.jsxs(Wt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"absolute inset-0 flex flex-col",children:[m.jsx("div",{className:"text-center px-8 pt-6 pb-4",children:m.jsx("h3",{className:"text-foreground text-lg",dir:"rtl",children:r[l].poet.name})}),m.jsx("div",{className:"flex-1 flex items-center justify-center px-8",children:m.jsx("div",{className:"text-foreground text-xl leading-relaxed font-light text-center max-w-2xl overflow-y-auto scrollbar-hide",dir:"rtl",style:{lineHeight:"1.8",maxHeight:`calc(${H}vh - 280px)`},dangerouslySetInnerHTML:{__html:r[l].htmlText||r[l].text.replace(/\n/g,"<br/>")}})}),m.jsx("div",{className:"p-6",children:m.jsx("div",{className:"flex items-center justify-center space-x-4 space-x-reverse",children:m.jsxs(Ht,{onClick:()=>p(r[l].id),variant:"ghost",className:"text-red-400 hover:text-red-300 hover:bg-red-500/10 flex items-center space-x-2 space-x-reverse",children:[m.jsx(Im,{size:16}),m.jsx("span",{children:"  "})]})})})]},`favorite-${r[l].id}-${l}`)}),r.length>1&&m.jsxs(m.Fragment,{children:[l>0&&m.jsx(Ht,{onClick:()=>xe(l-1),variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground hover:bg-accent z-10",children:""}),l<r.length-1&&m.jsx(Ht,{onClick:()=>xe(l+1),variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground hover:bg-accent z-10",children:""})]})]}):m.jsx(Cl,{className:"h-full px-6",children:m.jsx("div",{className:"py-4 space-y-4",children:r.map(B=>m.jsx(le,{poem:B,onDelete:()=>p(B.id)},B.id))})})})]}),m.jsx(fd,{children:h&&m.jsx(Wt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50 flex items-center justify-center z-50 p-6",children:m.jsxs(Wt.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-background border border-border rounded-lg p-6 max-w-md w-full",children:[m.jsx("h3",{className:"text-foreground text-lg mb-4",dir:"rtl",children:"  "}),m.jsx("p",{className:"text-muted-foreground mb-6",dir:"rtl",children:"            "}),m.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[m.jsx(Ht,{onClick:()=>_e(h),variant:"destructive",className:"flex-1",children:""}),m.jsx(Ht,{onClick:()=>p(null),variant:"ghost",className:"flex-1",children:""})]})]})})})]})]}):null}const mj=({shouldPulse:t=!1})=>m.jsx("div",{className:"flex flex-col items-center py-1 px-0 relative",children:m.jsx("div",{className:`bg-muted-foreground h-[6px] rounded-full shrink-0 w-[40px] shadow-lg border border-muted-foreground/20 ${t?"animate-pulse":""}`})});function gj({open:t,onOpenChange:e,poem:r,cachedExplanation:o,onFetchExplanation:i}){const{t:c,isRTL:l,language:d}=$n(),[h,p]=b.useState({}),[v,g]=b.useState(!1),[w,S]=b.useState(""),[_,k]=b.useState("lineByLine"),[E,P]=b.useState(!1),[I,A]=b.useState(0),[W,V]=b.useState(70),[O,H]=b.useState(70),[M,ee]=b.useState(!0),ie=b.useRef(null),Ee=[40,70,90],he=20;b.useEffect(()=>{if(t&&r){H(70),V(70),ee(!0),o?o.loading?(g(!0),p({}),S("")):o.error?(g(!1),p({}),S(o.error)):Object.keys(o.data).length>0?(g(!1),p(o.data),S("")):we(!1):we(!1);const N=setTimeout(()=>{ee(!1)},3e3);return()=>clearTimeout(N)}else ee(!1),p({}),S("")},[t,r?.id,d,o]),b.useEffect(()=>{t&&r&&o&&(o.loading?(g(!0),S("")):o.error?(g(!1),S(o.error)):Object.keys(o.data).length>0&&(g(!1),p(o.data),S("")))},[o,t,r]);const we=async(N=!1)=>{if(r)try{const $=await i(r,N);g($.loading),p($.data),S($.error)}catch{g(!1),S(c.explanationError||"Error generating explanation")}},_e=b.useCallback(N=>{console.log("Drag start at:",N),P(!0),A(N),V(O),document.body.style.overflow="hidden",document.body.style.touchAction="none"},[O]),xe=b.useCallback(N=>{if(!E)return;const $=N-I,X=window.innerHeight,ae=$/X*100;console.log("Drag move - deltaY:",$,"heightChange:",ae);const le=Math.max(10,Math.min(95,W-ae));console.log("New height:",le),ie.current&&(ie.current.style.height=`${le}vh`,ie.current.style.transition="none")},[E,I,W]),ue=b.useCallback(()=>{if(!E)return;console.log("Drag end");const N=ie.current?parseFloat(ie.current.style.height):O;if(P(!1),document.body.style.overflow="",document.body.style.touchAction="",N<he){console.log("Closing sheet - height below threshold:",N),e(!1);return}const $=Ee.reduce((X,ae)=>Math.abs(ae-N)<Math.abs(X-N)?ae:X);console.log("Snapping to:",$),H($),ie.current&&(ie.current.style.transition="height 0.3s cubic-bezier(0.4, 0, 0.2, 1)",ie.current.style.height=`${$}vh`,setTimeout(()=>{ie.current&&(ie.current.style.transition="")},300))},[E,O,e]),U=b.useCallback(N=>{N.preventDefault(),N.stopPropagation(),console.log("Mouse down at:",N.clientY),_e(N.clientY)},[_e]),C=b.useCallback(N=>{E&&(N.preventDefault(),N.stopPropagation(),xe(N.clientY))},[xe,E]),re=b.useCallback(N=>{E&&(N.preventDefault(),N.stopPropagation(),ue())},[ue,E]),K=b.useCallback(N=>{N.preventDefault(),N.stopPropagation(),console.log("Touch start at:",N.touches[0].clientY),_e(N.touches[0].clientY)},[_e]),R=b.useCallback(N=>{E&&N.touches.length>0&&(N.preventDefault(),N.stopPropagation(),xe(N.touches[0].clientY))},[xe,E]),G=b.useCallback(N=>{E&&(N.preventDefault(),N.stopPropagation(),ue())},[ue,E]);return b.useEffect(()=>{if(E){const N={passive:!1,capture:!0};return document.addEventListener("mousemove",C,N),document.addEventListener("mouseup",re,N),document.addEventListener("touchmove",R,N),document.addEventListener("touchend",G,N),document.addEventListener("touchcancel",G,N),()=>{document.removeEventListener("mousemove",C,{capture:!0}),document.removeEventListener("mouseup",re,{capture:!0}),document.removeEventListener("touchmove",R,{capture:!0}),document.removeEventListener("touchend",G,{capture:!0}),document.removeEventListener("touchcancel",G,{capture:!0})}}},[E,C,re,R,G]),b.useEffect(()=>{const N=$=>{$.key==="Escape"&&t&&e(!1)};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[t,e]),t?m.jsxs(m.Fragment,{children:[m.jsx(Wt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:()=>e(!1)}),m.jsxs(Wt.div,{ref:ie,initial:{y:"100%",height:"70vh"},animate:{y:0,height:`${O}vh`},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:`fixed bottom-0 left-0 right-0 z-50 bg-background/95 border-t border-border backdrop-blur-xl rounded-t-xl overflow-hidden flex flex-col ${E?"shadow-2xl":""}`,style:{height:`${O}vh`,maxHeight:"95vh",minHeight:"20vh",transform:E?"scale(1.02)":"scale(1)",transition:E?"none":"transform 0.3s ease"},children:[m.jsxs("div",{className:`flex-shrink-0 py-5 px-6 select-none transition-all duration-200 min-h-[56px] flex flex-col items-center justify-center border-b border-border/50 ${E?"cursor-grabbing bg-accent/40":"cursor-grab hover:bg-accent/20 active:bg-accent/30"}`,onMouseDown:U,onTouchStart:K,style:{touchAction:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[m.jsx("div",{className:`transition-all duration-200 ${E?"opacity-70 scale-110":"opacity-100 hover:scale-105"}`,children:m.jsx(mj,{shouldPulse:M&&!E})}),m.jsx("div",{className:"text-muted-foreground/50 text-xs mt-2",dir:l?"rtl":"ltr",children:E?c.dragging:c.dragToResize})]}),m.jsx("div",{className:"flex-shrink-0 px-6 py-4 border-b border-border/50",children:m.jsxs("div",{className:l?"text-right":"text-left",dir:l?"rtl":"ltr",children:[m.jsx("h2",{className:"text-foreground text-xl font-medium",children:c.poemExplanation||""}),m.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:c.aiDisclaimer||"            "})]})}),m.jsx("div",{className:"flex-1 overflow-hidden relative",style:{touchAction:E?"none":"auto",pointerEvents:E?"none":"auto"},children:m.jsx(Cl,{className:"h-full",children:m.jsx("div",{className:"space-y-6 p-6",dir:l?"rtl":"ltr",children:r?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("h3",{className:`text-foreground text-lg font-medium ${l?"text-right":"text-left"}`,children:c.title||"Title"}),m.jsx("p",{className:`text-muted-foreground bg-muted/30 rounded-lg p-3 ${l?"text-right":"text-left"}`,children:r.title})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("h3",{className:`text-foreground text-lg font-medium ${l?"text-right":"text-left"}`,children:c.poet||"Poet"}),m.jsxs("div",{className:"bg-muted/30 rounded-lg p-3 space-y-1",children:[m.jsx("p",{className:`text-foreground font-medium ${l?"text-right":"text-left"}`,children:r.poet.name}),r.poet.fullName!==r.poet.name&&m.jsx("p",{className:`text-muted-foreground text-sm ${l?"text-right":"text-left"}`,children:r.poet.fullName})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"flex justify-between items-center",children:m.jsx("h3",{className:`text-foreground text-lg font-medium ${l?"text-right":"text-left"}`,children:c.poemExplanation||""})}),v?m.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:m.jsx("div",{className:"flex items-center justify-center py-8",children:m.jsxs("div",{className:"flex items-center space-x-2",dir:l?"rtl":"ltr",children:[m.jsx("div",{className:"w-4 h-4 border-2 border-foreground border-t-transparent rounded-full animate-spin"}),m.jsx("span",{className:"text-muted-foreground",children:c.generatingAIExplanation||"      ..."})]})})}):w?m.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:m.jsxs("div",{className:"text-center py-8",children:[m.jsx("div",{className:"text-destructive mb-2",children:w}),m.jsx("button",{onClick:()=>we(!1),className:"text-primary hover:text-primary/80 text-sm underline",children:c.tryAgain||"Try again"})]})}):Object.keys(h).length>0?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",dir:l?"rtl":"ltr",children:[m.jsx("button",{onClick:()=>k("lineByLine"),className:`px-3 py-2 text-sm rounded-lg transition-all ${_==="lineByLine"?"bg-foreground text-background":"bg-muted/50 text-foreground hover:bg-muted"}`,children:l?"  ":"Line by Line"}),m.jsx("button",{onClick:()=>k("general"),className:`px-3 py-2 text-sm rounded-lg transition-all ${_==="general"?"bg-foreground text-background":"bg-muted/50 text-foreground hover:bg-muted"}`,children:l?" ":"General"}),m.jsx("button",{onClick:()=>k("themes"),className:`px-3 py-2 text-sm rounded-lg transition-all ${_==="themes"?"bg-foreground text-background":"bg-muted/50 text-foreground hover:bg-muted"}`,children:l?"":"Themes"}),m.jsx("button",{onClick:()=>k("imagery"),className:`px-3 py-2 text-sm rounded-lg transition-all ${_==="imagery"?"bg-foreground text-background":"bg-muted/50 text-foreground hover:bg-muted"}`,children:l?"  ":"Imagery & Symbols"}),h.fullTafsir&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:()=>k("devices"),className:`px-3 py-2 text-sm rounded-lg transition-all ${_==="devices"?"bg-foreground text-background":"bg-muted/50 text-foreground hover:bg-muted"}`,children:l?" ":"Literary Devices"}),m.jsx("button",{onClick:()=>k("meta"),className:`px-3 py-2 text-sm rounded-lg transition-all ${_==="meta"?"bg-foreground text-background":"bg-muted/50 text-foreground hover:bg-muted"}`,children:l?" ":"Meta Info"})]})]}),m.jsx("div",{className:`mb-3 flex ${l?"justify-start":"justify-end"}`,children:m.jsx("button",{onClick:()=>we(!0),disabled:v,className:"text-xs px-3 py-1.5 rounded-lg bg-primary/10 text-primary hover:bg-primary/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",dir:l?"rtl":"ltr",title:l?"     (- )":"Deep AI Analysis (30-60 seconds)",children:v?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 border-2 border-primary/30 border-t-primary rounded-full animate-spin"}),m.jsx("span",{children:l?"  ...":"AI Analyzing..."})]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),m.jsx("span",{children:l?" ":"AI Analysis"})]})})}),m.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[_==="general"&&h.generalMeaning&&m.jsx("div",{className:`text-foreground leading-relaxed ${l?"text-right":"text-left"} prose prose-sm max-w-none`,style:{fontFamily:l?"system-ui, -apple-system, sans-serif":'Georgia, "Times New Roman", serif',lineHeight:"1.8"},dir:l?"rtl":"ltr",dangerouslySetInnerHTML:{__html:h.generalMeaning.replace(/\*\*(.*?)\*\*/g,'<strong style="color: var(--foreground); font-weight: 600;">$1</strong>').replace(/\*(.*?)\*/g,'<em style="color: var(--muted-foreground); font-style: italic;">$1</em>').replace(/\n\n/g,`</p><p style="margin: 0.75rem 0; text-align: ${l?"right":"left"}; direction: ${l?"rtl":"ltr"};">`).replace(/\n/g,"<br/>").replace(/^(.*)$/,`<p style="margin: 0.75rem 0; text-align: ${l?"right":"left"}; direction: ${l?"rtl":"ltr"};">$1</p>`)}}),_==="themes"&&m.jsx("div",{className:"space-y-4",children:h.fullTafsir?.themes&&h.fullTafsir.themes.length>0?m.jsx("div",{className:"space-y-4",children:h.fullTafsir.themes.map((N,$)=>m.jsxs("div",{className:`${l?"border-r-2 pr-4":"border-l-2 pl-4"} border-muted`,children:[m.jsx("div",{className:`text-foreground font-medium mb-2 ${l?"text-right":"text-left"}`,dir:l?"rtl":"ltr",children:N.theme}),m.jsx("div",{className:`text-muted-foreground text-sm mb-2 ${l?"text-right":"text-left"}`,style:{fontFamily:l?"system-ui, -apple-system, sans-serif":'Georgia, "Times New Roman", serif',lineHeight:"1.6"},dir:l?"rtl":"ltr",children:N.explanation}),N.evidence_beyts&&N.evidence_beyts.length>0&&m.jsxs("div",{className:`text-muted-foreground text-xs ${l?"text-right":"text-left"}`,dir:l?"rtl":"ltr",children:[m.jsx("strong",{children:l?":  ":"Evidence: verses "}),l?N.evidence_beyts.map(X=>Dn(X)).join(" "):N.evidence_beyts.join(", ")]})]},$))}):h.mainThemes?m.jsx("div",{className:`text-foreground leading-relaxed ${l?"text-right":"text-left"} prose prose-sm max-w-none`,style:{fontFamily:l?"system-ui, -apple-system, sans-serif":'Georgia, "Times New Roman", serif',lineHeight:"1.8"},dir:l?"rtl":"ltr",dangerouslySetInnerHTML:{__html:h.mainThemes.replace(/\*\*(.*?)\*\*/g,'<strong style="color: var(--foreground); font-weight: 600;">$1</strong>').replace(/\*(.*?)\*/g,'<em style="color: var(--muted-foreground); font-style: italic;">$1</em>').replace(/\n\n/g,`</p><p style="margin: 0.75rem 0; text-align: ${l?"right":"left"}; direction: ${l?"rtl":"ltr"};">`).replace(/\n/g,"<br/>").replace(/^(.*)$/,`<p style="margin: 0.75rem 0; text-align: ${l?"right":"left"}; direction: ${l?"rtl":"ltr"};">$1</p>`)}}):m.jsx("div",{className:"text-center py-8 text-muted-foreground",children:l?"   ":"Themes not available"})}),_==="imagery"&&m.jsx("div",{className:"space-y-4",children:h.fullTafsir?.symbols&&h.fullTafsir.symbols.length>0?m.jsx("div",{className:"space-y-4",children:h.fullTafsir.symbols.map((N,$)=>m.jsxs("div",{className:`${l?"border-r-2 pr-4":"border-l-2 pl-4"} border-muted`,children:[m.jsx("div",{className:`text-foreground font-medium mb-2 ${l?"text-right":"text-left"}`,dir:l?"rtl":"ltr",children:N.symbol}),m.jsxs("div",{className:`text-muted-foreground text-sm mb-2 ${l?"text-right":"text-left"}`,dir:l?"rtl":"ltr",children:[m.jsx("strong",{children:l?":":"Meanings:"})," ",N.meanings.join(l?" ":", ")]}),N.evidence_terms&&N.evidence_terms.length>0&&m.jsxs("div",{className:`text-muted-foreground text-xs ${l?"text-right":"text-left"}`,dir:l?"rtl":"ltr",children:[m.jsx("strong",{children:l?":":"Terms:"})," ",N.evidence_terms.join(l?" ":", ")]}),N.example_beyts&&N.example_beyts.length>0&&m.jsxs("div",{className:`text-muted-foreground text-xs mt-1 ${l?"text-right":"text-left"}`,dir:l?"rtl":"ltr",children:[m.jsx("strong",{children:l?":":"Verses:"})," ",l?N.example_beyts.map(X=>Dn(X)).join(" "):N.example_beyts.join(", ")]})]},$))}):h.imagerySymbols?m.jsx("div",{className:`text-foreground leading-relaxed ${l?"text-right":"text-left"} prose prose-sm max-w-none`,style:{fontFamily:l?"system-ui, -apple-system, sans-serif":'Georgia, "Times New Roman", serif',lineHeight:"1.8"},dir:l?"rtl":"ltr",dangerouslySetInnerHTML:{__html:h.imagerySymbols.replace(/\*\*(.*?)\*\*/g,'<strong style="color: var(--foreground); font-weight: 600;">$1</strong>').replace(/\*(.*?)\*/g,'<em style="color: var(--muted-foreground); font-style: italic;">$1</em>').replace(/\n\n/g,`</p><p style="margin: 0.75rem 0; text-align: ${l?"right":"left"}; direction: ${l?"rtl":"ltr"};">`).replace(/\n/g,"<br/>").replace(/^(.*)$/,`<p style="margin: 0.75rem 0; text-align: ${l?"right":"left"}; direction: ${l?"rtl":"ltr"};">$1</p>`)}}):m.jsx("div",{className:"text-center py-8 text-muted-foreground",children:l?"     ":"Imagery and symbols not available"})}),_==="devices"&&h.fullTafsir?.devices&&m.jsx("div",{className:"space-y-4",children:h.fullTafsir.devices.map((N,$)=>m.jsxs("div",{className:`${l?"border-r-2 pr-4":"border-l-2 pl-4"} border-muted`,children:[m.jsxs("div",{className:`text-foreground font-medium mb-2 ${l?"text-right":"text-left"}`,dir:l?"rtl":"ltr",children:[l?N.device==="metaphor"?"":N.device==="allusion"?"":N.device==="ambiguity"?"":N.device==="antithesis"?"":N.device==="pun"?"":N.device==="simile"?"":N.device==="symbolism"?"":N.device==="irony"?"":N.device:N.device.charAt(0).toUpperCase()+N.device.slice(1)," ",m.jsxs("span",{className:"text-muted-foreground text-sm",children:["(",l?` ${Dn(N.beyt)}`:`Verse ${N.beyt}`,")"]})]}),m.jsxs("div",{className:`text-muted-foreground text-sm mb-2 italic ${l?"text-right":"text-left"}`,dir:l?"rtl":"ltr",children:['"',N.quote,'"']}),m.jsx("div",{className:`text-muted-foreground text-sm ${l?"text-right":"text-left"}`,style:{fontFamily:l?"system-ui, -apple-system, sans-serif":'Georgia, "Times New Roman", serif',lineHeight:"1.6"},dir:l?"rtl":"ltr",children:N.explanation})]},$))}),_==="meta"&&h.fullTafsir?.meta&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.fullTafsir.meta.poet&&m.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[m.jsx("div",{className:`text-muted-foreground text-xs mb-1 ${l?"text-right":"text-left"}`,children:l?"":"Poet"}),m.jsx("div",{className:`text-foreground ${l?"text-right":"text-left"}`,dir:l?"rtl":"ltr",children:h.fullTafsir.meta.poet})]}),h.fullTafsir.meta.era&&m.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[m.jsx("div",{className:`text-muted-foreground text-xs mb-1 ${l?"text-right":"text-left"}`,children:l?"":"Era"}),m.jsx("div",{className:`text-foreground ${l?"text-right":"text-left"}`,dir:l?"rtl":"ltr",children:h.fullTafsir.meta.era})]}),h.fullTafsir.meta.form&&m.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[m.jsx("div",{className:`text-muted-foreground text-xs mb-1 ${l?"text-right":"text-left"}`,children:l?"":"Form"}),m.jsx("div",{className:`text-foreground ${l?"text-right":"text-left"}`,dir:l?"rtl":"ltr",children:l?h.fullTafsir.meta.form==="ghazal"?"":h.fullTafsir.meta.form==="rubai"?"":h.fullTafsir.meta.form==="masnavi"?"":h.fullTafsir.meta.form==="nimaei"?"":h.fullTafsir.meta.form==="free"?"":"":h.fullTafsir.meta.form})]}),h.fullTafsir.meta.meter&&m.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[m.jsx("div",{className:`text-muted-foreground text-xs mb-1 ${l?"text-right":"text-left"}`,children:l?"":"Meter"}),m.jsx("div",{className:`text-foreground ${l?"text-right":"text-left"}`,dir:l?"rtl":"ltr",children:h.fullTafsir.meta.meter})]}),h.fullTafsir.meta.rhyme_radif&&m.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[m.jsx("div",{className:`text-muted-foreground text-xs mb-1 ${l?"text-right":"text-left"}`,children:l?"  ":"Rhyme & Radif"}),m.jsx("div",{className:`text-foreground ${l?"text-right":"text-left"}`,dir:l?"rtl":"ltr",children:h.fullTafsir.meta.rhyme_radif})]})]}),h.fullTafsir.overall_meaning&&m.jsxs("div",{className:"space-y-3",children:[h.fullTafsir.overall_meaning.one_sentence&&m.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[m.jsx("div",{className:`text-muted-foreground text-xs mb-2 ${l?"text-right":"text-left"}`,children:l?"":"Summary"}),m.jsx("div",{className:`text-foreground ${l?"text-right":"text-left"}`,style:{fontFamily:l?"system-ui, -apple-system, sans-serif":'Georgia, "Times New Roman", serif',lineHeight:"1.8"},dir:l?"rtl":"ltr",children:h.fullTafsir.overall_meaning.one_sentence})]}),h.fullTafsir.overall_meaning.key_claims&&h.fullTafsir.overall_meaning.key_claims.length>0&&m.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[m.jsx("div",{className:`text-muted-foreground text-xs mb-3 ${l?"text-right":"text-left"}`,children:l?" ":"Key Claims"}),m.jsx("div",{className:"space-y-2",children:h.fullTafsir.overall_meaning.key_claims.map((N,$)=>m.jsxs("div",{className:`${l?"border-r-2 pr-3":"border-l-2 pl-3"} border-muted`,children:[m.jsx("div",{className:`text-foreground text-sm ${l?"text-right":"text-left"}`,style:{fontFamily:l?"system-ui, -apple-system, sans-serif":'Georgia, "Times New Roman", serif',lineHeight:"1.6"},dir:l?"rtl":"ltr",children:N.claim}),m.jsxs("div",{className:`text-muted-foreground text-xs mt-1 ${l?"text-right":"text-left"}`,children:[l?":  ":"Evidence: verses ",l?N.evidence_beyts.map(X=>Dn(X)).join(" "):N.evidence_beyts.join(", ")]})]},$))})]})]}),h.fullTafsir.uncertainty&&m.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[m.jsx("div",{className:`text-yellow-800 dark:text-yellow-200 text-xs mb-2 ${l?"text-right":"text-left"}`,children:l?" ":"Uncertainty"}),m.jsx("div",{className:`text-yellow-700 dark:text-yellow-300 text-sm ${l?"text-right":"text-left"}`,style:{fontFamily:l?"system-ui, -apple-system, sans-serif":'Georgia, "Times New Roman", serif',lineHeight:"1.6"},dir:l?"rtl":"ltr",children:h.fullTafsir.uncertainty})]})]}),_==="lineByLine"&&m.jsx("div",{className:"space-y-4",children:h.fullTafsir?.per_beyt?h.fullTafsir.per_beyt.map((N,$)=>m.jsxs("div",{className:`${l?"border-r-2 pr-4":"border-l-2 pl-4"} border-muted`,children:[m.jsxs("div",{className:`text-foreground font-medium mb-2 ${l?"text-right":"text-left"}`,style:{fontFamily:l?"system-ui, -apple-system, sans-serif":'Georgia, "Times New Roman", serif',lineHeight:"1.8"},dir:l?"rtl":"ltr",children:[m.jsx("span",{className:"text-muted-foreground text-xs mr-2",children:l?` ${Dn(N.beyt_index)}:`:`Verse ${N.beyt_index}:`}),N.literal]}),N.readings&&N.readings.length>0&&m.jsx("div",{className:"space-y-2",children:N.readings.map((X,ae)=>m.jsxs("div",{className:"text-sm",children:[m.jsxs("div",{className:`text-muted-foreground text-xs mb-1 ${l?"text-right":"text-left"}`,children:[l?X.type==="symbolic"?"":X.type==="mystical"?"":X.type==="ethical"?"":X.type==="social"?"":"":X.type.charAt(0).toUpperCase()+X.type.slice(1)," ",X.confidence&&(l?`(${Dn(Math.round(X.confidence*100))})`:`(${Math.round(X.confidence*100)}%)`)]}),m.jsx("div",{className:`text-muted-foreground ${l?"text-right":"text-left"}`,style:{fontFamily:l?"system-ui, -apple-system, sans-serif":'Georgia, "Times New Roman", serif',lineHeight:"1.6"},dir:l?"rtl":"ltr",children:X.text})]},ae))}),N.notes&&m.jsxs("div",{className:`text-xs text-muted-foreground/70 mt-2 ${l?"text-right":"text-left"}`,dir:l?"rtl":"ltr",children:[l?":":"Note:"," ",N.notes]})]},$)):h.lineByLine?h.lineByLine.map((N,$)=>m.jsxs("div",{className:`${l?"border-r-2 pr-4":"border-l-2 pl-4"} border-muted`,children:[m.jsx("div",{className:`text-foreground font-medium mb-2 ${l?"text-right":"text-left"}`,style:{fontFamily:l?"system-ui, -apple-system, sans-serif":'Georgia, "Times New Roman", serif',lineHeight:"1.8"},dir:l?"rtl":"ltr",children:N.original}),m.jsx("div",{className:`text-muted-foreground text-sm ${l?"text-right":"text-left"}`,style:{fontFamily:l?"system-ui, -apple-system, sans-serif":'Georgia, "Times New Roman", serif',lineHeight:"1.6"},dir:l?"rtl":"ltr",dangerouslySetInnerHTML:{__html:N.meaning.replace(/\*\*(.*?)\*\*/g,'<strong style="color: var(--foreground); font-weight: 600;">$1</strong>').replace(/\*(.*?)\*/g,'<em style="font-style: italic;">$1</em>')}})]},$)):m.jsx("div",{className:"text-center py-8 text-muted-foreground",children:l?"      ":"Line by line analysis not available"})}),(_==="general"&&!h.generalMeaning||_==="themes"&&!h.mainThemes&&(!h.fullTafsir?.themes||h.fullTafsir.themes.length===0)||_==="imagery"&&!h.imagerySymbols&&(!h.fullTafsir?.symbols||h.fullTafsir.symbols.length===0)||_==="lineByLine"&&!h.lineByLine&&(!h.fullTafsir?.per_beyt||h.fullTafsir.per_beyt.length===0)||_==="devices"&&(!h.fullTafsir?.devices||h.fullTafsir.devices.length===0)||_==="meta"&&!h.fullTafsir?.meta)&&m.jsx("div",{className:"text-center py-8 text-muted-foreground",children:c.noContentForTab||"      "})]})]}):m.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:m.jsx("div",{className:"text-center py-8 text-muted-foreground",children:c.noExplanationGenerated||"   "})})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"bg-muted/30 rounded-lg p-3 text-center",children:[m.jsx("div",{className:"text-foreground text-lg font-medium",children:l?Dn(r.text.split(`
`).length):r.text.split(`
`).length}),m.jsx("div",{className:"text-muted-foreground text-sm",children:c.lines||"Lines"})]}),m.jsxs("div",{className:"bg-muted/30 rounded-lg p-3 text-center",children:[m.jsx("div",{className:"text-foreground text-lg font-medium",children:l?Dn(r.text.replace(/\s/g,"").length):r.text.replace(/\s/g,"").length}),m.jsx("div",{className:"text-muted-foreground text-sm",children:c.characters||"Characters"})]})]})]}):m.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[m.jsx("div",{className:"text-muted-foreground text-lg mb-2",children:c.noPoemSelected||"No poem selected"}),m.jsx("div",{className:"text-muted-foreground/70 text-sm",children:c.noPoemSelectedSubtitle||"View a poem to see its details here"})]})})})})]})]}):null}const tw=b.forwardRef(({isMuted:t},e)=>{const r=b.useRef(null),{theme:o}=zr(),i=["https://pspybykovwrfdxpkjpzd.supabase.co/storage/v1/object/public/poem-videos/07bb10c0-9358-41ce-8c76-dfffac886cbb/video_1759783667599.mp4","https://pspybykovwrfdxpkjpzd.supabase.co/storage/v1/object/public/poem-videos/07bb10c0-9358-41ce-8c76-dfffac886cbb/video_1759784096398.mp4","https://pspybykovwrfdxpkjpzd.supabase.co/storage/v1/object/public/poem-videos/07bb10c0-9358-41ce-8c76-dfffac886cbb/video_1759784508199.mp4","https://pspybykovwrfdxpkjpzd.supabase.co/storage/v1/object/public/poem-videos/07bb10c0-9358-41ce-8c76-dfffac886cbb/video_1759785301412.mp4","https://pspybykovwrfdxpkjpzd.supabase.co/storage/v1/object/public/poem-videos/07bb10c0-9358-41ce-8c76-dfffac886cbb/video_1759786378308.mp4","https://pspybykovwrfdxpkjpzd.supabase.co/storage/v1/object/public/poem-videos/07bb10c0-9358-41ce-8c76-dfffac886cbb/video_1759786433870.mp4"],[c,l]=b.useState(()=>{const g=Math.floor(Math.random()*i.length);return console.log(`Starting video playlist with random video ${g+1}/${i.length}`),g}),d=g=>{if(i.length<=1)return 0;let w;do w=Math.floor(Math.random()*i.length);while(w===g);return w},h=()=>{const g=(c+1)%i.length;console.log(`VideoPlaylist navigateNext called: video ${c+1} -> video ${g+1} (${g+1}/${i.length})`),v(g)},p=()=>{const g=c===0?i.length-1:c-1;console.log(`VideoPlaylist navigatePrevious called: video ${c+1} -> video ${g+1} (${g+1}/${i.length})`),v(g)},v=g=>{const w=r.current;if(!w||g<0||g>=i.length)return;w.src=i[g],w.load();const S=()=>{w.play().catch(_=>{_.name!=="AbortError"&&console.warn("Failed to play video after manual navigation:",_.name)})};w.addEventListener("loadeddata",S,{once:!0}),l(g)};return b.useImperativeHandle(e,()=>({navigateNext:h,navigatePrevious:p}),[c]),b.useEffect(()=>{const g=r.current;if(!g)return;g.src=i[c],(async()=>{try{await new Promise(S=>{g.addEventListener("loadeddata",S,{once:!0}),g.load()}),await g.play(),console.log("Video playlist started playing continuously")}catch(S){S.name!=="AbortError"&&(console.warn("Video playlist autoplay failed:",S.name),setTimeout(()=>{g.play().catch(()=>{console.warn("Retry video play failed")})},1e3))}})()},[]),b.useEffect(()=>{const g=r.current;if(!g)return;const w=()=>{const S=d(c);console.log(`Video ${c+1} ended, randomly switching to video ${S+1}`),g.src=i[S],g.load();const _=()=>{g.play().catch(k=>{k.name!=="AbortError"&&console.warn("Failed to play next video:",k.name)})};g.addEventListener("loadeddata",_,{once:!0}),l(S)};return g.addEventListener("ended",w),()=>{g.removeEventListener("ended",w)}},[c,i]),b.useEffect(()=>{const g=r.current;g&&(g.muted=t)},[t]),b.useEffect(()=>{const g=()=>{const w=r.current;w&&document.visibilityState==="visible"&&w.paused&&w.play().catch(S=>{S.name!=="AbortError"&&console.warn("Failed to resume video after visibility change:",S.name)})};return document.addEventListener("visibilitychange",g),()=>{document.removeEventListener("visibilitychange",g)}},[]),m.jsxs("div",{className:"fixed inset-0 z-0 video-background",children:[m.jsx("video",{ref:r,className:"absolute inset-0 w-full h-full object-cover opacity-70",muted:t,playsInline:!0,preload:"auto",onPlay:()=>{console.log(`Video ${c+1} is playing`)},onPause:()=>{console.log(`Video ${c+1} paused - this should not happen during normal operation`)},onError:g=>{console.warn("Video playlist error:",g);const w=d(c);l(w)},onStalled:()=>{const g=r.current;g&&g.readyState>=2&&g.play().catch(()=>{console.warn("Failed to resume after stall")})},onWaiting:()=>{console.log("Video is buffering...")},onCanPlay:()=>{const g=r.current;g&&g.paused&&g.play().catch(w=>{w.name!=="AbortError"&&console.warn("Failed to play when ready:",w.name)})}}),m.jsx("div",{className:`absolute inset-0 z-5 ${o==="dark"?"bg-black/90":"bg-white/90"}`})]})});tw.displayName="VideoPlaylist";function vj({onNext:t,onPrevious:e}){const[r,o]=b.useState(""),[i,c]=b.useState(!1),{isRTL:l,t:d}=$n();b.useEffect(()=>{if(i){const v=setTimeout(()=>{c(!1),o("")},1500);return()=>clearTimeout(v)}},[i]);const h=()=>{console.log("Left button (next) clicked"),o(" "),c(!0),t()},p=()=>{console.log("Right button (previous) clicked"),o(" "),c(!0),e()};return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed bottom-16 left-4 z-30 flex items-center space-x-2",children:l?m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:h,className:"bg-black/30 backdrop-blur-sm border border-white/20 rounded-full p-2 hover:bg-black/50 transition-all duration-200 active:scale-95","aria-label":"Next video",children:m.jsx(Lm,{className:"w-5 h-5 text-white"})}),m.jsx("button",{onClick:p,className:"bg-black/30 backdrop-blur-sm border border-white/20 rounded-full p-2 hover:bg-black/50 transition-all duration-200 active:scale-95","aria-label":"Previous video",children:m.jsx(Rm,{className:"w-5 h-5 text-white"})})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:p,className:"bg-black/30 backdrop-blur-sm border border-white/20 rounded-full p-2 hover:bg-black/50 transition-all duration-200 active:scale-95","aria-label":"Previous video",children:m.jsx(Rm,{className:"w-5 h-5 text-white"})}),m.jsx("button",{onClick:h,className:"bg-black/30 backdrop-blur-sm border border-white/20 rounded-full p-2 hover:bg-black/50 transition-all duration-200 active:scale-95","aria-label":"Next video",children:m.jsx(Lm,{className:"w-5 h-5 text-white"})})]})}),i&&m.jsx("div",{className:"fixed bottom-16 left-1/2 transform -translate-x-1/2 z-40 text-white text-sm text-center bg-black/50 backdrop-blur-sm rounded-lg px-3 py-1 shadow-lg transition-opacity duration-300",dir:"rtl",style:{textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)"},children:r})]})}const av={p20a9b990:"M66 1.00002C81.5 105.5 221.377 -94.0741 1 66.5",p3cc63780:"M66 1.00001C81.5 105.5 221.377 -94.0741 1.00001 66.5"};function yj(){return m.jsx("div",{className:"relative size-full flex items-center justify-center",children:m.jsx("svg",{className:"block size-full",fill:"none",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 125 67",children:m.jsxs("g",{id:"Group 1",children:[m.jsx("path",{d:av.p20a9b990,id:"Vector 1",stroke:"white",strokeOpacity:"0.7"}),m.jsx(Wt.path,{d:av.p3cc63780,id:"Vector 2",stroke:"black",strokeOpacity:"0.87",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:2,ease:"easeInOut",repeat:1/0,repeatType:"reverse",repeatDelay:.5}})]})})})}function wj({text:t,speed:e=50,startDelay:r=300,lineBreakPause:o=400,isActive:i,onComplete:c,className:l="",style:d={},dir:h}){const[p,v]=b.useState(""),[g,w]=b.useState(!1),[S,_]=b.useState(!1),k=b.useRef(),E=b.useRef(),P=b.useRef(0),A=(O=>O.replace(/<[^>]*>/g,""))(t);b.useEffect(()=>{if(k.current&&clearInterval(k.current),E.current&&clearTimeout(E.current),!i){v(""),w(!1),_(!1),P.current=0;return}return E.current=setTimeout(()=>{w(!0),P.current=0;const O=1e3/e,H=()=>{if(P.current+=1,P.current>=A.length)v(t),w(!1),_(!0),k.current&&clearInterval(k.current),c&&c();else{const M=P.current,ee=W(t,M);v(ee);const Ee=ee.match(/<br\s*\/?>$/i)?o:O;k.current=setTimeout(H,Ee)}};k.current=setTimeout(H,O)},r),()=>{k.current&&clearInterval(k.current),E.current&&clearTimeout(E.current)}},[i,t,e,r,c,A.length]);const W=(O,H)=>{let M="",ee=0,ie=0,Ee=!1,he="";for(;ie<O.length&&ee<H;){const we=O[ie];we==="<"?(Ee=!0,he=we):we===">"?(Ee=!1,he+=we,M+=he,he=""):Ee?he+=we:(M+=we,ee++),ie++}return M},V=/<[^>]+>/.test(t);return m.jsxs("div",{className:l,style:d,dir:h,children:[V?m.jsx(m.Fragment,{children:i?m.jsx("div",{dangerouslySetInnerHTML:{__html:p}}):m.jsx("div",{dangerouslySetInnerHTML:{__html:t}})}):m.jsx(m.Fragment,{children:i?p:t}),g&&m.jsx("span",{className:"inline-block typewriter-cursor",style:{color:"currentColor",fontSize:"1.2em",lineHeight:"1",marginLeft:h==="rtl"?"0":"2px",marginRight:h==="rtl"?"2px":"0",textShadow:"inherit",fontWeight:"bold"},children:"|"})]})}const xj=({...t})=>{const{theme:e}=zr(),{isRTL:r}=$n();return m.jsx(mP,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},position:"top-center",offset:"48px",richColors:!0,dir:r?"rtl":"ltr",toastOptions:{style:{textAlign:r?"right":"left",direction:r?"rtl":"ltr",maxWidth:"calc(100vw - 32px)",width:"auto",minWidth:"200px"},className:"toast-responsive"},...t})},bj="/assets/9568d55e4870699a55c3b8ec166b4f40c9cb4e3e-BFzHDaE2.png";function Sj(){return m.jsx("div",{className:"absolute bottom-[-69px] left-[-117px] top-0 w-[948px]","data-name":"RubatarLogo",children:m.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:m.jsx("img",{alt:"",className:"absolute h-[127.74%] left-[-13.67%] max-w-none top-[-10.86%] w-[134.88%]",src:bj})})})}function _j(){return m.jsx("div",{className:"absolute bg-[rgba(0,0,0,0.4)] h-[932px] left-0 top-0 w-[743px]","data-name":"Overlay"})}function kj(){return m.jsxs("div",{className:"h-[932px] overflow-clip relative shrink-0 w-full","data-name":"Container",style:{backgroundImage:"linear-gradient(90deg, rgb(0, 0, 0) 0%, rgb(0, 0, 0) 100%), linear-gradient(90deg, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.5) 100%)"},children:[m.jsx(Sj,{}),m.jsx(_j,{})]})}function Ej(){return m.jsx("div",{className:"content-stretch flex h-[35.99px] items-start relative shrink-0 w-full","data-name":"Heading 1",children:m.jsx("p",{className:"basis-0 font-['Inter:Regular',_'Noto_Sans_Arabic:Regular',_sans-serif] font-normal grow leading-[36px] min-h-px min-w-px not-italic relative shrink-0 text-[30px] text-center text-white tracking-[0.3955px]",dir:"auto",children:" "})})}function Tj(){return m.jsx("div",{className:"relative shrink-0 w-full","data-name":"Paragraph",children:m.jsx("div",{className:"flex flex-col items-center justify-center size-full",children:m.jsx("div",{className:"box-border content-stretch flex flex-col gap-[10px] items-center justify-center px-[101px] py-0 relative w-full",children:m.jsx("p",{className:"font-['Inter:Regular',_sans-serif] font-normal leading-[28px] not-italic relative shrink-0 text-[18px] text-[rgba(255,255,255,0.6)] text-center text-nowrap tracking-[-0.4395px] whitespace-pre",dir:"auto",children:"Choose language"})})})})}function Pj(){return m.jsxs("div",{className:"content-stretch flex flex-col gap-[7.999px] h-[71.989px] items-start relative shrink-0 w-full","data-name":"Container",children:[m.jsx(Ej,{}),m.jsx(Tj,{})]})}function Cj(){return m.jsxs("div",{className:"content-stretch flex flex-col font-['Inter:Regular',_'Noto_Sans_Arabic:Regular',_sans-serif] font-normal gap-[3.995px] h-[55.983px] items-center not-italic relative shrink-0 text-nowrap text-center w-full whitespace-pre","data-name":"Container",children:[m.jsx("p",{className:"leading-[32px] relative shrink-0 text-[24px] text-white tracking-[0.0703px] w-full",dir:"auto",children:""}),m.jsx("p",{className:"leading-[20px] relative shrink-0 text-[14px] text-[rgba(255,255,255,0.6)] tracking-[-0.1504px] w-full",dir:"auto",children:" "})]})}function jj({onClick:t}){return m.jsxs("button",{onClick:t,className:"bg-[rgba(0,0,0,0.4)] h-[105.019px] relative rounded-[16px] shrink-0 w-full cursor-pointer transition-all duration-200 active:scale-95 hover:bg-[rgba(0,0,0,0.5)]","data-name":"Button",children:[m.jsx("div",{className:"flex flex-col items-center overflow-clip rounded-[inherit] size-full",children:m.jsx("div",{className:"box-border content-stretch flex flex-col h-[105.019px] items-center pb-[0.522px] pt-[24.518px] px-[24.518px] relative w-full",children:m.jsx(Cj,{})})}),m.jsx("div",{"aria-hidden":"true",className:"absolute border-[0.522px] border-[rgba(255,255,255,0.1)] border-solid inset-0 pointer-events-none rounded-[16px]"})]})}function Aj(){return m.jsxs("div",{className:"content-stretch flex flex-col font-['Inter:Regular',_sans-serif] font-normal gap-[3.995px] h-[55.983px] items-center not-italic relative shrink-0 text-nowrap text-center w-full whitespace-pre","data-name":"Container",children:[m.jsx("p",{className:"leading-[32px] relative shrink-0 text-[24px] text-white tracking-[0.0703px] w-full",children:"English"}),m.jsx("p",{className:"leading-[20px] relative shrink-0 text-[14px] text-[rgba(255,255,255,0.6)] tracking-[-0.1504px] w-full",children:"Translated Poetry"})]})}function Nj({onClick:t}){return m.jsxs("button",{onClick:t,className:"bg-[rgba(0,0,0,0.4)] h-[105.019px] relative rounded-[16px] shrink-0 w-full cursor-pointer transition-all duration-200 active:scale-95 hover:bg-[rgba(0,0,0,0.5)]","data-name":"Button",children:[m.jsx("div",{className:"overflow-clip rounded-[inherit] size-full",children:m.jsx("div",{className:"box-border content-stretch flex flex-col h-[105.019px] items-center pb-[0.522px] pt-[24.518px] px-[24.518px] relative w-full",children:m.jsx(Aj,{})})}),m.jsx("div",{"aria-hidden":"true",className:"absolute border-[0.522px] border-[rgba(255,255,255,0.1)] border-solid inset-0 pointer-events-none rounded-[16px]"})]})}function Rj({onFarsiClick:t,onEnglishClick:e}){return m.jsxs("div",{className:"content-stretch flex flex-col gap-[16px] items-start relative shrink-0 w-full","data-name":"Container",children:[m.jsx(jj,{onClick:t}),m.jsx(Nj,{onClick:e})]})}function Lj(){return m.jsx("div",{className:"relative shrink-0 w-full",children:m.jsx("div",{className:"flex flex-col items-center justify-center size-full",children:m.jsxs("div",{className:"box-border content-stretch flex flex-col font-normal gap-[10px] items-center justify-center leading-[16px] not-italic p-[10px] relative text-[12px] text-[rgba(255,255,255,0.4)] text-center text-nowrap w-full whitespace-pre",children:[m.jsx("p",{className:"font-['Inter:Regular',_'Noto_Sans_Arabic:Regular',_sans-serif] relative shrink-0",dir:"auto",children:"      "}),m.jsx("p",{className:"font-['Inter:Regular',_sans-serif] relative shrink-0",children:"You can change this anytime"})]})})})}function Ij({onFarsiClick:t,onEnglishClick:e}){return m.jsxs("div",{className:"absolute box-border content-stretch flex flex-col gap-[47.992px] inset-[286px_19px_251.99px_18px] items-start px-[23.996px] py-0","data-name":"LanguageSelectionScreen",children:[m.jsx(Pj,{}),m.jsx(Rj,{onFarsiClick:t,onEnglishClick:e}),m.jsx(Lj,{})]})}function Oj({onLanguageSelect:t}){return m.jsxs("div",{className:"language-selection-container bg-black content-stretch flex flex-col gap-[10px] items-center justify-center relative size-full fixed inset-0 z-[9999]","data-name":"WelcomeScreen",children:[m.jsx(kj,{}),m.jsx("p",{className:"absolute bottom-[722px] leading-[48px] left-[calc(50%-86.5px)] text-[48px] text-neutral-50 text-nowrap top-[162px] tracking-[0.0508px] whitespace-pre",dir:"auto",style:{fontFamily:"'Noto Nastaliq Urdu', Tahoma, Arial, sans-serif"},children:" "}),m.jsx(Ij,{onFarsiClick:()=>t("fa"),onEnglishClick:()=>t("en")})]})}function Dj({poem:t,isActive:e,currentIndex:r,cardIndex:o}){b.useRef(null);const{isRTL:i}=$n(),{theme:c}=zr(),l=()=>{const d=o-r;return d===0?"translateY(0%)":d<0?"translateY(-100%)":"translateY(100%)"};return m.jsxs("div",{className:"absolute inset-0 w-full h-screen flex flex-col bg-transparent transition-transform duration-300 ease-out overflow-hidden",style:{transform:l(),zIndex:e?10:1},children:[m.jsx("div",{className:"relative z-20 w-full text-center px-6 md:px-8 flex-shrink-0",style:{paddingTop:"max(2rem, env(safe-area-inset-top) + 1rem)"}}),m.jsx("div",{className:"relative z-20 max-w-4xl w-full flex-1 flex flex-col justify-center text-center px-6 md:px-8 self-center px-[24px] py-[0px]",children:m.jsx(wj,{text:(()=>{const h=t.text.split(/\r?\n/).filter(v=>v.trim()!==""),p=[];for(let v=0;v<h.length;v+=2)v+1<h.length?(p.push(h[v]),p.push(`
`),p.push(h[v+1]),v+2<h.length&&p.push(`

`)):p.push(h[v]);return p.join("")})(),speed:i?20:25,startDelay:600,lineBreakPause:600,isActive:e,className:`${c==="dark"?"text-white":"text-black"} leading-relaxed font-light tracking-wide transition-all duration-500 overflow-y-auto scrollbar-hide text-shadow-lg drop-shadow-lg`,dir:i?"rtl":"ltr",style:{fontFamily:i?"system-ui, -apple-system, sans-serif":'Georgia, "Times New Roman", serif',fontSize:i?"20px":"16px",lineHeight:"1.8",maxHeight:"calc(100vh - 200px)",paddingLeft:i?"0":"48px",paddingRight:i?"0":"48px",textShadow:c==="dark"?"2px 2px 4px rgba(0, 0, 0, 0.8), 0 0 8px rgba(0, 0, 0, 0.6)":"2px 2px 4px rgba(255, 255, 255, 0.8), 0 0 8px rgba(255, 255, 255, 0.6)",whiteSpace:"pre-line"}})}),m.jsx("div",{className:"flex-shrink-0",style:{paddingBottom:"max(2rem, env(safe-area-inset-bottom) + 1rem)"}})]})}function Mj(){const[t,e]=b.useState([]),[r,o]=b.useState(!1),[i,c]=b.useState(!1),[l,d]=b.useState(new Set),[h,p]=b.useState(!1),[v,g]=b.useState(!0),[w,S]=b.useState(0),_=b.useRef(null),k=b.useRef(null),[E,P]=b.useState(!0),[I,A]=b.useState(!1),[W,V]=b.useState(!1),[O,H]=b.useState(!1),[M,ee]=b.useState(!1),{user:ie,refreshSession:Ee}=Eo(),{language:he,t:we,isRTL:_e,hasSelectedLanguage:xe,isLoadingPreference:ue,saveLanguagePreference:U}=$n(),{theme:C}=zr(),[re,K]=b.useState(null),[R,G]=b.useState(!1),[N,$]=b.useState(null),[X,ae]=b.useState(!1);b.useRef(0);const[le,B]=b.useState(new Map),de=b.useRef(new Map),[be,Oe]=b.useState(0),[Ie,He]=b.useState(0);b.useRef();const Xe=b.useCallback(()=>{Oe(0),He(0)},[]),At=b.useCallback(()=>be<5?!0:Date.now()-Ie>600*1e3,[be,Ie]),Ut=b.useCallback(()=>{const q=be+1;Oe(q),He(Date.now()),q>=5&&p(!0)},[be]),It=async()=>{if(!At())return null;try{const q=new AbortController,fe=setTimeout(()=>q.abort(),5e3),Y=await fetch("https://api.ganjoor.net/api/ganjoor/poem/random",{signal:q.signal,headers:{Accept:"application/json","User-Agent":"Persian Poetry App","Cache-Control":"no-cache"}});if(clearTimeout(fe),!Y.ok)return Ut(),null;const J=await Y.text();if(!J.trim())return Ut(),null;const ne=JSON.parse(J);if(!ne?.id||!ne.plainText&&!ne.text)return Ut(),null;if(l.has(ne.id))return null;let Re="";ne.poet?.name?Re=ne.poet.name.trim():ne.fullTitle?.includes("  ")&&(Re=ne.fullTitle.split("  ")[0].trim());const lt=ne.plainText||ne.text||"",ze={id:ne.id,title:(ne.title||" ").trim(),text:lt.trim(),htmlText:ne.htmlText||lt.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>"),poet:{id:ne.poet?.id||Date.now(),name:Re,fullName:ne.poet?.fullName||Re}};return Xe(),d(Te=>new Set([...Te,ne.id])),ze}catch{return Ut(),null}},sn=async(q=20)=>{const fe=[],Y=Math.min(q*2,30);let J=0;for(console.log(`Fetching ${q} poems from Ganjoor API...`);fe.length<q&&J<Y&&At();)try{const ne=await It();ne&&(fe.push(ne),console.log(` Fetched poem ${fe.length}/${q}: ${ne.title}`)),J++,fe.length<q&&J<Y&&await new Promise(Re=>setTimeout(Re,200))}catch(ne){if(console.warn("Single poem fetch error:",ne),J++,J>=8&&fe.length===0){console.warn("Too many consecutive failures, stopping API requests");break}}return console.log(` Successfully fetched ${fe.length} poems from API (${J} attempts)`),fe},yt=q=>{const fe=["","","","","","","","","",""];return q.toString().split("").map(Y=>fe[parseInt(Y)]).join("")},Kt=b.useCallback((q,fe)=>{const Y=fe==="fa",J=q.text.toLowerCase();if(Y){const ne=[];(J.includes("")||J.includes("")||J.includes(""))&&ne.push("  "),(J.includes("")||J.includes("")||J.includes(""))&&ne.push("  "),(J.includes("")||J.includes("")||J.includes(""))&&ne.push(" "),(J.includes("")||J.includes("")||J.includes(""))&&ne.push("  "),(J.includes("")||J.includes("")||J.includes(""))&&ne.push("  "),(J.includes("")||J.includes("")||J.includes(""))&&ne.push(" ");const Re=ne.length>0?ne.join(" "):"  ",ze=q.text.split(/\r?\n/).filter(Te=>Te.trim()!=="").slice(0,8).map(Te=>{let Ze=`   ${Re}  `;return Te.includes("")||Te.includes("")?Ze="        ":Te.includes("")||Te.includes("")?Ze="          ":Te.includes("")||Te.includes("")?Ze="          ":(Te.includes("")||Te.includes(""))&&(Ze="        "),{original:Te.trim(),meaning:Ze}});return{generalMeaning:`     ${Re}                   .`,mainThemes:` : ${Re}`,imagerySymbols:"                 .",lineByLine:ze}}else{const ne=[];(J.includes("love")||J.includes("heart")||J.includes("beloved"))&&ne.push("love and devotion"),(J.includes("flower")||J.includes("garden")||J.includes("spring"))&&ne.push("nature and beauty"),(J.includes("life")||J.includes("world")||J.includes("time"))&&ne.push("philosophy of life"),(J.includes("god")||J.includes("divine")||J.includes("spiritual"))&&ne.push("spirituality and mysticism"),(J.includes("wine")||J.includes("cup")||J.includes("tavern"))&&ne.push("symbolism and metaphor");const Re=ne.length>0?ne.join(", "):"beauty and artistry",ze=q.text.split(/\r?\n/).filter(Te=>Te.trim()!=="").slice(0,8).map(Te=>{let Ze=`This line explores themes of ${Re}`;return Te.toLowerCase().includes("love")||Te.toLowerCase().includes("heart")?Ze="This line expresses deep emotions and the nature of love":Te.toLowerCase().includes("flower")||Te.toLowerCase().includes("garden")?Ze="This line uses nature imagery to convey beauty and transience":(Te.toLowerCase().includes("wine")||Te.toLowerCase().includes("cup"))&&(Ze="Here wine serves as a metaphor for spiritual intoxication"),{original:Te.trim(),meaning:Ze}});return{generalMeaning:`This beautiful poem encompasses themes of ${Re}, using delicate imagery and metaphors to convey its profound message following the rich tradition of Persian poetry.`,mainThemes:`Main themes: ${Re}`,imagerySymbols:"The poet uses classical Persian metaphors and symbols, creating layers of meaning that enhance the poem's literary significance.",lineByLine:ze}}},[]),on=b.useCallback(async()=>{try{const q=new AbortController;return setTimeout(()=>q.abort(),5e3),!!(await fetch(`https://${ms}.supabase.co/functions/v1/make-server-c192d0ee/health`,{method:"GET",headers:{Authorization:`Bearer ${gs}`},signal:q.signal})).ok}catch{return!1}},[]),Qe=b.useCallback(async(q,fe=!1)=>{const Y=`${q.id}-${he}`;if(!fe&&le.has(Y))return le.get(Y);const J=de.current.get(Y);J&&!J.signal.aborted&&J.abort();const ne=new AbortController;de.current.set(Y,ne);const Re={data:{},loading:!0,error:"",timestamp:Date.now()};B(Te=>new Map(Te.set(Y,Re)));try{console.log(`Fetching OpenAI explanation for poem ${q.id} in ${he}`);const Te=setTimeout(()=>{ne.abort()},6e4),Ze=await fetch(`https://${ms}.supabase.co/functions/v1/make-server-c192d0ee/explain`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${gs}`},body:JSON.stringify({poem:{id:q.id,text:q.text,title:q.title,poet:q.poet},language:he}),signal:ne.signal});if(clearTimeout(Te),Ze.ok){const ft=await Ze.json();if(ft.explanation&&!ne.signal.aborted){console.log(` OpenAI explanation received for poem ${q.id}`);const Ot={data:ft.explanation,loading:!1,error:"",timestamp:Date.now()};return B(Un=>new Map(Un.set(Y,Ot))),de.current.delete(Y),Ot}}else console.warn(`Server returned error status: ${Ze.status}`)}catch(Te){Te.name!=="AbortError"?console.warn("OpenAI server explanation failed, using local fallback:",Te.message):console.warn("OpenAI request timed out, using local fallback")}console.log(`Using local explanation for poem ${q.id}`);const ze={data:Kt(q,he),loading:!1,error:"",timestamp:Date.now()};return B(Te=>new Map(Te.set(Y,ze))),de.current.delete(Y),ze},[he,le,Kt]),kt=async q=>{try{console.log(`Translating poem ${q.id} to English`);const fe=new AbortController,Y=setTimeout(()=>fe.abort(),12e3),J=await fetch(`https://${ms}.supabase.co/functions/v1/make-server-c192d0ee/translate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${gs}`},body:JSON.stringify({poem:{id:q.id,text:q.text,title:q.title,poet:{id:q.poet.id,name:q.poet.name||"Unknown",fullName:q.poet.fullName||q.poet.name||"Unknown"}}}),signal:fe.signal});if(clearTimeout(Y),!J.ok)return console.warn(`Translation API error: ${J.status}`),null;const ne=await J.json();if(!ne.translatedPoem)return console.warn("Translation API returned no translated poem"),null;let Re=q.poet.name||"Unknown Poet";ne.translatedPoem.poet&&(typeof ne.translatedPoem.poet=="string"&&ne.translatedPoem.poet.trim()?Re=ne.translatedPoem.poet.trim():typeof ne.translatedPoem.poet=="object"&&ne.translatedPoem.poet.name&&(Re=String(ne.translatedPoem.poet.name).trim()));const lt={id:q.id+1e3,title:(ne.translatedPoem.title||q.title||"Untitled").toString(),text:(ne.translatedPoem.text||q.text||"").toString(),htmlText:(ne.translatedPoem.htmlText||ne.translatedPoem.text?.replace(/\n/g,"<br/>")||q.htmlText||"").toString(),poet:{id:q.poet.id,name:Re,fullName:Re}};return console.log(` Translation successful for poem ${q.id}`,"Poet:",lt.poet.name),lt}catch(fe){return fe.name==="AbortError"?console.warn("Translation request timed out"):console.warn("Translation error:",fe),null}},fn=async q=>{o(!0);const fe=q||he;console.log("Loading initial poems for language:",fe);try{if(fe==="fa"){console.log("Loading Persian poems from API...");const Y=await Promise.race([sn(15),new Promise(J=>setTimeout(()=>{console.log("Initial load timeout"),J([])},15e3))]);if(Y.length>0)console.log(` Loaded ${Y.length} Persian poems from API`),e(Y),p(!1),o(!1);else{console.log("Retrying Persian poem fetch...");const J=await sn(10);J.length>0?(console.log(` Loaded ${J.length} Persian poems on retry`),e(J),p(!1),o(!1)):(console.error("Failed to load Persian poems from API after retry"),o(!1))}}else{console.log("Loading English poems - fetching Persian poems to translate...");const Y=await Promise.race([sn(8),new Promise(J=>setTimeout(()=>{console.log("Persian fetch timeout for translation"),J([])},12e3))]);if(Y.length>0){console.log(`Fetched ${Y.length} Persian poems, starting translation...`);const J=[];for(const ne of Y)try{const Re=await Promise.race([kt(ne),new Promise(lt=>setTimeout(()=>{console.log(`Translation timeout for poem ${ne.id}`),lt(null)},15e3))]);Re&&(J.push(Re),console.log(` Translated poem ${ne.id} (${J.length}/${Y.length})`)),await new Promise(lt=>setTimeout(lt,300))}catch(Re){console.warn("Translation failed for poem:",ne.id,String(Re))}J.length>0?(console.log(` Successfully translated ${J.length} poems to English`),e(J),p(!1),o(!1)):(console.error("Failed to translate any poems"),o(!1))}else console.error("Failed to fetch Persian poems for translation"),o(!1)}}catch(Y){console.error("Error loading initial poems:",String(Y)),o(!1)}},Tn=async()=>{if(!(i||!v)){c(!0),console.log("Loading additional poems for language:",he);try{if(he==="fa"){console.log("Fetching more Persian poems from API...");const q=await Promise.race([sn(10),new Promise(fe=>setTimeout(()=>{console.log("Load more timeout"),fe([])},15e3))]);q.length>0?(console.log(` Loaded ${q.length} more Persian poems from API`),e(fe=>[...fe,...q])):(console.error("Failed to load more Persian poems"),g(!1))}else{console.log("Fetching and translating more Persian poems to English...");const q=await Promise.race([sn(5),new Promise(fe=>setTimeout(()=>{console.log("Persian fetch timeout for translation"),fe([])},1e4))]);if(q.length>0){console.log(`Translating ${q.length} Persian poems to English...`);const fe=[];for(const Y of q)try{const J=await Promise.race([kt(Y),new Promise(ne=>setTimeout(()=>ne(null),1e4))]);J&&fe.push(J),await new Promise(ne=>setTimeout(ne,200))}catch(J){console.warn("Translation failed for poem:",Y.id,J)}fe.length>0?(console.log(` Successfully translated ${fe.length} more poems to English`),e(Y=>[...Y,...fe])):(console.error("Failed to translate any poems"),g(!1))}else console.error("Failed to fetch Persian poems for translation"),g(!1)}}catch(q){console.error("Error loading more poems:",q),g(!1)}finally{c(!1)}}},wt=b.useCallback(q=>{console.log("navigateToPoem called:",{from:w,to:q,totalPoems:t.length}),q>=0&&q<t.length?(console.log(" Navigating to poem index:",q),S(q),"vibrate"in navigator&&navigator.vibrate(10)):console.log(" Cannot navigate - index out of bounds:",{index:q,min:0,max:t.length-1})},[w,t.length]),at=I||W||O||M,se=b.useCallback(q=>{if(at)return;const fe=q.touches[0];K({y:fe.clientY,time:Date.now()}),ae(!1),$(null),console.log("Touch start:",fe.clientY)},[at]),Me=b.useCallback(q=>{if(at||!re)return;const fe=q.touches[0],Y=re.y-fe.clientY;if(Math.abs(Y)>10&&ae(!0),Math.abs(Y)>30){const J=Y>0?"up":"down";$(J),console.log("Swipe direction:",J,"Delta:",Y)}Math.abs(Y)>20&&q.preventDefault()},[re,at]),Fe=b.useCallback(q=>{if(at||!re)return;const fe=q.changedTouches[0],Y=re.y-fe.clientY,J=Date.now()-re.time;console.log("Touch end - deltaY:",Y,"deltaTime:",J,"currentIndex:",w,"totalPoems:",t.length),Math.abs(Y)>40&&J<800?(q.preventDefault(),Y>0?(w<t.length-1?(console.log("Navigating to next poem:",w+1),wt(w+1)):console.log("At last poem, loading more..."),w>=t.length-5&&!i&&(console.log("Near end of poems, loading more..."),Tn())):Y<0&&(w>0?(console.log("Navigating to previous poem:",w-1),wt(w-1)):console.log("At first poem"))):console.log("Swipe not detected - deltaY:",Math.abs(Y),"threshold: 40, deltaTime:",J,"limit: 800"),K(null),$(null),ae(!1)},[re,w,t.length,wt,i,at]),ht=b.useCallback(q=>{at||(q.key==="ArrowUp"||q.key==="ArrowLeft"?(q.preventDefault(),w>0?(console.log("Keyboard navigation to previous poem:",w-1),wt(w-1)):console.log("At first poem, cannot go to previous")):(q.key==="ArrowDown"||q.key==="ArrowRight")&&(q.preventDefault(),w<t.length-1?(console.log("Keyboard navigation to next poem:",w+1),wt(w+1),w>=t.length-5&&!i&&(console.log("Near end, loading more poems..."),Tn())):(console.log("At last poem, cannot go to next without loading more"),w>=t.length-5&&!i&&(console.log("Loading more poems from keyboard navigation..."),Tn()))))},[w,t.length,wt,i,at]),an=()=>{A(!0)},Ts=()=>{ie?V(!0):A(!0)},Ps=()=>{V(!1),H(!0)},Cs=()=>{ee(!0)},fr=()=>{P(q=>!q)},Hr=()=>{console.log("handleVideoNext called"),k.current?(console.log("VideoPlaylist ref found, calling navigateNext"),k.current.navigateNext()):console.warn("VideoPlaylist ref not found")},Zn=()=>{console.log("handleVideoPrevious called"),k.current?(console.log("VideoPlaylist ref found, calling navigatePrevious"),k.current.navigatePrevious()):console.warn("VideoPlaylist ref not found")},Gt=async()=>{console.log("Refreshing app - cancelling active requests and resetting state");const q=Array.from(de.current.entries());de.current.clear(),q.forEach(([fe,Y])=>{try{Y.signal.aborted||Y.abort()}catch{}}),S(0),d(new Set),B(new Map),e([]),p(!1),g(!0),Oe(0),He(0),setTimeout(()=>{fn()},100)},Wr=async q=>{console.log("Language selected:",q),console.log("Saving language preference to localStorage and server..."),await U(q,ie?.id),console.log("Language preference saved. Current language state:",he),console.log("localStorage language:",localStorage.getItem("app-language")),setTimeout(()=>{console.log("Starting to load poems for selected language:",q),console.log("Context language state is now:",he),fn(q)},200)},Vn=async q=>{if(q===he)return;console.log(`Language changed to: ${q}`),await U(q,ie?.id);const fe=Array.from(de.current.entries());de.current.clear(),fe.forEach(([Y,J])=>{try{J.signal.aborted||J.abort()}catch(ne){console.warn("Error cancelling request during language change:",ne)}}),B(new Map),S(0),d(new Set),e([]),p(!1),g(!0),Oe(0),He(0),setTimeout(()=>{fn(q)},100)};return b.useEffect(()=>{(async()=>{if(ie?.id&&!xe&&!ue)try{console.log("Loading saved language preference from server for user:",ie.id);const fe=await fetch(`https://${ms}.supabase.co/functions/v1/make-server-c192d0ee/user-preference/${ie.id}/language`,{headers:{Authorization:`Bearer ${gs}`}});if(fe.ok){const Y=await fe.json();Y.value&&["fa","en"].includes(Y.value)&&(console.log(" Loaded saved language preference from server:",Y.value),await U(Y.value,ie.id))}}catch(fe){console.warn("Failed to load language preference from server:",fe)}})()},[ie?.id,xe,ue]),b.useEffect(()=>{const q=new URLSearchParams(window.location.search),fe=new URLSearchParams(window.location.hash.substring(1)),Y=q.get("reset")==="true",J=fe.get("access_token")||q.get("access_token");Y&&J&&A(!0)},[]),b.useEffect(()=>{const q=Y=>{const J=Y.error;J&&(J.message?.includes("Invalid Refresh Token")||J.message?.includes("refresh_token_not_found")||J.name==="AuthApiError")&&(console.log("Global auth error detected, letting AuthContext handle it"),Y.preventDefault())},fe=Y=>{const J=Y.reason;J&&(J.message?.includes("Invalid Refresh Token")||J.message?.includes("refresh_token_not_found")||J.name==="AuthApiError")&&(console.log("Global auth promise rejection detected, letting AuthContext handle it"),Y.preventDefault())};return window.addEventListener("error",q),window.addEventListener("unhandledrejection",fe),()=>{window.removeEventListener("error",q),window.removeEventListener("unhandledrejection",fe)}},[]),b.useEffect(()=>{if(!xe||ue){console.log("Skipping auto-load - waiting for language selection");return}let q=!0;return(async()=>{if(q){if(t.length>0){console.log("Poems already loaded, skipping auto-load");return}console.log("Auto-loading poems for language:",he);try{on().then(Y=>{console.log("Server connectivity:",Y?"available":"unavailable")}).catch(()=>{console.warn("Server connectivity test failed")}),await fn(he)}catch(Y){console.error("Error in loadData:",Y),o(!1)}}})(),()=>{q=!1,de.current.forEach((Y,J)=>{try{Y.abort()}catch(ne){console.warn("Error aborting controller on unmount:",ne)}}),de.current.clear()}},[on,xe,ue,he]),b.useEffect(()=>{if(le.size>20){const q=Array.from(le.entries());q.sort((Y,J)=>J[1].timestamp-Y[1].timestamp);const fe=new Map(q.slice(0,15));B(fe),console.log(`Cleaned explanation cache: ${le.size} -> ${fe.size} entries`)}},[le.size]),b.useEffect(()=>{if(ue||!xe||r)return;const q=_.current;if(!q){console.warn("Container ref not found, touch navigation will not work");return}return console.log("Setting up touch and keyboard event listeners"),q.addEventListener("touchstart",se,{passive:!0}),q.addEventListener("touchmove",Me,{passive:!1}),q.addEventListener("touchend",Fe,{passive:!1}),window.addEventListener("keydown",ht),console.log(" Event listeners added successfully"),()=>{console.log("Cleaning up event listeners"),q.removeEventListener("touchstart",se),q.removeEventListener("touchmove",Me),q.removeEventListener("touchend",Fe),window.removeEventListener("keydown",ht)}},[se,Me,Fe,ht,ue,xe,r]),ue?(console.log("Showing loading screen - isLoadingPreference:",ue),m.jsxs("div",{className:"h-screen bg-background flex flex-col items-center justify-center",children:[m.jsx("div",{className:"w-16 h-16 border-4 border-foreground/20 border-t-foreground rounded-full animate-spin mb-6"}),m.jsx("div",{className:"text-foreground text-xl md:text-2xl animate-pulse",children:"Loading..."})]})):xe?(console.log("App ready - Language:",he,"hasSelectedLanguage:",xe,"Poems count:",t.length),r?m.jsxs("div",{className:"h-screen bg-background flex flex-col items-center justify-center",children:[m.jsx("div",{className:"w-16 h-16 border-4 border-foreground/20 border-t-foreground rounded-full animate-spin mb-6"}),m.jsx("div",{className:"text-foreground text-xl md:text-2xl animate-pulse",dir:_e?"rtl":"ltr",children:we.loading})]}):m.jsxs("div",{ref:_,className:"h-screen w-full bg-background relative overflow-hidden app-container",style:{touchAction:"manipulation",height:"100vh",height:"100dvh",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[N&&m.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center pointer-events-none",children:m.jsx("div",{className:`${C==="dark"?"text-white":"text-black"} text-6xl transform transition-all duration-200 ${N==="up"?"translate-y-4 opacity-90 scale-110":"-translate-y-4 opacity-90 scale-110"}`,style:{textShadow:C==="dark"?"2px 2px 8px rgba(0, 0, 0, 0.8), 0 0 16px rgba(0, 0, 0, 0.6)":"2px 2px 8px rgba(255, 255, 255, 0.8), 0 0 16px rgba(255, 255, 255, 0.6)",filter:"drop-shadow(0 0 10px currentColor)"},children:N==="up"?"":""})}),X&&m.jsxs("div",{className:"absolute top-20 right-4 z-50 bg-black/50 text-white text-xs p-2 rounded pointer-events-none",children:[m.jsxs("div",{children:["Current: ",w+1,"/",t.length]}),m.jsxs("div",{children:["Direction: ",N||"none"]}),m.jsxs("div",{children:["Dragging: ",X?"yes":"no"]})]}),m.jsx(tw,{ref:k,isMuted:E}),t.slice(Math.max(0,w-1),Math.min(t.length,w+2)).map((q,fe)=>{const Y=Math.max(0,w-1)+fe;return m.jsx(Dj,{poem:q,isActive:Y===w,currentIndex:w,cardIndex:Y},`${q.id}-${Y}`)}),m.jsxs("div",{className:"absolute top-16 left-4 z-40 flex flex-col space-y-4",children:[Array.from({length:5},(q,fe)=>{if(t.length===0)return null;const J=Math.max(0,w-2)+fe,ne=J<t.length,Re=J===w&&ne;return m.jsx("div",{className:`w-1.5 h-4 rounded-full transition-all duration-300 shadow-lg ${Re?C==="dark"?"bg-white":"bg-black":ne?C==="dark"?"bg-white/50":"bg-black/50":C==="dark"?"bg-white/20":"bg-black/20"}`,style:{opacity:ne?1:.3}},fe)}),m.jsx("div",{className:`mt-2 ${C==="dark"?"text-white/80":"text-black/80"} text-xs text-left shadow-lg`,dir:"rtl",style:{textShadow:C==="dark"?"1px 1px 2px rgba(0, 0, 0, 0.8)":"1px 1px 2px rgba(255, 255, 255, 0.8)"},children:yt(w+1)})]}),i&&m.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-20",children:m.jsx("div",{className:"text-foreground/60 text-sm animate-pulse",dir:_e?"rtl":"ltr",children:we.loading})}),m.jsx(xC,{poem:t.length>0?t[w]:void 0,onAuthRequired:an,onMoreOpen:Cs,onRefresh:Gt,onLanguageChange:Vn,isMuted:E,onToggleMute:fr}),m.jsx(IC,{onOpen:Ts}),t.length>0&&t[w]&&t[w].poet&&m.jsx("div",{className:`fixed top-10 left-1/2 transform -translate-x-1/2 z-40 ${C==="dark"?"text-white bg-black/50":"text-black bg-white/50"} text-sm text-center backdrop-blur-sm rounded-lg px-3 py-1 shadow-lg`,dir:_e?"rtl":"ltr",style:{textShadow:C==="dark"?"1px 1px 2px rgba(0, 0, 0, 0.8)":"1px 1px 2px rgba(255, 255, 255, 0.8)"},children:t[w].poet.name||(he==="en"?"Unknown Poet":"")}),m.jsx(vj,{onNext:Hr,onPrevious:Zn}),m.jsx("div",{className:"fixed bottom-10 left-1/2 transform -translate-x-1/2 z-30",children:m.jsx("div",{className:"w-32 h-16",children:m.jsx(yj,{})})}),m.jsx(oj,{open:I,onOpenChange:A}),m.jsx(aj,{open:W,onOpenChange:V,onShowFavorites:Ps}),m.jsx(pj,{open:O,onOpenChange:H}),m.jsx(gj,{open:M,onOpenChange:ee,poem:t.length>0?t[w]:void 0,cachedExplanation:t.length>0&&t[w]?le.get(`${t[w].id}-${he}`):void 0,onFetchExplanation:Qe}),m.jsx(xj,{})]})):(console.log("Showing language selection screen - hasSelectedLanguage:",xe),console.log("Current language from context:",he),console.log("localStorage language:",localStorage.getItem("app-language")),m.jsx(Oj,{onLanguageSelect:Wr}))}function $j(){return m.jsx(jS,{children:m.jsx(i1,{children:m.jsx(CS,{children:m.jsx(AS,{children:m.jsx(Mj,{})})})})})}r1.createRoot(document.getElementById("root")).render(m.jsx($j,{}));
